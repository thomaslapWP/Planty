var ci=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var N=(e,t,r)=>(ci(e,t,"read from private field"),r?r.call(e):t.get(e)),ne=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},X=(e,t,r,i)=>(ci(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var Sn=(e,t,r,i)=>({set _(n){X(e,t,n,r)},get _(){return N(e,t,i)}}),ge=(e,t,r)=>(ci(e,t,"access private method"),r);import{r as G,j as $,l as te,bB as Qs,aC as rr,bC as Hs,aS as Wi,bD as Ws,bE as Zs,_ as cn,bF as Gs,bG as ks,bw as fi,bh as Ks,bH as Js,bb as Xs,bI as gt,bJ as Zt,bK as Ys,bL as lu,bM as eo,N as cu,bN as to,bO as ro,bm as no,bP as fu,z as hu,bQ as hi,bR as mt,bk as io,bg as uo,bS as du,bT as di,bd as Ea,bf as ao,bU as pu,bV as so,bW as oo,bX as lo,bY as co,bZ as vu,b8 as fo,P as ho,p as mu,b_ as po,q as vo,b$ as mo,c0 as Do,c1 as Du,c2 as go,e as Wr,C as pi}from"./main-1.0.7.js";import{B as _n,A as gu,C as yu,a as wu,b as yo}from"./AdminTheme-1.0.7-e1a0758c.js";import{u as wo,e as Co,f as Ao,g as Fo,M as Eo}from"./index.esm-1.0.7-790ca268.js";import{u as Zi,b as vr,V as bo,W as So,X as No,T as Cu,O as Au,Y as Mo,g as Nn,B as On,i as xo,Z as Mn,_ as Bo,$ as _o,A as To,e as Oo,f as Po,S as Ro,D as Io,p as zo}from"./main-1.0.7-9bcf9658.js";import{l as ba}from"./ActionsDml-1.0.7-c9050d88.js";import{u as qo}from"./useStoreTable-1.0.7-4bf15352.js";import{u as Lo,R as Uo,a as vi,B as $o,b as Vo,c as jo,d as Qo,e as mi,C as Ho,j as Wo}from"./settings-1.0.7-0ed115b6.js";import{u as Zo}from"./useAppLanguage-1.0.7-7d769d48.js";import{a as Go,b as ko,c as Ko,d as Jo,e as Xo}from"./index.esm-1.0.7-50dfbcc7.js";import{i as Yo}from"./index-1.0.7-2cb350a7.js";import{Q as Sa,T as el,I as Di}from"./iconBase-1.0.7-dd244ceb.js";import{b as gi}from"./TextField-1.0.7-db52d17f.js";import{S as tl}from"./ScopeEnum-1.0.7-801b5acc.js";import{T as yi}from"./Tabs-1.0.7-766143ea.js";const rl={actions:"Actions",and:"and",cancel:"Cancel",changeFilterMode:"Change filter mode",changeSearchMode:"Change search mode",clearFilter:"Clear filter",clearSearch:"Clear search",clearSelection:"Clear selection",clearSort:"Clear sort",clickToCopy:"Click to copy",copy:"Copy",collapse:"Collapse",collapseAll:"Collapse all",columnActions:"Column Actions",copiedToClipboard:"Copied to clipboard",dropToGroupBy:"Drop to group by {column}",edit:"Edit",expand:"Expand",expandAll:"Expand all",filterArrIncludes:"Includes",filterArrIncludesAll:"Includes all",filterArrIncludesSome:"Includes",filterBetween:"Between",filterBetweenInclusive:"Between Inclusive",filterByColumn:"Filter by {column}",filterContains:"Contains",filterEmpty:"Empty",filterEndsWith:"Ends With",filterEquals:"Equals",filterEqualsString:"Equals",filterFuzzy:"Fuzzy",filterGreaterThan:"Greater Than",filterGreaterThanOrEqualTo:"Greater Than Or Equal To",filterInNumberRange:"Between",filterIncludesString:"Contains",filterIncludesStringSensitive:"Contains",filterLessThan:"Less Than",filterLessThanOrEqualTo:"Less Than Or Equal To",filterMode:"Filter Mode: {filterType}",filterNotEmpty:"Not Empty",filterNotEquals:"Not Equals",filterStartsWith:"Starts With",filterWeakEquals:"Equals",filteringByColumn:"Filtering by {column} - {filterType} {filterValue}",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",goToNextPage:"Go to next page",goToPreviousPage:"Go to previous page",grab:"Grab",groupByColumn:"Group by {column}",groupedBy:"Grouped by ",hideAll:"Hide all",hideColumn:"Hide {column} column",max:"Max",min:"Min",move:"Move",noRecordsToDisplay:"No records to display",noResultsFound:"No results found",of:"of",or:"or",pin:"Pin",pinToLeft:"Pin to left",pinToRight:"Pin to right",resetColumnSize:"Reset column size",resetOrder:"Reset order",rowActions:"Row Actions",rowNumber:"#",rowNumbers:"Row Numbers",rowsPerPage:"Rows per page",save:"Save",search:"Search",selectedCountOfRowCountRowsSelected:"{selectedCount} of {rowCount} row(s) selected",select:"Select",showAll:"Show all",showAllColumns:"Show all columns",showHideColumns:"Show/Hide columns",showHideFilters:"Show/Hide filters",showHideSearch:"Show/Hide search",sortByColumnAsc:"Sort by {column} ascending",sortByColumnDesc:"Sort by {column} descending",sortedByColumnAsc:"Sorted by {column} ascending",sortedByColumnDesc:"Sorted by {column} descending",thenBy:", then by ",toggleDensity:"Toggle density",toggleFullScreen:"Toggle full screen",toggleSelectAll:"Toggle select all",toggleSelectRow:"Toggle select row",toggleVisibility:"Toggle visibility",ungroupByColumn:"Ungroup by {column}",unpin:"Unpin",unpinAll:"Unpin all"};var fn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ir=typeof window>"u"||"Deno"in globalThis;function Ct(){}function nl(e,t){return typeof e=="function"?e(t):e}function Si(e){return typeof e=="number"&&e>=0&&e!==1/0}function Na(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Cr(e,t){return typeof e=="function"?e(t):e}function St(e,t){return typeof e=="function"?e(t):e}function Fu(e,t){const{type:r="all",exact:i,fetchStatus:n,predicate:u,queryKey:l,stale:d}=e;if(l){if(i){if(t.queryHash!==Gi(l,t.options))return!1}else if(!kr(t.queryKey,l))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||n&&n!==t.state.fetchStatus||u&&!u(t))}function Eu(e,t){const{exact:r,status:i,predicate:n,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(Gr(t.options.mutationKey)!==Gr(u))return!1}else if(!kr(t.options.mutationKey,u))return!1}return!(i&&t.state.status!==i||n&&!n(t))}function Gi(e,t){return((t==null?void 0:t.queryKeyHashFn)||Gr)(e)}function Gr(e){return JSON.stringify(e,(t,r)=>Mi(r)?Object.keys(r).sort().reduce((i,n)=>(i[n]=r[n],i),{}):r)}function kr(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!kr(e[r],t[r])):!1}function Ma(e,t){if(e===t)return e;const r=bu(e)&&bu(t);if(r||Mi(e)&&Mi(t)){const i=r?e:Object.keys(e),n=i.length,u=r?t:Object.keys(t),l=u.length,d=r?[]:{};let f=0;for(let h=0;h<l;h++){const s=r?h:u[h];(!r&&i.includes(s)||r)&&e[s]===void 0&&t[s]===void 0?(d[s]=void 0,f++):(d[s]=Ma(e[s],t[s]),d[s]===e[s]&&e[s]!==void 0&&f++)}return n===l&&f===n?e:d}return t}function Ni(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function bu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Mi(e){if(!Su(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Su(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Su(e){return Object.prototype.toString.call(e)==="[object Object]"}function il(e){return new Promise(t=>{setTimeout(t,e)})}function xi(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ma(e,t):t}function ul(e){return e}function al(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function sl(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var xa=Symbol(),Ba=(e,t)=>!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xa?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,sr,Kt,Fr,va,ol=(va=class extends fn{constructor(){super();ne(this,sr,void 0);ne(this,Kt,void 0);ne(this,Fr,void 0);X(this,Fr,t=>{if(!Ir&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){N(this,Kt)||this.setEventListener(N(this,Fr))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,Kt))==null||t.call(this),X(this,Kt,void 0))}setEventListener(t){var r;X(this,Fr,t),(r=N(this,Kt))==null||r.call(this),X(this,Kt,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){N(this,sr)!==t&&(X(this,sr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof N(this,sr)=="boolean"?N(this,sr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},sr=new WeakMap,Kt=new WeakMap,Fr=new WeakMap,va),ki=new ol,Er,Jt,br,ma,ll=(ma=class extends fn{constructor(){super();ne(this,Er,!0);ne(this,Jt,void 0);ne(this,br,void 0);X(this,br,t=>{if(!Ir&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){N(this,Jt)||this.setEventListener(N(this,br))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,Jt))==null||t.call(this),X(this,Jt,void 0))}setEventListener(t){var r;X(this,br,t),(r=N(this,Jt))==null||r.call(this),X(this,Jt,t(this.setOnline.bind(this)))}setOnline(t){N(this,Er)!==t&&(X(this,Er,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return N(this,Er)}},Er=new WeakMap,Jt=new WeakMap,br=new WeakMap,ma),Pn=new ll;function cl(e){return Math.min(1e3*2**e,3e4)}function _a(e){return(e??"online")==="online"?Pn.isOnline():!0}var Ta=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function wi(e){return e instanceof Ta}function Oa(e){let t=!1,r=0,i=!1,n,u,l;const d=new Promise((v,g)=>{u=v,l=g}),f=v=>{var g;i||(y(new Ta(v)),(g=e.abort)==null||g.call(e))},h=()=>{t=!0},s=()=>{t=!1},a=()=>ki.isFocused()&&(e.networkMode==="always"||Pn.isOnline())&&e.canRun(),o=()=>_a(e.networkMode)&&e.canRun(),p=v=>{var g;i||(i=!0,(g=e.onSuccess)==null||g.call(e,v),n==null||n(),u(v))},y=v=>{var g;i||(i=!0,(g=e.onError)==null||g.call(e,v),n==null||n(),l(v))},c=()=>new Promise(v=>{var g;n=D=>{(i||a())&&v(D)},(g=e.onPause)==null||g.call(e)}).then(()=>{var v;n=void 0,i||(v=e.onContinue)==null||v.call(e)}),m=()=>{if(i)return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(D){v=Promise.reject(D)}Promise.resolve(v).then(p).catch(D=>{var E;if(i)return;const A=e.retry??(Ir?0:3),w=e.retryDelay??cl,C=typeof w=="function"?w(r,D):w,b=A===!0||typeof A=="number"&&r<A||typeof A=="function"&&A(r,D);if(t||!b){y(D);return}r++,(E=e.onFail)==null||E.call(e,r,D),il(C).then(()=>a()?void 0:c()).then(()=>{t?y(D):m()})})};return{promise:d,cancel:f,continue:()=>(n==null||n(),d),cancelRetry:h,continueRetry:s,canStart:o,start:()=>(o()?m():c().then(m),d)}}function fl(){let e=[],t=0,r=o=>{o()},i=o=>{o()},n=o=>setTimeout(o,0);const u=o=>{n=o},l=o=>{let p;t++;try{p=o()}finally{t--,t||h()}return p},d=o=>{t?e.push(o):n(()=>{r(o)})},f=o=>(...p)=>{d(()=>{o(...p)})},h=()=>{const o=e;e=[],o.length&&n(()=>{i(()=>{o.forEach(p=>{r(p)})})})};return{batch:l,batchCalls:f,schedule:d,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{i=o},setScheduler:u}}var tt=fl(),or,Da,Pa=(Da=class{constructor(){ne(this,or,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Si(this.gcTime)&&X(this,or,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ir?1/0:5*60*1e3))}clearGcTimeout(){N(this,or)&&(clearTimeout(N(this,or)),X(this,or,void 0))}},or=new WeakMap,Da),Sr,Nr,wt,at,Xr,lr,bt,Ut,ga,hl=(ga=class extends Pa{constructor(t){super();ne(this,bt);ne(this,Sr,void 0);ne(this,Nr,void 0);ne(this,wt,void 0);ne(this,at,void 0);ne(this,Xr,void 0);ne(this,lr,void 0);X(this,lr,!1),X(this,Xr,t.defaultOptions),this.setOptions(t.options),this.observers=[],X(this,wt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,X(this,Sr,t.state||dl(this.options)),this.state=N(this,Sr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,at))==null?void 0:t.promise}setOptions(t){this.options={...N(this,Xr),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,wt).remove(this)}setData(t,r){const i=xi(this.state.data,t,this.options);return ge(this,bt,Ut).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){ge(this,bt,Ut).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,n;const r=(i=N(this,at))==null?void 0:i.promise;return(n=N(this,at))==null||n.cancel(t),r?r.then(Ct).catch(Ct):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,Sr))}isActive(){return this.observers.some(t=>St(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Na(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,at))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,at))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,wt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(N(this,at)&&(N(this,lr)?N(this,at).cancel({revert:!0}):N(this,at).cancelRetry()),this.scheduleGc()),N(this,wt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,bt,Ut).call(this,{type:"invalidate"})}fetch(t,r){var f,h,s;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(N(this,at))return N(this,at).continueRetry(),N(this,at).promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(o=>o.options.queryFn);a&&this.setOptions(a.options)}const i=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(X(this,lr,!0),i.signal)})},u=()=>{const a=Ba(this.options,r),o={queryKey:this.queryKey,meta:this.meta};return n(o),X(this,lr,!1),this.options.persister?this.options.persister(a,o,this):a(o)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};n(l),(f=this.options.behavior)==null||f.onFetch(l,this),X(this,Nr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ge(this,bt,Ut).call(this,{type:"fetch",meta:(s=l.fetchOptions)==null?void 0:s.meta});const d=a=>{var o,p,y,c;wi(a)&&a.silent||ge(this,bt,Ut).call(this,{type:"error",error:a}),wi(a)||((p=(o=N(this,wt).config).onError)==null||p.call(o,a,this),(c=(y=N(this,wt).config).onSettled)==null||c.call(y,this.state.data,a,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return X(this,at,Oa({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:a=>{var o,p,y,c;if(a===void 0){d(new Error(`${this.queryHash} data is undefined`));return}this.setData(a),(p=(o=N(this,wt).config).onSuccess)==null||p.call(o,a,this),(c=(y=N(this,wt).config).onSettled)==null||c.call(y,a,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(a,o)=>{ge(this,bt,Ut).call(this,{type:"failed",failureCount:a,error:o})},onPause:()=>{ge(this,bt,Ut).call(this,{type:"pause"})},onContinue:()=>{ge(this,bt,Ut).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),N(this,at).start()}},Sr=new WeakMap,Nr=new WeakMap,wt=new WeakMap,at=new WeakMap,Xr=new WeakMap,lr=new WeakMap,bt=new WeakSet,Ut=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Ra(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return wi(n)&&n.revert&&N(this,Nr)?{...N(this,Nr),fetchStatus:"idle"}:{...i,error:n,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),tt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),N(this,wt).notify({query:this,type:"updated",action:t})})},ga);function Ra(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_a(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dl(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ot,ya,pl=(ya=class extends fn{constructor(t={}){super();ne(this,Ot,void 0);this.config=t,X(this,Ot,new Map)}build(t,r,i){const n=r.queryKey,u=r.queryHash??Gi(n,r);let l=this.get(u);return l||(l=new hl({cache:this,queryKey:n,queryHash:u,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(n)}),this.add(l)),l}add(t){N(this,Ot).has(t.queryHash)||(N(this,Ot).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=N(this,Ot).get(t.queryHash);r&&(t.destroy(),r===t&&N(this,Ot).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return N(this,Ot).get(t)}getAll(){return[...N(this,Ot).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>Fu(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>Fu(t,i)):r}notify(t){tt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){tt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){tt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ot=new WeakMap,ya),Pt,lt,cr,Rt,Gt,wa,vl=(wa=class extends Pa{constructor(t){super();ne(this,Rt);ne(this,Pt,void 0);ne(this,lt,void 0);ne(this,cr,void 0);this.mutationId=t.mutationId,X(this,lt,t.mutationCache),X(this,Pt,[]),this.state=t.state||ml(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,Pt).includes(t)||(N(this,Pt).push(t),this.clearGcTimeout(),N(this,lt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){X(this,Pt,N(this,Pt).filter(r=>r!==t)),this.scheduleGc(),N(this,lt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,Pt).length||(this.state.status==="pending"?this.scheduleGc():N(this,lt).remove(this))}continue(){var t;return((t=N(this,cr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,u,l,d,f,h,s,a,o,p,y,c,m,v,g,D,A,w,C,b;X(this,cr,Oa({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(E,S)=>{ge(this,Rt,Gt).call(this,{type:"failed",failureCount:E,error:S})},onPause:()=>{ge(this,Rt,Gt).call(this,{type:"pause"})},onContinue:()=>{ge(this,Rt,Gt).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,lt).canRun(this)}));const r=this.state.status==="pending",i=!N(this,cr).canStart();try{if(!r){ge(this,Rt,Gt).call(this,{type:"pending",variables:t,isPaused:i}),await((u=(n=N(this,lt).config).onMutate)==null?void 0:u.call(n,t,this));const S=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t));S!==this.state.context&&ge(this,Rt,Gt).call(this,{type:"pending",context:S,variables:t,isPaused:i})}const E=await N(this,cr).start();return await((h=(f=N(this,lt).config).onSuccess)==null?void 0:h.call(f,E,t,this.state.context,this)),await((a=(s=this.options).onSuccess)==null?void 0:a.call(s,E,t,this.state.context)),await((p=(o=N(this,lt).config).onSettled)==null?void 0:p.call(o,E,null,this.state.variables,this.state.context,this)),await((c=(y=this.options).onSettled)==null?void 0:c.call(y,E,null,t,this.state.context)),ge(this,Rt,Gt).call(this,{type:"success",data:E}),E}catch(E){try{throw await((v=(m=N(this,lt).config).onError)==null?void 0:v.call(m,E,t,this.state.context,this)),await((D=(g=this.options).onError)==null?void 0:D.call(g,E,t,this.state.context)),await((w=(A=N(this,lt).config).onSettled)==null?void 0:w.call(A,void 0,E,this.state.variables,this.state.context,this)),await((b=(C=this.options).onSettled)==null?void 0:b.call(C,void 0,E,t,this.state.context)),E}finally{ge(this,Rt,Gt).call(this,{type:"error",error:E})}}finally{N(this,lt).runNext(this)}}},Pt=new WeakMap,lt=new WeakMap,cr=new WeakMap,Rt=new WeakSet,Gt=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),tt.batch(()=>{N(this,Pt).forEach(i=>{i.onMutationUpdate(t)}),N(this,lt).notify({mutation:this,type:"updated",action:t})})},wa);function ml(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dt,Yr,Ca,Dl=(Ca=class extends fn{constructor(t={}){super();ne(this,Dt,void 0);ne(this,Yr,void 0);this.config=t,X(this,Dt,new Map),X(this,Yr,Date.now())}build(t,r,i){const n=new vl({mutationCache:this,mutationId:++Sn(this,Yr)._,options:t.defaultMutationOptions(r),state:i});return this.add(n),n}add(t){const r=xn(t),i=N(this,Dt).get(r)??[];i.push(t),N(this,Dt).set(r,i),this.notify({type:"added",mutation:t})}remove(t){var i;const r=xn(t);if(N(this,Dt).has(r)){const n=(i=N(this,Dt).get(r))==null?void 0:i.filter(u=>u!==t);n&&(n.length===0?N(this,Dt).delete(r):N(this,Dt).set(r,n))}this.notify({type:"removed",mutation:t})}canRun(t){var i;const r=(i=N(this,Dt).get(xn(t)))==null?void 0:i.find(n=>n.state.status==="pending");return!r||r===t}runNext(t){var i;const r=(i=N(this,Dt).get(xn(t)))==null?void 0:i.find(n=>n!==t&&n.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...N(this,Dt).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(i=>Eu(r,i))}findAll(t={}){return this.getAll().filter(r=>Eu(t,r))}notify(t){tt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return tt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ct))))}},Dt=new WeakMap,Yr=new WeakMap,Ca);function xn(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function gl(e){return{onFetch:(t,r)=>{const i=async()=>{var y,c,m,v,g;const n=t.options,u=(m=(c=(y=t.fetchOptions)==null?void 0:y.meta)==null?void 0:c.fetchMore)==null?void 0:m.direction,l=((v=t.state.data)==null?void 0:v.pages)||[],d=((g=t.state.data)==null?void 0:g.pageParams)||[],f={pages:[],pageParams:[]};let h=!1;const s=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},a=Ba(t.options,t.fetchOptions),o=async(D,A,w)=>{if(h)return Promise.reject();if(A==null&&D.pages.length)return Promise.resolve(D);const C={queryKey:t.queryKey,pageParam:A,direction:w?"backward":"forward",meta:t.options.meta};s(C);const b=await a(C),{maxPages:E}=t.options,S=w?sl:al;return{pages:S(D.pages,b,E),pageParams:S(D.pageParams,A,E)}};let p;if(u&&l.length){const D=u==="backward",A=D?yl:Nu,w={pages:l,pageParams:d},C=A(n,w);p=await o(w,C,D)}else{p=await o(f,d[0]??n.initialPageParam);const D=e??l.length;for(let A=1;A<D;A++){const w=Nu(n,p);p=await o(p,w)}}return p};t.options.persister?t.fetchFn=()=>{var n,u;return(u=(n=t.options).persister)==null?void 0:u.call(n,i,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=i}}}function Nu(e,{pages:t,pageParams:r}){const i=t.length-1;return e.getNextPageParam(t[i],t,r[i],r)}function yl(e,{pages:t,pageParams:r}){var i;return(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r)}var je,Xt,Yt,Mr,xr,er,Br,_r,Aa,wl=(Aa=class{constructor(e={}){ne(this,je,void 0);ne(this,Xt,void 0);ne(this,Yt,void 0);ne(this,Mr,void 0);ne(this,xr,void 0);ne(this,er,void 0);ne(this,Br,void 0);ne(this,_r,void 0);X(this,je,e.queryCache||new pl),X(this,Xt,e.mutationCache||new Dl),X(this,Yt,e.defaultOptions||{}),X(this,Mr,new Map),X(this,xr,new Map),X(this,er,0)}mount(){Sn(this,er)._++,N(this,er)===1&&(X(this,Br,ki.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,je).onFocus())})),X(this,_r,Pn.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,je).onOnline())})))}unmount(){var e,t;Sn(this,er)._--,N(this,er)===0&&((e=N(this,Br))==null||e.call(this),X(this,Br,void 0),(t=N(this,_r))==null||t.call(this),X(this,_r,void 0))}isFetching(e){return N(this,je).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return N(this,Xt).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,je).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),i=N(this,je).build(this,r);return e.revalidateIfStale&&i.isStaleByTime(Cr(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return N(this,je).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),n=N(this,je).get(i.queryHash),u=n==null?void 0:n.state.data,l=nl(t,u);if(l!==void 0)return N(this,je).build(this,i).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return tt.batch(()=>N(this,je).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,je).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=N(this,je);tt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=N(this,je),i={type:"active",...e};return tt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(i,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},i=tt.batch(()=>N(this,je).findAll(e).map(n=>n.cancel(r)));return Promise.all(i).then(Ct).catch(Ct)}invalidateQueries(e={},t={}){return tt.batch(()=>{if(N(this,je).findAll(e).forEach(i=>{i.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},i=tt.batch(()=>N(this,je).findAll(e).filter(n=>!n.isDisabled()).map(n=>{let u=n.fetch(void 0,r);return r.throwOnError||(u=u.catch(Ct)),n.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(Ct)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=N(this,je).build(this,t);return r.isStaleByTime(Cr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ct).catch(Ct)}fetchInfiniteQuery(e){return e.behavior=gl(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ct).catch(Ct)}resumePausedMutations(){return Pn.isOnline()?N(this,Xt).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,je)}getMutationCache(){return N(this,Xt)}getDefaultOptions(){return N(this,Yt)}setDefaultOptions(e){X(this,Yt,e)}setQueryDefaults(e,t){N(this,Mr).set(Gr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...N(this,Mr).values()];let r={};return t.forEach(i=>{kr(e,i.queryKey)&&(r={...r,...i.defaultOptions})}),r}setMutationDefaults(e,t){N(this,xr).set(Gr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...N(this,xr).values()];let r={};return t.forEach(i=>{kr(e,i.mutationKey)&&(r={...r,...i.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...N(this,Yt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Gi(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===xa&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...N(this,Yt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){N(this,je).clear(),N(this,Xt).clear()}},je=new WeakMap,Xt=new WeakMap,Yt=new WeakMap,Mr=new WeakMap,xr=new WeakMap,er=new WeakMap,Br=new WeakMap,_r=new WeakMap,Aa),dt,ye,en,ct,fr,Tr,It,tn,Or,Pr,hr,dr,tr,Rr,pr,Zr,rn,Bi,nn,_i,un,Ti,an,Oi,sn,Pi,on,Ri,ln,Ii,Wn,Ia,Fa,Cl=(Fa=class extends fn{constructor(t,r){super();ne(this,pr);ne(this,rn);ne(this,nn);ne(this,un);ne(this,an);ne(this,sn);ne(this,on);ne(this,ln);ne(this,Wn);ne(this,dt,void 0);ne(this,ye,void 0);ne(this,en,void 0);ne(this,ct,void 0);ne(this,fr,void 0);ne(this,Tr,void 0);ne(this,It,void 0);ne(this,tn,void 0);ne(this,Or,void 0);ne(this,Pr,void 0);ne(this,hr,void 0);ne(this,dr,void 0);ne(this,tr,void 0);ne(this,Rr,new Set);this.options=r,X(this,dt,t),X(this,It,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,ye).addObserver(this),Mu(N(this,ye),this.options)?ge(this,pr,Zr).call(this):this.updateResult(),ge(this,an,Oi).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zi(N(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zi(N(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,sn,Pi).call(this),ge(this,on,Ri).call(this),N(this,ye).removeObserver(this)}setOptions(t,r){const i=this.options,n=N(this,ye);if(this.options=N(this,dt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof St(this.options.enabled,N(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,ln,Ii).call(this),N(this,ye).setOptions(this.options),i._defaulted&&!Ni(this.options,i)&&N(this,dt).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,ye),observer:this});const u=this.hasListeners();u&&xu(N(this,ye),n,this.options,i)&&ge(this,pr,Zr).call(this),this.updateResult(r),u&&(N(this,ye)!==n||St(this.options.enabled,N(this,ye))!==St(i.enabled,N(this,ye))||Cr(this.options.staleTime,N(this,ye))!==Cr(i.staleTime,N(this,ye)))&&ge(this,rn,Bi).call(this);const l=ge(this,nn,_i).call(this);u&&(N(this,ye)!==n||St(this.options.enabled,N(this,ye))!==St(i.enabled,N(this,ye))||l!==N(this,tr))&&ge(this,un,Ti).call(this,l)}getOptimisticResult(t){const r=N(this,dt).getQueryCache().build(N(this,dt),t),i=this.createResult(r,t);return Fl(this,i)&&(X(this,ct,i),X(this,Tr,this.options),X(this,fr,N(this,ye).state)),i}getCurrentResult(){return N(this,ct)}trackResult(t,r){const i={};return Object.keys(t).forEach(n=>{Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),r==null||r(n),t[n])})}),i}trackProp(t){N(this,Rr).add(t)}getCurrentQuery(){return N(this,ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=N(this,dt).defaultQueryOptions(t),i=N(this,dt).getQueryCache().build(N(this,dt),r);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,r))}fetch(t){return ge(this,pr,Zr).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,ct)))}createResult(t,r){var b;const i=N(this,ye),n=this.options,u=N(this,ct),l=N(this,fr),d=N(this,Tr),h=t!==i?t.state:N(this,en),{state:s}=t;let a={...s},o=!1,p;if(r._optimisticResults){const E=this.hasListeners(),S=!E&&Mu(t,r),T=E&&xu(t,i,r,n);(S||T)&&(a={...a,...Ra(s.data,t.options)}),r._optimisticResults==="isRestoring"&&(a.fetchStatus="idle")}let{error:y,errorUpdatedAt:c,status:m}=a;if(r.select&&a.data!==void 0)if(u&&a.data===(l==null?void 0:l.data)&&r.select===N(this,tn))p=N(this,Or);else try{X(this,tn,r.select),p=r.select(a.data),p=xi(u==null?void 0:u.data,p,r),X(this,Or,p),X(this,It,null)}catch(E){X(this,It,E)}else p=a.data;if(r.placeholderData!==void 0&&p===void 0&&m==="pending"){let E;if(u!=null&&u.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData))E=u.data;else if(E=typeof r.placeholderData=="function"?r.placeholderData((b=N(this,Pr))==null?void 0:b.state.data,N(this,Pr)):r.placeholderData,r.select&&E!==void 0)try{E=r.select(E),X(this,It,null)}catch(S){X(this,It,S)}E!==void 0&&(m="success",p=xi(u==null?void 0:u.data,E,r),o=!0)}N(this,It)&&(y=N(this,It),p=N(this,Or),c=Date.now(),m="error");const v=a.fetchStatus==="fetching",g=m==="pending",D=m==="error",A=g&&v,w=p!==void 0;return{status:m,fetchStatus:a.fetchStatus,isPending:g,isSuccess:m==="success",isError:D,isInitialLoading:A,isLoading:A,data:p,dataUpdatedAt:a.dataUpdatedAt,error:y,errorUpdatedAt:c,failureCount:a.fetchFailureCount,failureReason:a.fetchFailureReason,errorUpdateCount:a.errorUpdateCount,isFetched:a.dataUpdateCount>0||a.errorUpdateCount>0,isFetchedAfterMount:a.dataUpdateCount>h.dataUpdateCount||a.errorUpdateCount>h.errorUpdateCount,isFetching:v,isRefetching:v&&!g,isLoadingError:D&&!w,isPaused:a.fetchStatus==="paused",isPlaceholderData:o,isRefetchError:D&&w,isStale:Ki(t,r),refetch:this.refetch}}updateResult(t){const r=N(this,ct),i=this.createResult(N(this,ye),this.options);if(X(this,fr,N(this,ye).state),X(this,Tr,this.options),N(this,fr).data!==void 0&&X(this,Pr,N(this,ye)),Ni(i,r))return;X(this,ct,i);const n={},u=()=>{if(!r)return!0;const{notifyOnChangeProps:l}=this.options,d=typeof l=="function"?l():l;if(d==="all"||!d&&!N(this,Rr).size)return!0;const f=new Set(d??N(this,Rr));return this.options.throwOnError&&f.add("error"),Object.keys(N(this,ct)).some(h=>{const s=h;return N(this,ct)[s]!==r[s]&&f.has(s)})};(t==null?void 0:t.listeners)!==!1&&u()&&(n.listeners=!0),ge(this,Wn,Ia).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,an,Oi).call(this)}},dt=new WeakMap,ye=new WeakMap,en=new WeakMap,ct=new WeakMap,fr=new WeakMap,Tr=new WeakMap,It=new WeakMap,tn=new WeakMap,Or=new WeakMap,Pr=new WeakMap,hr=new WeakMap,dr=new WeakMap,tr=new WeakMap,Rr=new WeakMap,pr=new WeakSet,Zr=function(t){ge(this,ln,Ii).call(this);let r=N(this,ye).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ct)),r},rn=new WeakSet,Bi=function(){ge(this,sn,Pi).call(this);const t=Cr(this.options.staleTime,N(this,ye));if(Ir||N(this,ct).isStale||!Si(t))return;const i=Na(N(this,ct).dataUpdatedAt,t)+1;X(this,hr,setTimeout(()=>{N(this,ct).isStale||this.updateResult()},i))},nn=new WeakSet,_i=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,ye)):this.options.refetchInterval)??!1},un=new WeakSet,Ti=function(t){ge(this,on,Ri).call(this),X(this,tr,t),!(Ir||St(this.options.enabled,N(this,ye))===!1||!Si(N(this,tr))||N(this,tr)===0)&&X(this,dr,setInterval(()=>{(this.options.refetchIntervalInBackground||ki.isFocused())&&ge(this,pr,Zr).call(this)},N(this,tr)))},an=new WeakSet,Oi=function(){ge(this,rn,Bi).call(this),ge(this,un,Ti).call(this,ge(this,nn,_i).call(this))},sn=new WeakSet,Pi=function(){N(this,hr)&&(clearTimeout(N(this,hr)),X(this,hr,void 0))},on=new WeakSet,Ri=function(){N(this,dr)&&(clearInterval(N(this,dr)),X(this,dr,void 0))},ln=new WeakSet,Ii=function(){const t=N(this,dt).getQueryCache().build(N(this,dt),this.options);if(t===N(this,ye))return;const r=N(this,ye);X(this,ye,t),X(this,en,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Wn=new WeakSet,Ia=function(t){tt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(N(this,ct))}),N(this,dt).getQueryCache().notify({query:N(this,ye),type:"observerResultsUpdated"})})},Fa);function Al(e,t){return St(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Mu(e,t){return Al(e,t)||e.state.data!==void 0&&zi(e,t,t.refetchOnMount)}function zi(e,t,r){if(St(t.enabled,e)!==!1){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Ki(e,t)}return!1}function xu(e,t,r,i){return(e!==t||St(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ki(e,r)}function Ki(e,t){return St(t.enabled,e)!==!1&&e.isStaleByTime(Cr(t.staleTime,e))}function Fl(e,t){return!Ni(e.getCurrentResult(),t)}var za=G.createContext(void 0),El=e=>{const t=G.useContext(za);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},bl=({client:e,children:t})=>(G.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),$.jsx(za.Provider,{value:e,children:t})),qa=G.createContext(!1),Sl=()=>G.useContext(qa);qa.Provider;function Nl(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ml=G.createContext(Nl()),xl=()=>G.useContext(Ml);function Bl(e,t){return typeof e=="function"?e(...t):!!e}var _l=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Tl=e=>{G.useEffect(()=>{e.clearReset()},[e])},Ol=({result:e,errorResetBoundary:t,throwOnError:r,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&Bl(r,[e.error,i]),Pl=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},Rl=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Il=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function zl(e,t,r){var h,s,a,o;const i=El(r),n=Sl(),u=xl(),l=i.defaultQueryOptions(e);(s=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||s.call(h,l),l._optimisticResults=n?"isRestoring":"optimistic",Pl(l),_l(l,u),Tl(u);const[d]=G.useState(()=>new t(i,l)),f=d.getOptimisticResult(l);if(G.useSyncExternalStore(G.useCallback(p=>{const y=n?()=>{}:d.subscribe(tt.batchCalls(p));return d.updateResult(),y},[d,n]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),G.useEffect(()=>{d.setOptions(l,{listeners:!1})},[l,d]),Rl(l,f))throw Il(l,d,u);if(Ol({result:f,errorResetBoundary:u,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash)}))throw f.error;return(o=(a=i.getDefaultOptions().queries)==null?void 0:a._experimental_afterQuery)==null||o.call(a,l,f),l.notifyOnChangeProps?f:d.trackResult(f)}function ql(e,t){return zl(e,Cl,t)}const Ll=({appId:e,lookupColumn:t,cell:r,metaData:i,highlight:n})=>{te.debug(e,t,r,i);const u=Zi(),[l,d]=G.useState(r.getValue());return G.useEffect(()=>{if(te.debug(e,t,r),t.lookup!==void 0){const f=Qs(rr.getState(),e,t.columnName,r.getValue());if(te.debug(f),f!==void 0&&f.length>0)Array.isArray(f)?d(f.join(t.lookup.delimiter)):d(f);else{const h={};h[t.lookup.key]=r.getValue(),te.debug(h),ba(e,"table",t.columnName,t.lookup.key,t.lookup.value,h,s=>{if(te.debug(s.data),t.lookup!==void 0&&Array.isArray(s.data)&&s.data.length>0){let a="";if(!t.lookup.value.includes(","))a=s.data[0].value,d(a.toString());else{const o=t.lookup.value.split(",");d(o.map(p=>s.data[0][p]).join(t.lookup.delimiter)),a=o.map(p=>s.data[0][p])}u(Hs({appId:e,columnName:t.columnName,lookupValue:{key:s.data[0].key,value:a}}))}},s=>{te.error(s)})}}else d("")},[e,r,u,t]),$.jsx($.Fragment,{children:n(l,t.columnName)})};var Ul=function(e){return e instanceof RegExp},$l=function(t){var r=/[\\^$.*+?()[\]{}|]/g,i=RegExp(r.source);return t&&i.test(t)?t.replace(r,"\\$&"):t},La=function(e){return typeof e=="string"},Vl=function(e){var t=[];return e.forEach(function(r){Array.isArray(r)?t=t.concat(r):t.push(r)}),t};function jl(e,t,r){var i=0,n=0;if(e==="")return e;if(!e||!La(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var u=t;Ul(u)||(u=new RegExp("("+$l(u)+")","gi"));for(var l=e.split(u),d=1,f=l.length;d<f;d+=2){if(l[d]===void 0||l[d-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}n=l[d].length,i+=l[d-1].length,l[d]=r(l[d],d,i),i+=n}return l}var Ql=function(t,r,i){return Array.isArray(t)||(t=[t]),Vl(t.map(function(n){return La(n)?jl(n,r,i):n}))};const Hl=Wi(Ql);var Ua={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Ie(e){return typeof e=="number"}function Je(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function $a(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Va(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function ja(e){return e&&e.constructor.prototype.isUnit===!0||!1}function zt(e){return typeof e=="string"}var Ue=Array.isArray;function ze(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function zr(e){return Array.isArray(e)||ze(e)}function Wl(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Zl(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Gl(e){return e&&e.constructor.prototype.isRange===!0||!1}function Ji(e){return e&&e.constructor.prototype.isIndex===!0||!1}function kl(e){return typeof e=="boolean"}function Kl(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Jl(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Xl(e){return typeof e=="function"}function Yl(e){return e instanceof Date}function ec(e){return e instanceof RegExp}function Qa(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!$a(e)&&!Va(e))}function tc(e){return e===null}function rc(e){return e===void 0}function nc(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function ic(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function uc(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function ac(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function sc(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function oc(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function lc(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function cc(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function fc(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function hc(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function dc(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function pc(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function vc(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function mc(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Dc(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function gc(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function yc(e){return e&&e.constructor.prototype.isChain===!0||!1}function Mt(e){var t=typeof e;return t==="object"?e===null?"null":Je(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Qe(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return Qe(r)});if(e instanceof Date)return new Date(e.valueOf());if(Je(e))return e;if(Qa(e))return wc(e,Qe);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function wc(e,t){var r={};for(var i in e)Kr(e,i)&&(r[i]=t(e[i]));return r}function Ha(e,t){for(var r in t)Kr(t,r)&&(e[r]=t[r]);return e}function qr(e,t){var r,i,n;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;i++)if(!qr(e[i],t[i]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!qr(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Kr(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Cc(e,t){for(var r={},i=0;i<t.length;i++){var n=t[i],u=e[n];u!==void 0&&(r[n]=u)}return r}var Ac=["Matrix","Array"],Fc=["number","BigNumber","Fraction"],At=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Ua)};Sa(At,Ua,{MATRIX_OPTIONS:Ac,NUMBER_OPTIONS:Fc});function Bu(){return!0}function yt(){return!1}function gr(){}const _u="Argument is not a typed-function.";function Wa(){function e(F){return typeof F=="object"&&F!==null&&F.constructor===Object}const t=[{name:"number",test:function(F){return typeof F=="number"}},{name:"string",test:function(F){return typeof F=="string"}},{name:"boolean",test:function(F){return typeof F=="boolean"}},{name:"Function",test:function(F){return typeof F=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(F){return F instanceof Date}},{name:"RegExp",test:function(F){return F instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(F){return F===null}},{name:"undefined",test:function(F){return F===void 0}}],r={name:"any",test:Bu,isAny:!0};let i,n,u=0,l={createCount:0};function d(F){const M=i.get(F);if(M)return M;let _='Unknown type "'+F+'"';const I=F.toLowerCase();let U;for(U of n)if(U.toLowerCase()===I){_+='. Did you mean "'+U+'" ?';break}throw new TypeError(_)}function f(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const _=M?d(M).index:n.length,I=[];for(let z=0;z<F.length;++z){if(!F[z]||typeof F[z].name!="string"||typeof F[z].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const W=F[z].name;if(i.has(W))throw new TypeError('Duplicate type name "'+W+'"');I.push(W),i.set(W,{name:W,test:F[z].test,isAny:F[z].isAny,index:_+z,conversionsTo:[]})}const U=n.slice(_);n=n.slice(0,_).concat(I).concat(U);for(let z=_+I.length;z<n.length;++z)i.get(n[z]).index=z}function h(){i=new Map,n=[],u=0,f([r],!1)}h(),f(t);function s(){let F;for(F of n)i.get(F).conversionsTo=[];u=0}function a(F){const M=n.filter(_=>{const I=i.get(_);return!I.isAny&&I.test(F)});return M.length?M:["any"]}function o(F){return F&&typeof F=="function"&&"_typedFunctionData"in F}function p(F,M,_){if(!o(F))throw new TypeError(_u);const I=_&&_.exact,U=Array.isArray(M)?M.join(","):M,z=A(U),W=m(z);if(!I||W in F.signatures){const Fe=F._typedFunctionData.signatureMap.get(W);if(Fe)return Fe}const Q=z.length;let Z;if(I){Z=[];let Fe;for(Fe in F.signatures)Z.push(F._typedFunctionData.signatureMap.get(Fe))}else Z=F._typedFunctionData.signatures;for(let Fe=0;Fe<Q;++Fe){const Ee=z[Fe],Le=[];let Ke;for(Ke of Z){const Xe=E(Ke.params,Fe);if(!(!Xe||Ee.restParam&&!Xe.restParam)){if(!Xe.hasAny){const vt=D(Xe);if(Ee.types.some(it=>!vt.has(it.name)))continue}Le.push(Ke)}}if(Z=Le,Z.length===0)break}let j;for(j of Z)if(j.params.length<=Q)return j;throw new TypeError("Signature not found (signature: "+(F.name||"unnamed")+"("+m(z,", ")+"))")}function y(F,M,_){return p(F,M,_).implementation}function c(F,M){const _=d(M);if(_.test(F))return F;const I=_.conversionsTo;if(I.length===0)throw new Error("There are no conversions to "+M+" defined.");for(let U=0;U<I.length;U++)if(d(I[U].from).test(F))return I[U].convert(F);throw new Error("Cannot convert "+F+" to "+M)}function m(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return F.map(_=>_.name).join(M)}function v(F){const M=F.indexOf("...")===0,I=(M?F.length>3?F.slice(3):"any":F).split("|").map(Q=>d(Q.trim()));let U=!1,z=M?"...":"";return{types:I.map(function(Q){return U=Q.isAny||U,z+=Q.name+"|",{name:Q.name,typeIndex:Q.index,test:Q.test,isAny:Q.isAny,conversion:null,conversionIndex:-1}}),name:z.slice(0,-1),hasAny:U,hasConversion:!1,restParam:M}}function g(F){const M=F.types.map(W=>W.name),_=Y(M);let I=F.hasAny,U=F.name;const z=_.map(function(W){const Q=d(W.from);return I=Q.isAny||I,U+="|"+W.from,{name:W.from,typeIndex:Q.index,test:Q.test,isAny:Q.isAny,conversion:W,conversionIndex:W.index}});return{types:F.types.concat(z),name:U,hasAny:I,hasConversion:z.length>0,restParam:F.restParam}}function D(F){return F.typeSet||(F.typeSet=new Set,F.types.forEach(M=>F.typeSet.add(M.name))),F.typeSet}function A(F){const M=[];if(typeof F!="string")throw new TypeError("Signatures must be strings");const _=F.trim();if(_==="")return M;const I=_.split(",");for(let U=0;U<I.length;++U){const z=v(I[U].trim());if(z.restParam&&U!==I.length-1)throw new SyntaxError('Unexpected rest parameter "'+I[U]+'": only allowed for the last parameter');if(z.types.length===0)return null;M.push(z)}return M}function w(F){const M=Ce(F);return M?M.restParam:!1}function C(F){if(!F||F.types.length===0)return Bu;if(F.types.length===1)return d(F.types[0].name).test;if(F.types.length===2){const M=d(F.types[0].name).test,_=d(F.types[1].name).test;return function(U){return M(U)||_(U)}}else{const M=F.types.map(function(_){return d(_.name).test});return function(I){for(let U=0;U<M.length;U++)if(M[U](I))return!0;return!1}}}function b(F){let M,_,I;if(w(F)){M=Ze(F).map(C);const U=M.length,z=C(Ce(F)),W=function(Q){for(let Z=U;Z<Q.length;Z++)if(!z(Q[Z]))return!1;return!0};return function(Z){for(let j=0;j<M.length;j++)if(!M[j](Z[j]))return!1;return W(Z)&&Z.length>=U+1}}else return F.length===0?function(z){return z.length===0}:F.length===1?(_=C(F[0]),function(z){return _(z[0])&&z.length===1}):F.length===2?(_=C(F[0]),I=C(F[1]),function(z){return _(z[0])&&I(z[1])&&z.length===2}):(M=F.map(C),function(z){for(let W=0;W<M.length;W++)if(!M[W](z[W]))return!1;return z.length===M.length})}function E(F,M){return M<F.length?F[M]:w(F)?Ce(F):null}function S(F,M){const _=E(F,M);return _?D(_):new Set}function T(F){return F.conversion===null||F.conversion===void 0}function x(F,M){const _=new Set;return F.forEach(I=>{const U=S(I.params,M);let z;for(z of U)_.add(z)}),_.has("any")?["any"]:Array.from(_)}function P(F,M,_){let I,U;const z=F||"unnamed";let W=_,Q;for(Q=0;Q<M.length;Q++){const Ee=[];if(W.forEach(Le=>{const Ke=E(Le.params,Q),Xe=C(Ke);(Q<Le.params.length||w(Le.params))&&Xe(M[Q])&&Ee.push(Le)}),Ee.length===0){if(U=x(W,Q),U.length>0){const Le=a(M[Q]);return I=new TypeError("Unexpected type of argument in function "+z+" (expected: "+U.join(" or ")+", actual: "+Le.join(" | ")+", index: "+Q+")"),I.data={category:"wrongType",fn:z,index:Q,actual:Le,expected:U},I}}else W=Ee}const Z=W.map(function(Ee){return w(Ee.params)?1/0:Ee.params.length});if(M.length<Math.min.apply(null,Z))return U=x(W,Q),I=new TypeError("Too few arguments in function "+z+" (expected: "+U.join(" or ")+", index: "+M.length+")"),I.data={category:"tooFewArgs",fn:z,index:M.length,expected:U},I;const j=Math.max.apply(null,Z);if(M.length>j)return I=new TypeError("Too many arguments in function "+z+" (expected: "+j+", actual: "+M.length+")"),I.data={category:"tooManyArgs",fn:z,index:M.length,expectedLength:j},I;const Fe=[];for(let Ee=0;Ee<M.length;++Ee)Fe.push(a(M[Ee]).join("|"));return I=new TypeError('Arguments of type "'+Fe.join(", ")+'" do not match any of the defined signatures of function '+z+"."),I.data={category:"mismatch",actual:Fe},I}function H(F){let M=n.length+1;for(let _=0;_<F.types.length;_++)T(F.types[_])&&(M=Math.min(M,F.types[_].typeIndex));return M}function B(F){let M=u+1;for(let _=0;_<F.types.length;_++)T(F.types[_])||(M=Math.min(M,F.types[_].conversionIndex));return M}function R(F,M){if(F.hasAny){if(!M.hasAny)return 1}else if(M.hasAny)return-1;if(F.restParam){if(!M.restParam)return 1}else if(M.restParam)return-1;if(F.hasConversion){if(!M.hasConversion)return 1}else if(M.hasConversion)return-1;const _=H(F)-H(M);if(_<0)return-1;if(_>0)return 1;const I=B(F)-B(M);return I<0?-1:I>0?1:0}function O(F,M){const _=F.params,I=M.params,U=Ce(_),z=Ce(I),W=w(_),Q=w(I);if(W&&U.hasAny){if(!Q||!z.hasAny)return 1}else if(Q&&z.hasAny)return-1;let Z=0,j=0,Fe;for(Fe of _)Fe.hasAny&&++Z,Fe.hasConversion&&++j;let Ee=0,Le=0;for(Fe of I)Fe.hasAny&&++Ee,Fe.hasConversion&&++Le;if(Z!==Ee)return Z-Ee;if(W&&U.hasConversion){if(!Q||!z.hasConversion)return 1}else if(Q&&z.hasConversion)return-1;if(j!==Le)return j-Le;if(W){if(!Q)return 1}else if(Q)return-1;const Ke=(_.length-I.length)*(W?-1:1);if(Ke!==0)return Ke;const Xe=[];let vt=0;for(let Wt=0;Wt<_.length;++Wt){const Re=R(_[Wt],I[Wt]);Xe.push(Re),vt+=Re}if(vt!==0)return vt;let it;for(it of Xe)if(it!==0)return it;return 0}function Y(F){if(F.length===0)return[];const M=F.map(d);F.length>1&&M.sort((U,z)=>U.index-z.index);let _=M[0].conversionsTo;if(F.length===1)return _;_=_.concat([]);const I=new Set(F);for(let U=1;U<M.length;++U){let z;for(z of M[U].conversionsTo)I.has(z.from)||(_.push(z),I.add(z.from))}return _}function k(F,M){let _=M;if(F.some(U=>U.hasConversion)){const U=w(F),z=F.map(K);_=function(){const Q=[],Z=U?arguments.length-1:arguments.length;for(let j=0;j<Z;j++)Q[j]=z[j](arguments[j]);return U&&(Q[Z]=arguments[Z].map(z[Z])),M.apply(this,Q)}}let I=_;if(w(F)){const U=F.length-1;I=function(){return _.apply(this,ve(arguments,0,U).concat([ve(arguments,U)]))}}return I}function K(F){let M,_,I,U;const z=[],W=[];switch(F.types.forEach(function(Q){Q.conversion&&(z.push(d(Q.conversion.from).test),W.push(Q.conversion.convert))}),W.length){case 0:return function(Z){return Z};case 1:return M=z[0],I=W[0],function(Z){return M(Z)?I(Z):Z};case 2:return M=z[0],_=z[1],I=W[0],U=W[1],function(Z){return M(Z)?I(Z):_(Z)?U(Z):Z};default:return function(Z){for(let j=0;j<W.length;j++)if(z[j](Z))return W[j](Z);return Z}}}function ue(F){function M(_,I,U){if(I<_.length){const z=_[I];let W=[];if(z.restParam){const Q=z.types.filter(T);Q.length<z.types.length&&W.push({types:Q,name:"..."+Q.map(Z=>Z.name).join("|"),hasAny:Q.some(Z=>Z.isAny),hasConversion:!1,restParam:!0}),W.push(z)}else W=z.types.map(function(Q){return{types:[Q],name:Q.name,hasAny:Q.isAny,hasConversion:Q.conversion,restParam:!1}});return He(W,function(Q){return M(_,I+1,U.concat([Q]))})}else return[U]}return M(F,0,[])}function de(F,M){const _=Math.max(F.length,M.length);for(let Q=0;Q<_;Q++){const Z=S(F,Q),j=S(M,Q);let Fe=!1,Ee;for(Ee of j)if(Z.has(Ee)){Fe=!0;break}if(!Fe)return!1}const I=F.length,U=M.length,z=w(F),W=w(M);return z?W?I===U:U>=I:W?I>=U:I===U}function pe(F){return F.map(M=>Et(M)?ht(M.referToSelf.callback):nt(M)?Ve(M.referTo.references,M.referTo.callback):M)}function ce(F,M,_){const I=[];let U;for(U of F){let z=_[U];if(typeof z!="number")throw new TypeError('No definition for referenced signature "'+U+'"');if(z=M[z],typeof z!="function")return!1;I.push(z)}return I}function qe(F,M,_){const I=pe(F),U=new Array(I.length).fill(!1);let z=!0;for(;z;){z=!1;let W=!0;for(let Q=0;Q<I.length;++Q){if(U[Q])continue;const Z=I[Q];if(Et(Z))I[Q]=Z.referToSelf.callback(_),I[Q].referToSelf=Z.referToSelf,U[Q]=!0,W=!1;else if(nt(Z)){const j=ce(Z.referTo.references,I,M);j?(I[Q]=Z.referTo.callback.apply(this,j),I[Q].referTo=Z.referTo,U[Q]=!0,W=!1):z=!0}}if(W&&z)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return I}function Te(F){const M=/\bthis(\(|\.signatures\b)/;Object.keys(F).forEach(_=>{const I=F[_];if(M.test(I.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Pe(F,M){if(l.createCount++,Object.keys(M).length===0)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&Te(M);const _=[],I=[],U={},z=[];let W;for(W in M){if(!Object.prototype.hasOwnProperty.call(M,W))continue;const De=A(W);if(!De)continue;_.forEach(function(Hr){if(de(Hr,De))throw new TypeError('Conflicting signatures "'+m(Hr)+'" and "'+m(De)+'".')}),_.push(De);const ut=I.length;I.push(M[W]);const Vs=De.map(g);let bn;for(bn of ue(Vs)){const Hr=m(bn);z.push({params:bn,name:Hr,fn:ut}),bn.every(js=>!js.hasConversion)&&(U[Hr]=ut)}}z.sort(O);const Q=qe(I,U,Oe);let Z;for(Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(U[Z]=Q[U[Z]]);const j=[],Fe=new Map;for(Z of z)Fe.has(Z.name)||(Z.fn=Q[Z.fn],j.push(Z),Fe.set(Z.name,Z));const Ee=j[0]&&j[0].params.length<=2&&!w(j[0].params),Le=j[1]&&j[1].params.length<=2&&!w(j[1].params),Ke=j[2]&&j[2].params.length<=2&&!w(j[2].params),Xe=j[3]&&j[3].params.length<=2&&!w(j[3].params),vt=j[4]&&j[4].params.length<=2&&!w(j[4].params),it=j[5]&&j[5].params.length<=2&&!w(j[5].params),Wt=Ee&&Le&&Ke&&Xe&&vt&&it;for(let De=0;De<j.length;++De)j[De].test=b(j[De].params);const Re=Ee?C(j[0].params[0]):yt,pn=Le?C(j[1].params[0]):yt,Qr=Ke?C(j[2].params[0]):yt,oi=Xe?C(j[3].params[0]):yt,li=vt?C(j[4].params[0]):yt,vn=it?C(j[5].params[0]):yt,mn=Ee?C(j[0].params[1]):yt,Dn=Le?C(j[1].params[1]):yt,gn=Ke?C(j[2].params[1]):yt,yn=Xe?C(j[3].params[1]):yt,wn=vt?C(j[4].params[1]):yt,Cn=it?C(j[5].params[1]):yt;for(let De=0;De<j.length;++De)j[De].implementation=k(j[De].params,j[De].fn);const An=Ee?j[0].implementation:gr,Fn=Le?j[1].implementation:gr,En=Ke?j[2].implementation:gr,q=Xe?j[3].implementation:gr,ee=vt?j[4].implementation:gr,V=it?j[5].implementation:gr,se=Ee?j[0].params.length:-1,Ne=Le?j[1].params.length:-1,we=Ke?j[2].params.length:-1,xe=Xe?j[3].params.length:-1,Be=vt?j[4].params.length:-1,ae=it?j[5].params.length:-1,Me=Wt?6:0,Ae=j.length,fe=j.map(De=>De.test),he=j.map(De=>De.implementation),Ye=function(){for(let ut=Me;ut<Ae;ut++)if(fe[ut](arguments))return he[ut].apply(this,arguments);return l.onMismatch(F,arguments,j)};function Oe(De,ut){return arguments.length===se&&Re(De)&&mn(ut)?An.apply(this,arguments):arguments.length===Ne&&pn(De)&&Dn(ut)?Fn.apply(this,arguments):arguments.length===we&&Qr(De)&&gn(ut)?En.apply(this,arguments):arguments.length===xe&&oi(De)&&yn(ut)?q.apply(this,arguments):arguments.length===Be&&li(De)&&wn(ut)?ee.apply(this,arguments):arguments.length===ae&&vn(De)&&Cn(ut)?V.apply(this,arguments):Ye.apply(this,arguments)}try{Object.defineProperty(Oe,"name",{value:F})}catch{}return Oe.signatures=U,Oe._typedFunctionData={signatures:j,signatureMap:Fe},Oe}function Se(F,M,_){throw P(F,M,_)}function Ze(F){return ve(F,0,F.length-1)}function Ce(F){return F[F.length-1]}function ve(F,M,_){return Array.prototype.slice.call(F,M,_)}function ot(F,M){for(let _=0;_<F.length;_++)if(M(F[_]))return F[_]}function He(F,M){return Array.prototype.concat.apply([],F.map(M))}function me(){const F=Ze(arguments).map(_=>m(A(_))),M=Ce(arguments);if(typeof M!="function")throw new TypeError("Callback function expected as last argument");return Ve(F,M)}function Ve(F,M){return{referTo:{references:F,callback:M}}}function ht(F){if(typeof F!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:F}}}function nt(F){return F&&typeof F.referTo=="object"&&Array.isArray(F.referTo.references)&&typeof F.referTo.callback=="function"}function Et(F){return F&&typeof F.referToSelf=="object"&&typeof F.referToSelf.callback=="function"}function Qt(F,M){if(!F)return M;if(M&&M!==F){const _=new Error("Function names do not match (expected: "+F+", actual: "+M+")");throw _.data={actual:M,expected:F},_}return F}function Ht(F){let M;for(const _ in F)Object.prototype.hasOwnProperty.call(F,_)&&(o(F[_])||typeof F[_].signature=="string")&&(M=Qt(M,F[_].name));return M}function Dr(F,M){let _;for(_ in M)if(Object.prototype.hasOwnProperty.call(M,_)){if(_ in F&&M[_]!==F[_]){const I=new Error('Signature "'+_+'" is defined twice');throw I.data={signature:_,sourceFunction:M[_],destFunction:F[_]},I}F[_]=M[_]}}const si=l;l=function(F){const M=typeof F=="string",_=M?1:0;let I=M?F:"";const U={};for(let z=_;z<arguments.length;++z){const W=arguments[z];let Q={},Z;if(typeof W=="function"?(Z=W.name,typeof W.signature=="string"?Q[W.signature]=W:o(W)&&(Q=W.signatures)):e(W)&&(Q=W,M||(Z=Ht(W))),Object.keys(Q).length===0){const j=new TypeError("Argument to 'typed' at index "+z+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw j.data={index:z,argument:W},j}M||(I=Qt(I,Z)),Dr(U,Q)}return Pe(I||"",U)},l.create=Wa,l.createCount=si.createCount,l.onMismatch=Se,l.throwMismatchError=Se,l.createError=P,l.clear=h,l.clearConversions=s,l.addTypes=f,l._findType=d,l.referTo=me,l.referToSelf=ht,l.convert=c,l.findSignature=p,l.find=y,l.isTypedFunction=o,l.warnAgainstDeprecatedThis=!0,l.addType=function(F,M){let _="any";M!==!1&&i.has("Object")&&(_="Object"),l.addTypes([F],_)};function jr(F){if(!F||typeof F.from!="string"||typeof F.to!="string"||typeof F.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(F.to===F.from)throw new SyntaxError('Illegal to define conversion from "'+F.from+'" to itself.')}return l.addConversion=function(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};jr(F);const _=d(F.to),I=_.conversionsTo.find(U=>U.from===F.from);if(I)if(M&&M.override)l.removeConversion({from:I.from,to:F.to,convert:I.convert});else throw new Error('There is already a conversion from "'+F.from+'" to "'+_.name+'"');_.conversionsTo.push({from:F.from,convert:F.convert,index:u++})},l.addConversions=function(F,M){F.forEach(_=>l.addConversion(_,M))},l.removeConversion=function(F){jr(F);const M=d(F.to),_=ot(M.conversionsTo,U=>U.from===F.from);if(!_)throw new Error("Attempt to remove nonexistent conversion from "+F.from+" to "+F.to);if(_.convert!==F.convert)throw new Error("Conversion to remove does not match existing conversion");const I=M.conversionsTo.indexOf(_);M.conversionsTo.splice(I,1)},l.resolve=function(F,M){if(!o(F))throw new TypeError(_u);const _=F._typedFunctionData.signatures;for(let I=0;I<_.length;++I)if(_[I].test(M))return _[I];return null},l}const yr=Wa();function We(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function Ci(e,t,r){var i={2:"0b",8:"0o",16:"0x"},n=i[t],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!We(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!We(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),u="i".concat(r)}var l="";return e<0&&(e=-e,l="-"),"".concat(l).concat(n).concat(e.toString(t)).concat(u)}function qi(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",i,n;if(t&&(t.notation&&(r=t.notation),Ie(t)?i=t:Ie(t.precision)&&(i=t.precision),t.wordSize&&(n=t.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return bc(e,i);case"exponential":return Za(e,i);case"engineering":return Ec(e,i);case"bin":return Ci(e,2,n);case"oct":return Ci(e,8,n);case"hex":return Ci(e,16,n);case"auto":return Sc(e,i,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],l=arguments[4];return u!=="."?u+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Zn(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],i=t[2],n=parseFloat(t[4]||"0"),u=i.indexOf(".");n+=u!==-1?u-1:i.length-1;var l=i.replace(".","").replace(/^0*/,function(d){return n-=d.length,""}).replace(/0*$/,"").split("").map(function(d){return parseInt(d)});return l.length===0&&(l.push(0),n++),{sign:r,coefficients:l,exponent:n}}function Ec(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Zn(e),i=Gn(r,t),n=i.exponent,u=i.coefficients,l=n%3===0?n:n<0?n-3-n%3:n-n%3;if(Ie(t))for(;t>u.length||n-l+1>u.length;)u.push(0);else for(var d=Math.abs(n-l)-(u.length-1),f=0;f<d;f++)u.push(0);for(var h=Math.abs(n-l),s=1;h>0;)s++,h--;var a=u.slice(s).join(""),o=Ie(t)&&a.length||a.match(/[1-9]/)?"."+a:"",p=u.slice(0,s).join("")+o+"e"+(n>=0?"+":"")+l.toString();return i.sign+p}function bc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Zn(e),i=typeof t=="number"?Gn(r,r.exponent+1+t):r,n=i.coefficients,u=i.exponent+1,l=u+(t||0);return n.length<l&&(n=n.concat(Ar(l-n.length))),u<0&&(n=Ar(-u+1).concat(n),u=1),u<n.length&&n.splice(u,0,u===0?"0.":"."),i.sign+n.join("")}function Za(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Zn(e),i=t?Gn(r,t):r,n=i.coefficients,u=i.exponent;n.length<t&&(n=n.concat(Ar(t-n.length)));var l=n.shift();return i.sign+l+(n.length>0?"."+n.join(""):"")+"e"+(u>=0?"+":"")+u}function Sc(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var i=r&&r.lowerExp!==void 0?r.lowerExp:-3,n=r&&r.upperExp!==void 0?r.upperExp:5,u=Zn(e),l=t?Gn(u,t):u;if(l.exponent<i||l.exponent>=n)return Za(e,t);var d=l.coefficients,f=l.exponent;d.length<t&&(d=d.concat(Ar(t-d.length))),d=d.concat(Ar(f-d.length+1+(d.length<t?t-d.length:0))),d=Ar(-f).concat(d);var h=f>0?f:0;return h<d.length-1&&d.splice(h+1,0,"."),l.sign+d.join("")}function Gn(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=r.coefficients;t<=0;)i.unshift(0),r.exponent++,t++;if(i.length>t){var n=i.splice(t,i.length-t);if(n[0]>=5){var u=t-1;for(i[u]++;i[u]===10;)i.pop(),u===0&&(i.unshift(0),r.exponent++,u++),u--,i[u]++}}return r}function Ar(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Nc(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Mc=Number.EPSILON||2220446049250313e-31;function mr(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var i=Math.abs(e-t);return i<Mc?!0:i<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}function Ai(e,t,r){var i=e.constructor,n=new i(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!We(r))throw new Error("size must be an integer");if(e.greaterThan(n.pow(r-1).sub(1))||e.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(r))),u="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(u);case 8:return"".concat(e.toOctal()).concat(u);case 16:return"".concat(e.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(t," not supported "))}}function xc(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",i,n;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?i=t:t.precision!==void 0&&(i=t.precision),t.wordSize&&(n=t.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return _c(e,i);case"exponential":return Tu(e,i);case"engineering":return Bc(e,i);case"bin":return Ai(e,2,n);case"oct":return Ai(e,8,n);case"hex":return Ai(e,16,n);case"auto":{var u=t&&t.lowerExp!==void 0?t.lowerExp:-3,l=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var d,f=e.toSignificantDigits(i),h=f.e;return h>=u&&h<l?d=f.toFixed():d=Tu(e,i),d.replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Bc(e,t){var r=e.e,i=r%3===0?r:r<0?r-3-r%3:r-r%3,n=e.mul(Math.pow(10,-i)),u=n.toPrecision(t);if(u.indexOf("e")!==-1){var l=e.constructor;u=new l(u).toFixed()}return u+"e"+(r>=0?"+":"")+i.toString()}function Tu(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function _c(e,t){return e.toFixed(t)}function Ge(e,t){var r=Tc(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function Tc(e,t){if(typeof e=="number")return qi(e,t);if(Je(e))return xc(e,t);if(Oc(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return Ga(e,t);if(zt(e))return Ou(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(i=>Ou(i)+": "+Ge(e[i],t));return"{"+r.join(", ")+"}"}return String(e)}function Ou(e){for(var t=String(e),r="",i=0;i<t.length;){var n=t.charAt(i);r+=n in Pu?Pu[n]:n,i++}return'"'+r+'"'}var Pu={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ga(e,t){if(Array.isArray(e)){for(var r="[",i=e.length,n=0;n<i;n++)n!==0&&(r+=", "),r+=Ga(e[n],t);return r+="]",r}else return Ge(e,t)}function Oc(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function be(e,t,r){if(!(this instanceof be))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}be.prototype=new RangeError;be.prototype.constructor=RangeError;be.prototype.name="DimensionError";be.prototype.isDimensionError=!0;function jt(e,t,r){if(!(this instanceof jt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}jt.prototype=new RangeError;jt.prototype.constructor=RangeError;jt.prototype.name="IndexError";jt.prototype.isIndexError=!0;function ft(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function ka(e,t,r){var i,n=e.length;if(n!==t[r])throw new be(n,t[r]);if(r<t.length-1){var u=r+1;for(i=0;i<n;i++){var l=e[i];if(!Array.isArray(l))throw new be(t.length-1,t.length,"<");ka(e[i],t,u)}}else for(i=0;i<n;i++)if(Array.isArray(e[i]))throw new be(t.length+1,t.length,">")}function Ru(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new be(e.length,0)}else ka(e,t,0)}function $e(e,t){if(e!==void 0){if(!Ie(e)||!We(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new jt(e,t)}}function Li(e,t,r){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(n){if(!Ie(n)||!We(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ge(t)+")")}),(Ie(e)||Je(e))&&(e=[e]);var i=r!==void 0?r:0;return Ui(e,t,0,i),e}function Ui(e,t,r,i){var n,u,l=e.length,d=t[r],f=Math.min(l,d);if(e.length=d,r<t.length-1){var h=r+1;for(n=0;n<f;n++)u=e[n],Array.isArray(u)||(u=[u],e[n]=u),Ui(u,t,h,i);for(n=f;n<d;n++)u=[],e[n]=u,Ui(u,t,h,i)}else{for(n=0;n<f;n++)for(;Array.isArray(e[n]);)e[n]=e[n][0];for(n=f;n<d;n++)e[n]=i}}function Ka(e,t){var r=es(e),i=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new be(0,i,"!=");t=Xi(t,i);var n=Ja(t);if(i!==n)throw new be(n,i,"!=");try{return Pc(r,t)}catch(u){throw u instanceof be?new be(n,i,"!="):u}}function Xi(e,t){var r=Ja(e),i=e.slice(),n=-1,u=e.indexOf(n),l=e.indexOf(n,u+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var d=u>=0,f=t%r===0;if(d)if(f)i[u]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return i}function Ja(e){return e.reduce((t,r)=>t*r,1)}function Pc(e,t){for(var r=e,i,n=t.length-1;n>0;n--){var u=t[n];i=[];for(var l=r.length/u,d=0;d<l;d++)i.push(r.slice(d*u,(d+1)*u));r=i}return r}function Xa(e,t,r,i){var n=i||ft(e);if(r)for(var u=0;u<r;u++)e=[e],n.unshift(1);for(e=Ya(e,t,0);n.length<t;)n.push(1);return e}function Ya(e,t,r){var i,n;if(Array.isArray(e)){var u=r+1;for(i=0,n=e.length;i<n;i++)e[i]=Ya(e[i],t,u)}else for(var l=r;l<t;l++)e=[e];return e}function es(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(i){Array.isArray(i)?i.forEach(r):t.push(i)}),t}function Rn(e,t){for(var r,i=0,n=0;n<e.length;n++){var u=e[n],l=Array.isArray(u);if(n===0&&l&&(i=u.length),l&&u.length!==i)return;var d=l?Rn(u,t):t(u);if(r===void 0)r=d;else if(r!==d)return"mixed"}return r}function ts(e,t,r,i){if(i<r){if(e.length!==t.length)throw new be(e.length,t.length);for(var n=[],u=0;u<e.length;u++)n[u]=ts(e[u],t[u],r,i+1);return n}else return e.concat(t)}function rs(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(r,i){return ts(r,i,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function Rc(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var i=t.map(o=>o.length),n=Math.max(...i),u=new Array(n).fill(null),l=0;l<t.length;l++)for(var d=t[l],f=i[l],h=0;h<f;h++){var s=n-f+h;d[h]>u[s]&&(u[s]=d[h])}for(var a=0;a<t.length;a++)In(t[a],u);return u}function In(e,t){for(var r=t.length,i=e.length,n=0;n<i;n++){var u=r-i+n;if(e[n]<t[u]&&e[n]>1||e[n]>t[u])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(i," with size ").concat(e[n]," to size ").concat(t[u]))}}function Iu(e,t){var r=ft(e);if(qr(r,t))return e;In(r,t);var i=Rc(r,t),n=i.length,u=[...Array(n-r.length).fill(1),...r],l=zc(e);r.length<n&&(l=Ka(l,u),r=ft(l));for(var d=0;d<n;d++)r[d]<i[d]&&(l=Ic(l,i[d],d),r=ft(l));return l}function Ic(e,t,r){return rs(...Array(t).fill(e),r)}function zc(e){return Sa([],e)}function J(e,t,r,i){function n(u){var l=Cc(u,t.map(Uc));return qc(e,t,u),r(l)}return n.isFactory=!0,n.fn=e,n.dependencies=t.slice().sort(),i&&(n.meta=i),n}function qc(e,t,r){var i=t.filter(u=>!Lc(u)).every(u=>r[u]!==void 0);if(!i){var n=t.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function Lc(e){return e&&e[0]==="?"}function Uc(e){return e&&e[0]==="?"?e.slice(1):e}function $c(e,t){if(is(e)&&ns(e,t))return e[t];throw typeof e[t]=="function"&&Qc(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Vc(e,t,r){if(is(e)&&ns(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function jc(e,t){return t in e}function ns(e,t){return!e||typeof e!="object"?!1:Kr(Hc,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Qc(e,t){return e==null||typeof e[t]!="function"||Kr(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Kr(Wc,t)?!0:!(t in Object.prototype||t in Function.prototype)}function is(e){return typeof e=="object"&&e&&e.constructor===Object}var Hc={length:!0,name:!0},Wc={toString:!0,valueOf:!0,toLocaleString:!0};class Zc{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return $c(this.wrappedObject,t)}set(t,r){return Vc(this.wrappedObject,t,r),this}has(t){return jc(this.wrappedObject,t)}}function Gc(e){return e?e instanceof Map||e instanceof Zc||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var us=function(){return us=yr.create,yr},kc=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Kc=J("typed",kc,function(t){var{BigNumber:r,Complex:i,DenseMatrix:n,Fraction:u}=t,l=us();return l.clear(),l.addTypes([{name:"number",test:Ie},{name:"Complex",test:$a},{name:"BigNumber",test:Je},{name:"Fraction",test:Va},{name:"Unit",test:ja},{name:"identifier",test:d=>zt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(d)},{name:"string",test:zt},{name:"Chain",test:yc},{name:"Array",test:Ue},{name:"Matrix",test:ze},{name:"DenseMatrix",test:Wl},{name:"SparseMatrix",test:Zl},{name:"Range",test:Gl},{name:"Index",test:Ji},{name:"boolean",test:kl},{name:"ResultSet",test:Kl},{name:"Help",test:Jl},{name:"function",test:Xl},{name:"Date",test:Yl},{name:"RegExp",test:ec},{name:"null",test:tc},{name:"undefined",test:rc},{name:"AccessorNode",test:nc},{name:"ArrayNode",test:ic},{name:"AssignmentNode",test:uc},{name:"BlockNode",test:ac},{name:"ConditionalNode",test:sc},{name:"ConstantNode",test:oc},{name:"FunctionNode",test:cc},{name:"FunctionAssignmentNode",test:lc},{name:"IndexNode",test:fc},{name:"Node",test:hc},{name:"ObjectNode",test:dc},{name:"OperatorNode",test:pc},{name:"ParenthesisNode",test:vc},{name:"RangeNode",test:mc},{name:"RelationalNode",test:Dc},{name:"SymbolNode",test:gc},{name:"Map",test:Gc},{name:"Object",test:Qa}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||Fi(f),Nc(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return i||Bn(f),new i(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return i||Bn(f),new i(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return i||Bn(f),new i(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){u||Ei(f);var h=new u(f);if(h.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return h}},{from:"string",to:"number",convert:function(f){var h=Number(f);if(isNaN(h))throw new Error('Cannot convert "'+f+'" to a number');return h}},{from:"string",to:"BigNumber",convert:function(f){r||Fi(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){u||Ei(f);try{return new u(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){i||Bn(f);try{return new i(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||Fi(f),new r(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return u||Ei(f),new u(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return n||Jc(),new n(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),l.onMismatch=(d,f,h)=>{var s=l.createError(d,f,h);if(["wrongType","mismatch"].includes(s.data.category)&&f.length===1&&zr(f[0])&&h.some(o=>!o.params.includes(","))){var a=new TypeError("Function '".concat(d,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(d,")'."));throw a.data=s.data,a}throw s},l.onMismatch=(d,f,h)=>{var s=l.createError(d,f,h);if(["wrongType","mismatch"].includes(s.data.category)&&f.length===1&&zr(f[0])&&h.some(o=>!o.params.includes(","))){var a=new TypeError("Function '".concat(d,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(d,")'."));throw a.data=s.data,a}throw s},l});function Fi(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Bn(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Jc(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ei(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var wr=9e15,ur=1e9,$i="0123456789abcdef",zn="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",qn="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Vi={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-wr,maxE:wr,crypto:!1},as,$t,oe=!0,kn="[DecimalError] ",ir=kn+"Invalid argument: ",ss=kn+"Precision limit exceeded",os=kn+"crypto unavailable",ls="[object Decimal]",st=Math.floor,ke=Math.pow,Xc=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Yc=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ef=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,cs=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xt=1e7,ie=7,tf=9007199254740991,rf=zn.length-1,ji=qn.length-1,L={toStringTag:ls};L.absoluteValue=L.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),re(e)};L.ceil=function(){return re(new this.constructor(this),this.e+1,2)};L.clampedTo=L.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(ir+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};L.comparedTo=L.cmp=function(e){var t,r,i,n,u=this,l=u.d,d=(e=new u.constructor(e)).d,f=u.s,h=e.s;if(!l||!d)return!f||!h?NaN:f!==h?f:l===d?0:!l^f<0?1:-1;if(!l[0]||!d[0])return l[0]?f:d[0]?-h:0;if(f!==h)return f;if(u.e!==e.e)return u.e>e.e^f<0?1:-1;for(i=l.length,n=d.length,t=0,r=i<n?i:n;t<r;++t)if(l[t]!==d[t])return l[t]>d[t]^f<0?1:-1;return i===n?0:i>n^f<0?1:-1};L.cosine=L.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+ie,i.rounding=1,r=nf(i,vs(i,r)),i.precision=e,i.rounding=t,re($t==2||$t==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};L.cubeRoot=L.cbrt=function(){var e,t,r,i,n,u,l,d,f,h,s=this,a=s.constructor;if(!s.isFinite()||s.isZero())return new a(s);for(oe=!1,u=s.s*ke(s.s*s,1/3),!u||Math.abs(u)==1/0?(r=rt(s.d),e=s.e,(u=(e-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=ke(r,1/3),e=st((e+1)/3)-(e%3==(e<0?-1:2)),u==1/0?r="5e"+e:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new a(r),i.s=s.s):i=new a(u.toString()),l=(e=a.precision)+3;;)if(d=i,f=d.times(d).times(d),h=f.plus(s),i=_e(h.plus(s).times(d),h.plus(f),l+2,1),rt(d.d).slice(0,l)===(r=rt(i.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!n&&r=="4999"){if(!n&&(re(d,e+1,0),d.times(d).times(d).eq(s))){i=d;break}l+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(re(i,e+1,1),t=!i.times(i).times(i).eq(s));break}return oe=!0,re(i,e,a.rounding,t)};L.decimalPlaces=L.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-st(this.e/ie))*ie,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};L.dividedBy=L.div=function(e){return _e(this,new this.constructor(e))};L.dividedToIntegerBy=L.divToInt=function(e){var t=this,r=t.constructor;return re(_e(t,new r(e),0,1,1),r.precision,r.rounding)};L.equals=L.eq=function(e){return this.cmp(e)===0};L.floor=function(){return re(new this.constructor(this),this.e+1,3)};L.greaterThan=L.gt=function(e){return this.cmp(e)>0};L.greaterThanOrEqualTo=L.gte=function(e){var t=this.cmp(e);return t==1||t===0};L.hyperbolicCosine=L.cosh=function(){var e,t,r,i,n,u=this,l=u.constructor,d=new l(1);if(!u.isFinite())return new l(u.s?1/0:NaN);if(u.isZero())return d;r=l.precision,i=l.rounding,l.precision=r+Math.max(u.e,u.sd())+4,l.rounding=1,n=u.d.length,n<32?(e=Math.ceil(n/3),t=(1/Jn(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),u=Lr(l,1,u.times(t),new l(1),!0);for(var f,h=e,s=new l(8);h--;)f=u.times(u),u=d.minus(f.times(s.minus(f.times(s))));return re(u,l.precision=r,l.rounding=i,!0)};L.hyperbolicSine=L.sinh=function(){var e,t,r,i,n=this,u=n.constructor;if(!n.isFinite()||n.isZero())return new u(n);if(t=u.precision,r=u.rounding,u.precision=t+Math.max(n.e,n.sd())+4,u.rounding=1,i=n.d.length,i<3)n=Lr(u,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/Jn(5,e)),n=Lr(u,2,n,n,!0);for(var l,d=new u(5),f=new u(16),h=new u(20);e--;)l=n.times(n),n=n.times(d.plus(l.times(f.times(l).plus(h))))}return u.precision=t,u.rounding=r,re(n,t,r,!0)};L.hyperbolicTangent=L.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,_e(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};L.inverseCosine=L.acos=function(){var e,t=this,r=t.constructor,i=t.abs().cmp(1),n=r.precision,u=r.rounding;return i!==-1?i===0?t.isNeg()?Nt(r,n,u):new r(0):new r(NaN):t.isZero()?Nt(r,n+4,u).times(.5):(r.precision=n+6,r.rounding=1,t=t.asin(),e=Nt(r,n+4,u).times(.5),r.precision=n,r.rounding=u,e.minus(t))};L.inverseHyperbolicCosine=L.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,oe=!1,r=r.times(r).minus(1).sqrt().plus(r),oe=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};L.inverseHyperbolicSine=L.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,oe=!1,r=r.times(r).plus(1).sqrt().plus(r),oe=!0,i.precision=e,i.rounding=t,r.ln())};L.inverseHyperbolicTangent=L.atanh=function(){var e,t,r,i,n=this,u=n.constructor;return n.isFinite()?n.e>=0?new u(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=u.precision,t=u.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?re(new u(n),e,t,!0):(u.precision=r=i-n.e,n=_e(n.plus(1),new u(1).minus(n),r+e,1),u.precision=e+4,u.rounding=1,n=n.ln(),u.precision=e,u.rounding=t,n.times(.5))):new u(NaN)};L.inverseSine=L.asin=function(){var e,t,r,i,n=this,u=n.constructor;return n.isZero()?new u(n):(t=n.abs().cmp(1),r=u.precision,i=u.rounding,t!==-1?t===0?(e=Nt(u,r+4,i).times(.5),e.s=n.s,e):new u(NaN):(u.precision=r+6,u.rounding=1,n=n.div(new u(1).minus(n.times(n)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=i,n.times(2)))};L.inverseTangent=L.atan=function(){var e,t,r,i,n,u,l,d,f,h=this,s=h.constructor,a=s.precision,o=s.rounding;if(h.isFinite()){if(h.isZero())return new s(h);if(h.abs().eq(1)&&a+4<=ji)return l=Nt(s,a+4,o).times(.25),l.s=h.s,l}else{if(!h.s)return new s(NaN);if(a+4<=ji)return l=Nt(s,a+4,o).times(.5),l.s=h.s,l}for(s.precision=d=a+10,s.rounding=1,r=Math.min(28,d/ie+2|0),e=r;e;--e)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(oe=!1,t=Math.ceil(d/ie),i=1,f=h.times(h),l=new s(h),n=h;e!==-1;)if(n=n.times(f),u=l.minus(n.div(i+=2)),n=n.times(f),l=u.plus(n.div(i+=2)),l.d[t]!==void 0)for(e=t;l.d[e]===u.d[e]&&e--;);return r&&(l=l.times(2<<r-1)),oe=!0,re(l,s.precision=a,s.rounding=o,!0)};L.isFinite=function(){return!!this.d};L.isInteger=L.isInt=function(){return!!this.d&&st(this.e/ie)>this.d.length-2};L.isNaN=function(){return!this.s};L.isNegative=L.isNeg=function(){return this.s<0};L.isPositive=L.isPos=function(){return this.s>0};L.isZero=function(){return!!this.d&&this.d[0]===0};L.lessThan=L.lt=function(e){return this.cmp(e)<0};L.lessThanOrEqualTo=L.lte=function(e){return this.cmp(e)<1};L.logarithm=L.log=function(e){var t,r,i,n,u,l,d,f,h=this,s=h.constructor,a=s.precision,o=s.rounding,p=5;if(e==null)e=new s(10),t=!0;else{if(e=new s(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new s(NaN);t=e.eq(10)}if(r=h.d,h.s<0||!r||!r[0]||h.eq(1))return new s(r&&!r[0]?-1/0:h.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)u=!0;else{for(n=r[0];n%10===0;)n/=10;u=n!==1}if(oe=!1,d=a+p,l=nr(h,d),i=t?Ln(s,d+10):nr(e,d),f=_e(l,i,d,1),Jr(f.d,n=a,o))do if(d+=10,l=nr(h,d),i=t?Ln(s,d+10):nr(e,d),f=_e(l,i,d,1),!u){+rt(f.d).slice(n+1,n+15)+1==1e14&&(f=re(f,a+1,0));break}while(Jr(f.d,n+=10,o));return oe=!0,re(f,a,o)};L.minus=L.sub=function(e){var t,r,i,n,u,l,d,f,h,s,a,o,p=this,y=p.constructor;if(e=new y(e),!p.d||!e.d)return!p.s||!e.s?e=new y(NaN):p.d?e.s=-e.s:e=new y(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(h=p.d,o=e.d,d=y.precision,f=y.rounding,!h[0]||!o[0]){if(o[0])e.s=-e.s;else if(h[0])e=new y(p);else return new y(f===3?-0:0);return oe?re(e,d,f):e}if(r=st(e.e/ie),s=st(p.e/ie),h=h.slice(),u=s-r,u){for(a=u<0,a?(t=h,u=-u,l=o.length):(t=o,r=s,l=h.length),i=Math.max(Math.ceil(d/ie),l)+2,u>i&&(u=i,t.length=1),t.reverse(),i=u;i--;)t.push(0);t.reverse()}else{for(i=h.length,l=o.length,a=i<l,a&&(l=i),i=0;i<l;i++)if(h[i]!=o[i]){a=h[i]<o[i];break}u=0}for(a&&(t=h,h=o,o=t,e.s=-e.s),l=h.length,i=o.length-l;i>0;--i)h[l++]=0;for(i=o.length;i>u;){if(h[--i]<o[i]){for(n=i;n&&h[--n]===0;)h[n]=xt-1;--h[n],h[i]+=xt}h[i]-=o[i]}for(;h[--l]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(e.d=h,e.e=Kn(h,r),oe?re(e,d,f):e):new y(f===3?-0:0)};L.modulo=L.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?re(new i(r),i.precision,i.rounding):(oe=!1,i.modulo==9?(t=_e(r,e.abs(),0,3,1),t.s*=e.s):t=_e(r,e,0,i.modulo,1),t=t.times(e),oe=!0,r.minus(t))};L.naturalExponential=L.exp=function(){return Qi(this)};L.naturalLogarithm=L.ln=function(){return nr(this)};L.negated=L.neg=function(){var e=new this.constructor(this);return e.s=-e.s,re(e)};L.plus=L.add=function(e){var t,r,i,n,u,l,d,f,h,s,a=this,o=a.constructor;if(e=new o(e),!a.d||!e.d)return!a.s||!e.s?e=new o(NaN):a.d||(e=new o(e.d||a.s===e.s?a:NaN)),e;if(a.s!=e.s)return e.s=-e.s,a.minus(e);if(h=a.d,s=e.d,d=o.precision,f=o.rounding,!h[0]||!s[0])return s[0]||(e=new o(a)),oe?re(e,d,f):e;if(u=st(a.e/ie),i=st(e.e/ie),h=h.slice(),n=u-i,n){for(n<0?(r=h,n=-n,l=s.length):(r=s,i=u,l=h.length),u=Math.ceil(d/ie),l=u>l?u+1:l+1,n>l&&(n=l,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(l=h.length,n=s.length,l-n<0&&(n=l,r=s,s=h,h=r),t=0;n;)t=(h[--n]=h[n]+s[n]+t)/xt|0,h[n]%=xt;for(t&&(h.unshift(t),++i),l=h.length;h[--l]==0;)h.pop();return e.d=h,e.e=Kn(h,i),oe?re(e,d,f):e};L.precision=L.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ir+e);return r.d?(t=fs(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};L.round=function(){var e=this,t=e.constructor;return re(new t(e),e.e+1,t.rounding)};L.sine=L.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+ie,i.rounding=1,r=af(i,vs(i,r)),i.precision=e,i.rounding=t,re($t>2?r.neg():r,e,t,!0)):new i(NaN)};L.squareRoot=L.sqrt=function(){var e,t,r,i,n,u,l=this,d=l.d,f=l.e,h=l.s,s=l.constructor;if(h!==1||!d||!d[0])return new s(!h||h<0&&(!d||d[0])?NaN:d?l:1/0);for(oe=!1,h=Math.sqrt(+l),h==0||h==1/0?(t=rt(d),(t.length+f)%2==0&&(t+="0"),h=Math.sqrt(t),f=st((f+1)/2)-(f<0||f%2),h==1/0?t="5e"+f:(t=h.toExponential(),t=t.slice(0,t.indexOf("e")+1)+f),i=new s(t)):i=new s(h.toString()),r=(f=s.precision)+3;;)if(u=i,i=u.plus(_e(l,u,r+2,1)).times(.5),rt(u.d).slice(0,r)===(t=rt(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(re(u,f+1,0),u.times(u).eq(l))){i=u;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(re(i,f+1,1),e=!i.times(i).eq(l));break}return oe=!0,re(i,f,s.rounding,e)};L.tangent=L.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=_e(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,re($t==2||$t==4?r.neg():r,e,t,!0)):new i(NaN)};L.times=L.mul=function(e){var t,r,i,n,u,l,d,f,h,s=this,a=s.constructor,o=s.d,p=(e=new a(e)).d;if(e.s*=s.s,!o||!o[0]||!p||!p[0])return new a(!e.s||o&&!o[0]&&!p||p&&!p[0]&&!o?NaN:!o||!p?e.s/0:e.s*0);for(r=st(s.e/ie)+st(e.e/ie),f=o.length,h=p.length,f<h&&(u=o,o=p,p=u,l=f,f=h,h=l),u=[],l=f+h,i=l;i--;)u.push(0);for(i=h;--i>=0;){for(t=0,n=f+i;n>i;)d=u[n]+p[i]*o[n-i-1]+t,u[n--]=d%xt|0,t=d/xt|0;u[n]=(u[n]+t)%xt|0}for(;!u[--l];)u.pop();return t?++r:u.shift(),e.d=u,e.e=Kn(u,r),oe?re(e,a.precision,a.rounding):e};L.toBinary=function(e,t){return Yi(this,2,e,t)};L.toDecimalPlaces=L.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(pt(e,0,ur),t===void 0?t=i.rounding:pt(t,0,8),re(r,e+r.e+1,t))};L.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=qt(i,!0):(pt(e,0,ur),t===void 0?t=n.rounding:pt(t,0,8),i=re(new n(i),e+1,t),r=qt(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};L.toFixed=function(e,t){var r,i,n=this,u=n.constructor;return e===void 0?r=qt(n):(pt(e,0,ur),t===void 0?t=u.rounding:pt(t,0,8),i=re(new u(n),e+n.e+1,t),r=qt(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};L.toFraction=function(e){var t,r,i,n,u,l,d,f,h,s,a,o,p=this,y=p.d,c=p.constructor;if(!y)return new c(p);if(h=r=new c(1),i=f=new c(0),t=new c(i),u=t.e=fs(y)-p.e-1,l=u%ie,t.d[0]=ke(10,l<0?ie+l:l),e==null)e=u>0?t:h;else{if(d=new c(e),!d.isInt()||d.lt(h))throw Error(ir+d);e=d.gt(t)?u>0?t:h:d}for(oe=!1,d=new c(rt(y)),s=c.precision,c.precision=u=y.length*ie*2;a=_e(d,t,0,1,1),n=r.plus(a.times(i)),n.cmp(e)!=1;)r=i,i=n,n=h,h=f.plus(a.times(n)),f=n,n=t,t=d.minus(a.times(n)),d=n;return n=_e(e.minus(r),i,0,1,1),f=f.plus(n.times(h)),r=r.plus(n.times(i)),f.s=h.s=p.s,o=_e(h,i,u,1).minus(p).abs().cmp(_e(f,r,u,1).minus(p).abs())<1?[h,i]:[f,r],c.precision=s,oe=!0,o};L.toHexadecimal=L.toHex=function(e,t){return Yi(this,16,e,t)};L.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:pt(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(oe=!1,r=_e(r,e,0,t,1).times(e),oe=!0,re(r)):(e.s=r.s,r=e),r};L.toNumber=function(){return+this};L.toOctal=function(e,t){return Yi(this,8,e,t)};L.toPower=L.pow=function(e){var t,r,i,n,u,l,d=this,f=d.constructor,h=+(e=new f(e));if(!d.d||!e.d||!d.d[0]||!e.d[0])return new f(ke(+d,h));if(d=new f(d),d.eq(1))return d;if(i=f.precision,u=f.rounding,e.eq(1))return re(d,i,u);if(t=st(e.e/ie),t>=e.d.length-1&&(r=h<0?-h:h)<=tf)return n=hs(f,d,r,i),e.s<0?new f(1).div(n):re(n,i,u);if(l=d.s,l<0){if(t<e.d.length-1)return new f(NaN);if(e.d[t]&1||(l=1),d.e==0&&d.d[0]==1&&d.d.length==1)return d.s=l,d}return r=ke(+d,h),t=r==0||!isFinite(r)?st(h*(Math.log("0."+rt(d.d))/Math.LN10+d.e+1)):new f(r+"").e,t>f.maxE+1||t<f.minE-1?new f(t>0?l/0:0):(oe=!1,f.rounding=d.s=1,r=Math.min(12,(t+"").length),n=Qi(e.times(nr(d,i+r)),i),n.d&&(n=re(n,i+5,1),Jr(n.d,i,u)&&(t=i+10,n=re(Qi(e.times(nr(d,t+r)),t),t+5,1),+rt(n.d).slice(i+1,i+15)+1==1e14&&(n=re(n,i+1,0)))),n.s=l,oe=!0,f.rounding=u,re(n,i,u))};L.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=qt(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(pt(e,1,ur),t===void 0?t=n.rounding:pt(t,0,8),i=re(new n(i),e,t),r=qt(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};L.toSignificantDigits=L.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(pt(e,1,ur),t===void 0?t=i.rounding:pt(t,0,8)),re(new i(r),e,t)};L.toString=function(){var e=this,t=e.constructor,r=qt(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};L.truncated=L.trunc=function(){return re(new this.constructor(this),this.e+1,1)};L.valueOf=L.toJSON=function(){var e=this,t=e.constructor,r=qt(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function rt(e){var t,r,i,n=e.length-1,u="",l=e[0];if(n>0){for(u+=l,t=1;t<n;t++)i=e[t]+"",r=ie-i.length,r&&(u+=kt(r)),u+=i;l=e[t],i=l+"",r=ie-i.length,r&&(u+=kt(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return u+l}function pt(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ir+e)}function Jr(e,t,r,i){var n,u,l,d;for(u=e[0];u>=10;u/=10)--t;return--t<0?(t+=ie,n=0):(n=Math.ceil((t+1)/ie),t%=ie),u=ke(10,ie-t),d=e[n]%u|0,i==null?t<3?(t==0?d=d/100|0:t==1&&(d=d/10|0),l=r<4&&d==99999||r>3&&d==49999||d==5e4||d==0):l=(r<4&&d+1==u||r>3&&d+1==u/2)&&(e[n+1]/u/100|0)==ke(10,t-2)-1||(d==u/2||d==0)&&(e[n+1]/u/100|0)==0:t<4?(t==0?d=d/1e3|0:t==1?d=d/100|0:t==2&&(d=d/10|0),l=(i||r<4)&&d==9999||!i&&r>3&&d==4999):l=((i||r<4)&&d+1==u||!i&&r>3&&d+1==u/2)&&(e[n+1]/u/1e3|0)==ke(10,t-3)-1,l}function Tn(e,t,r){for(var i,n=[0],u,l=0,d=e.length;l<d;){for(u=n.length;u--;)n[u]*=t;for(n[0]+=$i.indexOf(e.charAt(l++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function nf(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/Jn(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=Lr(e,1,t.times(n),new e(1));for(var u=r;u--;){var l=t.times(t);t=l.times(l).minus(l).times(8).plus(1)}return e.precision-=r,t}var _e=function(){function e(i,n,u){var l,d=0,f=i.length;for(i=i.slice();f--;)l=i[f]*n+d,i[f]=l%u|0,d=l/u|0;return d&&i.unshift(d),i}function t(i,n,u,l){var d,f;if(u!=l)f=u>l?1:-1;else for(d=f=0;d<u;d++)if(i[d]!=n[d]){f=i[d]>n[d]?1:-1;break}return f}function r(i,n,u,l){for(var d=0;u--;)i[u]-=d,d=i[u]<n[u]?1:0,i[u]=d*l+i[u]-n[u];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,u,l,d,f){var h,s,a,o,p,y,c,m,v,g,D,A,w,C,b,E,S,T,x,P,H=i.constructor,B=i.s==n.s?1:-1,R=i.d,O=n.d;if(!R||!R[0]||!O||!O[0])return new H(!i.s||!n.s||(R?O&&R[0]==O[0]:!O)?NaN:R&&R[0]==0||!O?B*0:B/0);for(f?(p=1,s=i.e-n.e):(f=xt,p=ie,s=st(i.e/p)-st(n.e/p)),x=O.length,S=R.length,v=new H(B),g=v.d=[],a=0;O[a]==(R[a]||0);a++);if(O[a]>(R[a]||0)&&s--,u==null?(C=u=H.precision,l=H.rounding):d?C=u+(i.e-n.e)+1:C=u,C<0)g.push(1),y=!0;else{if(C=C/p+2|0,a=0,x==1){for(o=0,O=O[0],C++;(a<S||o)&&C--;a++)b=o*f+(R[a]||0),g[a]=b/O|0,o=b%O|0;y=o||a<S}else{for(o=f/(O[0]+1)|0,o>1&&(O=e(O,o,f),R=e(R,o,f),x=O.length,S=R.length),E=x,D=R.slice(0,x),A=D.length;A<x;)D[A++]=0;P=O.slice(),P.unshift(0),T=O[0],O[1]>=f/2&&++T;do o=0,h=t(O,D,x,A),h<0?(w=D[0],x!=A&&(w=w*f+(D[1]||0)),o=w/T|0,o>1?(o>=f&&(o=f-1),c=e(O,o,f),m=c.length,A=D.length,h=t(c,D,m,A),h==1&&(o--,r(c,x<m?P:O,m,f))):(o==0&&(h=o=1),c=O.slice()),m=c.length,m<A&&c.unshift(0),r(D,c,A,f),h==-1&&(A=D.length,h=t(O,D,x,A),h<1&&(o++,r(D,x<A?P:O,A,f))),A=D.length):h===0&&(o++,D=[0]),g[a++]=o,h&&D[0]?D[A++]=R[E]||0:(D=[R[E]],A=1);while((E++<S||D[0]!==void 0)&&C--);y=D[0]!==void 0}g[0]||g.shift()}if(p==1)v.e=s,as=y;else{for(a=1,o=g[0];o>=10;o/=10)a++;v.e=a+s*p-1,re(v,d?u+v.e+1:u,l,y)}return v}}();function re(e,t,r,i){var n,u,l,d,f,h,s,a,o,p=e.constructor;e:if(t!=null){if(a=e.d,!a)return e;for(n=1,d=a[0];d>=10;d/=10)n++;if(u=t-n,u<0)u+=ie,l=t,s=a[o=0],f=s/ke(10,n-l-1)%10|0;else if(o=Math.ceil((u+1)/ie),d=a.length,o>=d)if(i){for(;d++<=o;)a.push(0);s=f=0,n=1,u%=ie,l=u-ie+1}else break e;else{for(s=d=a[o],n=1;d>=10;d/=10)n++;u%=ie,l=u-ie+n,f=l<0?0:s/ke(10,n-l-1)%10|0}if(i=i||t<0||a[o+1]!==void 0||(l<0?s:s%ke(10,n-l-1)),h=r<4?(f||i)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||i||r==6&&(u>0?l>0?s/ke(10,n-l):0:a[o-1])%10&1||r==(e.s<0?8:7)),t<1||!a[0])return a.length=0,h?(t-=e.e+1,a[0]=ke(10,(ie-t%ie)%ie),e.e=-t||0):a[0]=e.e=0,e;if(u==0?(a.length=o,d=1,o--):(a.length=o+1,d=ke(10,ie-u),a[o]=l>0?(s/ke(10,n-l)%ke(10,l)|0)*d:0),h)for(;;)if(o==0){for(u=1,l=a[0];l>=10;l/=10)u++;for(l=a[0]+=d,d=1;l>=10;l/=10)d++;u!=d&&(e.e++,a[0]==xt&&(a[0]=1));break}else{if(a[o]+=d,a[o]!=xt)break;a[o--]=0,d=1}for(u=a.length;a[--u]===0;)a.pop()}return oe&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function qt(e,t,r){if(!e.isFinite())return ps(e);var i,n=e.e,u=rt(e.d),l=u.length;return t?(r&&(i=r-l)>0?u=u.charAt(0)+"."+u.slice(1)+kt(i):l>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(e.e<0?"e":"e+")+e.e):n<0?(u="0."+kt(-n-1)+u,r&&(i=r-l)>0&&(u+=kt(i))):n>=l?(u+=kt(n+1-l),r&&(i=r-n-1)>0&&(u=u+"."+kt(i))):((i=n+1)<l&&(u=u.slice(0,i)+"."+u.slice(i)),r&&(i=r-l)>0&&(n+1===l&&(u+="."),u+=kt(i))),u}function Kn(e,t){var r=e[0];for(t*=ie;r>=10;r/=10)t++;return t}function Ln(e,t,r){if(t>rf)throw oe=!0,r&&(e.precision=r),Error(ss);return re(new e(zn),t,1,!0)}function Nt(e,t,r){if(t>ji)throw Error(ss);return re(new e(qn),t,r,!0)}function fs(e){var t=e.length-1,r=t*ie+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function kt(e){for(var t="";e--;)t+="0";return t}function hs(e,t,r,i){var n,u=new e(1),l=Math.ceil(i/ie+4);for(oe=!1;;){if(r%2&&(u=u.times(t),qu(u.d,l)&&(n=!0)),r=st(r/2),r===0){r=u.d.length-1,n&&u.d[r]===0&&++u.d[r];break}t=t.times(t),qu(t.d,l)}return oe=!0,u}function zu(e){return e.d[e.d.length-1]&1}function ds(e,t,r){for(var i,n=new e(t[0]),u=0;++u<t.length;)if(i=new e(t[u]),i.s)n[r](i)&&(n=i);else{n=i;break}return n}function Qi(e,t){var r,i,n,u,l,d,f,h=0,s=0,a=0,o=e.constructor,p=o.rounding,y=o.precision;if(!e.d||!e.d[0]||e.e>17)return new o(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(oe=!1,f=y):f=t,d=new o(.03125);e.e>-2;)e=e.times(d),a+=5;for(i=Math.log(ke(2,a))/Math.LN10*2+5|0,f+=i,r=u=l=new o(1),o.precision=f;;){if(u=re(u.times(e),f,1),r=r.times(++s),d=l.plus(_e(u,r,f,1)),rt(d.d).slice(0,f)===rt(l.d).slice(0,f)){for(n=a;n--;)l=re(l.times(l),f,1);if(t==null)if(h<3&&Jr(l.d,f-i,p,h))o.precision=f+=10,r=u=d=new o(1),s=0,h++;else return re(l,o.precision=y,p,oe=!0);else return o.precision=y,l}l=d}}function nr(e,t){var r,i,n,u,l,d,f,h,s,a,o,p=1,y=10,c=e,m=c.d,v=c.constructor,g=v.rounding,D=v.precision;if(c.s<0||!m||!m[0]||!c.e&&m[0]==1&&m.length==1)return new v(m&&!m[0]?-1/0:c.s!=1?NaN:m?0:c);if(t==null?(oe=!1,s=D):s=t,v.precision=s+=y,r=rt(m),i=r.charAt(0),Math.abs(u=c.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)c=c.times(e),r=rt(c.d),i=r.charAt(0),p++;u=c.e,i>1?(c=new v("0."+r),u++):c=new v(i+"."+r.slice(1))}else return h=Ln(v,s+2,D).times(u+""),c=nr(new v(i+"."+r.slice(1)),s-y).plus(h),v.precision=D,t==null?re(c,D,g,oe=!0):c;for(a=c,f=l=c=_e(c.minus(1),c.plus(1),s,1),o=re(c.times(c),s,1),n=3;;){if(l=re(l.times(o),s,1),h=f.plus(_e(l,new v(n),s,1)),rt(h.d).slice(0,s)===rt(f.d).slice(0,s))if(f=f.times(2),u!==0&&(f=f.plus(Ln(v,s+2,D).times(u+""))),f=_e(f,new v(p),s,1),t==null)if(Jr(f.d,s-y,g,d))v.precision=s+=y,h=l=c=_e(a.minus(1),a.plus(1),s,1),o=re(c.times(c),s,1),n=d=1;else return re(f,v.precision=D,g,oe=!0);else return v.precision=D,f;f=h,n+=2}}function ps(e){return String(e.s*e.s/0)}function Hi(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%ie,r<0&&(i+=ie),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=ie;i<n;)e.d.push(+t.slice(i,i+=ie));t=t.slice(i),i=ie-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),oe&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function uf(e,t){var r,i,n,u,l,d,f,h,s;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),cs.test(t))return Hi(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Yc.test(t))r=16,t=t.toLowerCase();else if(Xc.test(t))r=2;else if(ef.test(t))r=8;else throw Error(ir+t);for(u=t.search(/p/i),u>0?(f=+t.slice(u+1),t=t.substring(2,u)):t=t.slice(2),u=t.indexOf("."),l=u>=0,i=e.constructor,l&&(t=t.replace(".",""),d=t.length,u=d-u,n=hs(i,new i(r),u,u*2)),h=Tn(t,r,xt),s=h.length-1,u=s;h[u]===0;--u)h.pop();return u<0?new i(e.s*0):(e.e=Kn(h,s),e.d=h,oe=!1,l&&(e=_e(e,n,d*4)),f&&(e=e.times(Math.abs(f)<54?ke(2,f):Ur.pow(2,f))),oe=!0,e)}function af(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:Lr(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Jn(5,r)),t=Lr(e,2,t,t);for(var n,u=new e(5),l=new e(16),d=new e(20);r--;)n=t.times(t),t=t.times(u.plus(n.times(l.times(n).minus(d))));return t}function Lr(e,t,r,i,n){var u,l,d,f,h=e.precision,s=Math.ceil(h/ie);for(oe=!1,f=r.times(r),d=new e(i);;){if(l=_e(d.times(f),new e(t++*t++),h,1),d=n?i.plus(l):i.minus(l),i=_e(l.times(f),new e(t++*t++),h,1),l=d.plus(i),l.d[s]!==void 0){for(u=s;l.d[u]===d.d[u]&&u--;);if(u==-1)break}u=d,d=i,i=l,l=u}return oe=!0,l.d.length=s+1,l}function Jn(e,t){for(var r=e;--t;)r*=e;return r}function vs(e,t){var r,i=t.s<0,n=Nt(e,e.precision,1),u=n.times(.5);if(t=t.abs(),t.lte(u))return $t=i?4:1,t;if(r=t.divToInt(n),r.isZero())$t=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(u))return $t=zu(r)?i?2:3:i?4:1,t;$t=zu(r)?i?1:4:i?3:2}return t.minus(n).abs()}function Yi(e,t,r,i){var n,u,l,d,f,h,s,a,o,p=e.constructor,y=r!==void 0;if(y?(pt(r,1,ur),i===void 0?i=p.rounding:pt(i,0,8)):(r=p.precision,i=p.rounding),!e.isFinite())s=ps(e);else{for(s=qt(e),l=s.indexOf("."),y?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,l>=0&&(s=s.replace(".",""),o=new p(1),o.e=s.length-l,o.d=Tn(qt(o),10,n),o.e=o.d.length),a=Tn(s,10,n),u=f=a.length;a[--f]==0;)a.pop();if(!a[0])s=y?"0p+0":"0";else{if(l<0?u--:(e=new p(e),e.d=a,e.e=u,e=_e(e,o,r,i,0,n),a=e.d,u=e.e,h=as),l=a[r],d=n/2,h=h||a[r+1]!==void 0,h=i<4?(l!==void 0||h)&&(i===0||i===(e.s<0?3:2)):l>d||l===d&&(i===4||h||i===6&&a[r-1]&1||i===(e.s<0?8:7)),a.length=r,h)for(;++a[--r]>n-1;)a[r]=0,r||(++u,a.unshift(1));for(f=a.length;!a[f-1];--f);for(l=0,s="";l<f;l++)s+=$i.charAt(a[l]);if(y){if(f>1)if(t==16||t==8){for(l=t==16?4:3,--f;f%l;f++)s+="0";for(a=Tn(s,n,t),f=a.length;!a[f-1];--f);for(l=1,s="1.";l<f;l++)s+=$i.charAt(a[l])}else s=s.charAt(0)+"."+s.slice(1);s=s+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)s="0"+s;s="0."+s}else if(++u>f)for(u-=f;u--;)s+="0";else u<f&&(s=s.slice(0,u)+"."+s.slice(u))}s=(t==16?"0x":t==2?"0b":t==8?"0o":"")+s}return e.s<0?"-"+s:s}function qu(e,t){if(e.length>t)return e.length=t,!0}function sf(e){return new this(e).abs()}function of(e){return new this(e).acos()}function lf(e){return new this(e).acosh()}function cf(e,t){return new this(e).plus(t)}function ff(e){return new this(e).asin()}function hf(e){return new this(e).asinh()}function df(e){return new this(e).atan()}function pf(e){return new this(e).atanh()}function vf(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,u=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Nt(this,u,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Nt(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Nt(this,u,1).times(.5),r.s=e.s):t.s<0?(this.precision=u,this.rounding=1,r=this.atan(_e(e,t,u,1)),t=Nt(this,u,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(_e(e,t,u,1)),r}function mf(e){return new this(e).cbrt()}function Df(e){return re(e=new this(e),e.e+1,2)}function gf(e,t,r){return new this(e).clamp(t,r)}function yf(e){if(!e||typeof e!="object")throw Error(kn+"Object expected");var t,r,i,n=e.defaults===!0,u=["precision",1,ur,"rounding",0,8,"toExpNeg",-wr,0,"toExpPos",0,wr,"maxE",0,wr,"minE",-wr,0,"modulo",0,9];for(t=0;t<u.length;t+=3)if(r=u[t],n&&(this[r]=Vi[r]),(i=e[r])!==void 0)if(st(i)===i&&i>=u[t+1]&&i<=u[t+2])this[r]=i;else throw Error(ir+r+": "+i);if(r="crypto",n&&(this[r]=Vi[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(os);else this[r]=!1;else throw Error(ir+r+": "+i);return this}function wf(e){return new this(e).cos()}function Cf(e){return new this(e).cosh()}function ms(e){var t,r,i;function n(u){var l,d,f,h=this;if(!(h instanceof n))return new n(u);if(h.constructor=n,Lu(u)){h.s=u.s,oe?!u.d||u.e>n.maxE?(h.e=NaN,h.d=null):u.e<n.minE?(h.e=0,h.d=[0]):(h.e=u.e,h.d=u.d.slice()):(h.e=u.e,h.d=u.d?u.d.slice():u.d);return}if(f=typeof u,f==="number"){if(u===0){h.s=1/u<0?-1:1,h.e=0,h.d=[0];return}if(u<0?(u=-u,h.s=-1):h.s=1,u===~~u&&u<1e7){for(l=0,d=u;d>=10;d/=10)l++;oe?l>n.maxE?(h.e=NaN,h.d=null):l<n.minE?(h.e=0,h.d=[0]):(h.e=l,h.d=[u]):(h.e=l,h.d=[u]);return}else if(u*0!==0){u||(h.s=NaN),h.e=NaN,h.d=null;return}return Hi(h,u.toString())}else if(f!=="string")throw Error(ir+u);return(d=u.charCodeAt(0))===45?(u=u.slice(1),h.s=-1):(d===43&&(u=u.slice(1)),h.s=1),cs.test(u)?Hi(h,u):uf(h,u)}if(n.prototype=L,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=yf,n.clone=ms,n.isDecimal=Lu,n.abs=sf,n.acos=of,n.acosh=lf,n.add=cf,n.asin=ff,n.asinh=hf,n.atan=df,n.atanh=pf,n.atan2=vf,n.cbrt=mf,n.ceil=Df,n.clamp=gf,n.cos=wf,n.cosh=Cf,n.div=Af,n.exp=Ff,n.floor=Ef,n.hypot=bf,n.ln=Sf,n.log=Nf,n.log10=xf,n.log2=Mf,n.max=Bf,n.min=_f,n.mod=Tf,n.mul=Of,n.pow=Pf,n.random=Rf,n.round=If,n.sign=zf,n.sin=qf,n.sinh=Lf,n.sqrt=Uf,n.sub=$f,n.sum=Vf,n.tan=jf,n.tanh=Qf,n.trunc=Hf,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function Af(e,t){return new this(e).div(t)}function Ff(e){return new this(e).exp()}function Ef(e){return re(e=new this(e),e.e+1,3)}function bf(){var e,t,r=new this(0);for(oe=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return oe=!0,new this(1/0);r=t}return oe=!0,r.sqrt()}function Lu(e){return e instanceof Ur||e&&e.toStringTag===ls||!1}function Sf(e){return new this(e).ln()}function Nf(e,t){return new this(e).log(t)}function Mf(e){return new this(e).log(2)}function xf(e){return new this(e).log(10)}function Bf(){return ds(this,arguments,"lt")}function _f(){return ds(this,arguments,"gt")}function Tf(e,t){return new this(e).mod(t)}function Of(e,t){return new this(e).mul(t)}function Pf(e,t){return new this(e).pow(t)}function Rf(e){var t,r,i,n,u=0,l=new this(1),d=[];if(e===void 0?e=this.precision:pt(e,1,ur),i=Math.ceil(e/ie),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));u<i;)n=t[u],n>=429e7?t[u]=crypto.getRandomValues(new Uint32Array(1))[0]:d[u++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);u<i;)n=t[u]+(t[u+1]<<8)+(t[u+2]<<16)+((t[u+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,u):(d.push(n%1e7),u+=4);u=i/4}else throw Error(os);else for(;u<i;)d[u++]=Math.random()*1e7|0;for(i=d[--u],e%=ie,i&&e&&(n=ke(10,ie-e),d[u]=(i/n|0)*n);d[u]===0;u--)d.pop();if(u<0)r=0,d=[0];else{for(r=-1;d[0]===0;r-=ie)d.shift();for(i=1,n=d[0];n>=10;n/=10)i++;i<ie&&(r-=ie-i)}return l.e=r,l.d=d,l}function If(e){return re(e=new this(e),e.e+1,this.rounding)}function zf(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function qf(e){return new this(e).sin()}function Lf(e){return new this(e).sinh()}function Uf(e){return new this(e).sqrt()}function $f(e,t){return new this(e).sub(t)}function Vf(){var e=0,t=arguments,r=new this(t[e]);for(oe=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return oe=!0,re(r,this.precision,this.rounding)}function jf(e){return new this(e).tan()}function Qf(e){return new this(e).tanh()}function Hf(e){return re(e=new this(e),e.e+1,1)}L[Symbol.for("nodejs.util.inspect.custom")]=L.toString;L[Symbol.toStringTag]="Decimal";var Ur=L.constructor=ms(Vi);zn=new Ur(zn);qn=new Ur(qn);var Wf="BigNumber",Zf=["?on","config"],Gf=J(Wf,Zf,e=>{var{on:t,config:r}=e,i=Ur.clone({precision:r.precision,modulo:Ur.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},t&&t("config",function(n,u){n.precision!==u.precision&&i.config({precision:n.precision})}),i},{isClass:!0}),Ds={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var i=Math.cosh||function(a){return Math.abs(a)<1e-9?1-a:(Math.exp(a)+Math.exp(-a))*.5},n=Math.sinh||function(a){return Math.abs(a)<1e-9?a:(Math.exp(a)-Math.exp(-a))*.5},u=function(a){var o=Math.PI/4;if(-o>a||a>o)return Math.cos(a)-1;var p=a*a;return p*(p*(p*(p*(p*(p*(p*(p/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},l=function(a,o){var p=Math.abs(a),y=Math.abs(o);return p<3e3&&y<3e3?Math.sqrt(p*p+y*y):(p<y?(p=y,y=a/o):y=o/a,p*Math.sqrt(1+y*y))},d=function(){throw SyntaxError("Invalid Param")};function f(a,o){var p=Math.abs(a),y=Math.abs(o);return a===0?Math.log(y):o===0?Math.log(p):p<3e3&&y<3e3?Math.log(a*a+o*o)*.5:(a=a/2,o=o/2,.5*Math.log(a*a+o*o)+Math.LN2)}var h=function(a,o){var p={re:0,im:0};if(a==null)p.re=p.im=0;else if(o!==void 0)p.re=a,p.im=o;else switch(typeof a){case"object":if("im"in a&&"re"in a)p.re=a.re,p.im=a.im;else if("abs"in a&&"arg"in a){if(!Number.isFinite(a.abs)&&Number.isFinite(a.arg))return s.INFINITY;p.re=a.abs*Math.cos(a.arg),p.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!Number.isFinite(a.r)&&Number.isFinite(a.phi))return s.INFINITY;p.re=a.r*Math.cos(a.phi),p.im=a.r*Math.sin(a.phi)}else a.length===2?(p.re=a[0],p.im=a[1]):d();break;case"string":p.im=p.re=0;var y=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),c=1,m=0;y===null&&d();for(var v=0;v<y.length;v++){var g=y[v];g===" "||g==="	"||g===`
`||(g==="+"?c++:g==="-"?m++:g==="i"||g==="I"?(c+m===0&&d(),y[v+1]!==" "&&!isNaN(y[v+1])?(p.im+=parseFloat((m%2?"-":"")+y[v+1]),v++):p.im+=parseFloat((m%2?"-":"")+"1"),c=m=0):((c+m===0||isNaN(g))&&d(),y[v+1]==="i"||y[v+1]==="I"?(p.im+=parseFloat((m%2?"-":"")+g),v++):p.re+=parseFloat((m%2?"-":"")+g),c=m=0))}c+m>0&&d();break;case"number":p.im=0,p.re=a;break;default:d()}return isNaN(p.re)||isNaN(p.im),p};function s(a,o){if(!(this instanceof s))return new s(a,o);var p=h(a,o);this.re=p.re,this.im=p.im}s.prototype={re:0,im:0,sign:function(){var a=this.abs();return new s(this.re/a,this.im/a)},add:function(a,o){var p=new s(a,o);return this.isInfinite()&&p.isInfinite()?s.NAN:this.isInfinite()||p.isInfinite()?s.INFINITY:new s(this.re+p.re,this.im+p.im)},sub:function(a,o){var p=new s(a,o);return this.isInfinite()&&p.isInfinite()?s.NAN:this.isInfinite()||p.isInfinite()?s.INFINITY:new s(this.re-p.re,this.im-p.im)},mul:function(a,o){var p=new s(a,o);return this.isInfinite()&&p.isZero()||this.isZero()&&p.isInfinite()?s.NAN:this.isInfinite()||p.isInfinite()?s.INFINITY:p.im===0&&this.im===0?new s(this.re*p.re,0):new s(this.re*p.re-this.im*p.im,this.re*p.im+this.im*p.re)},div:function(a,o){var p=new s(a,o);if(this.isZero()&&p.isZero()||this.isInfinite()&&p.isInfinite())return s.NAN;if(this.isInfinite()||p.isZero())return s.INFINITY;if(this.isZero()||p.isInfinite())return s.ZERO;a=this.re,o=this.im;var y=p.re,c=p.im,m,v;return c===0?new s(a/y,o/y):Math.abs(y)<Math.abs(c)?(v=y/c,m=y*v+c,new s((a*v+o)/m,(o*v-a)/m)):(v=c/y,m=c*v+y,new s((a+o*v)/m,(o-a*v)/m))},pow:function(a,o){var p=new s(a,o);if(a=this.re,o=this.im,p.isZero())return s.ONE;if(p.im===0){if(o===0&&a>0)return new s(Math.pow(a,p.re),0);if(a===0)switch((p.re%4+4)%4){case 0:return new s(Math.pow(o,p.re),0);case 1:return new s(0,Math.pow(o,p.re));case 2:return new s(-Math.pow(o,p.re),0);case 3:return new s(0,-Math.pow(o,p.re))}}if(a===0&&o===0&&p.re>0&&p.im>=0)return s.ZERO;var y=Math.atan2(o,a),c=f(a,o);return a=Math.exp(p.re*c-p.im*y),o=p.im*c+p.re*y,new s(a*Math.cos(o),a*Math.sin(o))},sqrt:function(){var a=this.re,o=this.im,p=this.abs(),y,c;if(a>=0){if(o===0)return new s(Math.sqrt(a),0);y=.5*Math.sqrt(2*(p+a))}else y=Math.abs(o)/Math.sqrt(2*(p-a));return a<=0?c=.5*Math.sqrt(2*(p-a)):c=Math.abs(o)/Math.sqrt(2*(p+a)),new s(y,o<0?-c:c)},exp:function(){var a=Math.exp(this.re);return this.im,new s(a*Math.cos(this.im),a*Math.sin(this.im))},expm1:function(){var a=this.re,o=this.im;return new s(Math.expm1(a)*Math.cos(o)+u(o),Math.exp(a)*Math.sin(o))},log:function(){var a=this.re,o=this.im;return new s(f(a,o),Math.atan2(o,a))},abs:function(){return l(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var a=this.re,o=this.im;return new s(Math.sin(a)*i(o),Math.cos(a)*n(o))},cos:function(){var a=this.re,o=this.im;return new s(Math.cos(a)*i(o),-Math.sin(a)*n(o))},tan:function(){var a=2*this.re,o=2*this.im,p=Math.cos(a)+i(o);return new s(Math.sin(a)/p,n(o)/p)},cot:function(){var a=2*this.re,o=2*this.im,p=Math.cos(a)-i(o);return new s(-Math.sin(a)/p,n(o)/p)},sec:function(){var a=this.re,o=this.im,p=.5*i(2*o)+.5*Math.cos(2*a);return new s(Math.cos(a)*i(o)/p,Math.sin(a)*n(o)/p)},csc:function(){var a=this.re,o=this.im,p=.5*i(2*o)-.5*Math.cos(2*a);return new s(Math.sin(a)*i(o)/p,-Math.cos(a)*n(o)/p)},asin:function(){var a=this.re,o=this.im,p=new s(o*o-a*a+1,-2*a*o).sqrt(),y=new s(p.re-o,p.im+a).log();return new s(y.im,-y.re)},acos:function(){var a=this.re,o=this.im,p=new s(o*o-a*a+1,-2*a*o).sqrt(),y=new s(p.re-o,p.im+a).log();return new s(Math.PI/2-y.im,y.re)},atan:function(){var a=this.re,o=this.im;if(a===0){if(o===1)return new s(0,1/0);if(o===-1)return new s(0,-1/0)}var p=a*a+(1-o)*(1-o),y=new s((1-o*o-a*a)/p,-2*a/p).log();return new s(-.5*y.im,.5*y.re)},acot:function(){var a=this.re,o=this.im;if(o===0)return new s(Math.atan2(1,a),0);var p=a*a+o*o;return p!==0?new s(a/p,-o/p).atan():new s(a!==0?a/0:0,o!==0?-o/0:0).atan()},asec:function(){var a=this.re,o=this.im;if(a===0&&o===0)return new s(0,1/0);var p=a*a+o*o;return p!==0?new s(a/p,-o/p).acos():new s(a!==0?a/0:0,o!==0?-o/0:0).acos()},acsc:function(){var a=this.re,o=this.im;if(a===0&&o===0)return new s(Math.PI/2,1/0);var p=a*a+o*o;return p!==0?new s(a/p,-o/p).asin():new s(a!==0?a/0:0,o!==0?-o/0:0).asin()},sinh:function(){var a=this.re,o=this.im;return new s(n(a)*Math.cos(o),i(a)*Math.sin(o))},cosh:function(){var a=this.re,o=this.im;return new s(i(a)*Math.cos(o),n(a)*Math.sin(o))},tanh:function(){var a=2*this.re,o=2*this.im,p=i(a)+Math.cos(o);return new s(n(a)/p,Math.sin(o)/p)},coth:function(){var a=2*this.re,o=2*this.im,p=i(a)-Math.cos(o);return new s(n(a)/p,-Math.sin(o)/p)},csch:function(){var a=this.re,o=this.im,p=Math.cos(2*o)-i(2*a);return new s(-2*n(a)*Math.cos(o)/p,2*i(a)*Math.sin(o)/p)},sech:function(){var a=this.re,o=this.im,p=Math.cos(2*o)+i(2*a);return new s(2*i(a)*Math.cos(o)/p,-2*n(a)*Math.sin(o)/p)},asinh:function(){var a=this.im;this.im=-this.re,this.re=a;var o=this.asin();return this.re=-this.im,this.im=a,a=o.re,o.re=-o.im,o.im=a,o},acosh:function(){var a=this.acos();if(a.im<=0){var o=a.re;a.re=-a.im,a.im=o}else{var o=a.im;a.im=-a.re,a.re=o}return a},atanh:function(){var a=this.re,o=this.im,p=a>1&&o===0,y=1-a,c=1+a,m=y*y+o*o,v=m!==0?new s((c*y-o*o)/m,(o*y+c*o)/m):new s(a!==-1?a/0:0,o!==0?o/0:0),g=v.re;return v.re=f(v.re,v.im)/2,v.im=Math.atan2(v.im,g)/2,p&&(v.im=-v.im),v},acoth:function(){var a=this.re,o=this.im;if(a===0&&o===0)return new s(0,Math.PI/2);var p=a*a+o*o;return p!==0?new s(a/p,-o/p).atanh():new s(a!==0?a/0:0,o!==0?-o/0:0).atanh()},acsch:function(){var a=this.re,o=this.im;if(o===0)return new s(a!==0?Math.log(a+Math.sqrt(a*a+1)):1/0,0);var p=a*a+o*o;return p!==0?new s(a/p,-o/p).asinh():new s(a!==0?a/0:0,o!==0?-o/0:0).asinh()},asech:function(){var a=this.re,o=this.im;if(this.isZero())return s.INFINITY;var p=a*a+o*o;return p!==0?new s(a/p,-o/p).acosh():new s(a!==0?a/0:0,o!==0?-o/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var a=this.re,o=this.im,p=a*a+o*o;return new s(a/p,-o/p)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(a){return a=Math.pow(10,a||0),new s(Math.ceil(this.re*a)/a,Math.ceil(this.im*a)/a)},floor:function(a){return a=Math.pow(10,a||0),new s(Math.floor(this.re*a)/a,Math.floor(this.im*a)/a)},round:function(a){return a=Math.pow(10,a||0),new s(Math.round(this.re*a)/a,Math.round(this.im*a)/a)},equals:function(a,o){var p=new s(a,o);return Math.abs(p.re-this.re)<=s.EPSILON&&Math.abs(p.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var a=this.re,o=this.im,p="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<s.EPSILON&&(a=0),Math.abs(o)<s.EPSILON&&(o=0),o===0?p+a:(a!==0?(p+=a,p+=" ",o<0?(o=-o,p+="-"):p+="+",p+=" "):o<0&&(o=-o,p+="-"),o!==1&&(p+=o),p+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Complex=s,e.exports=s})()})(Ds);var kf=Ds.exports;const et=Wi(kf);var Kf="Complex",Jf=[],Xf=J(Kf,Jf,()=>(Object.defineProperty(et,"name",{value:"Complex"}),et.prototype.constructor=et,et.prototype.type="Complex",et.prototype.isComplex=!0,et.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},et.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},et.prototype.format=function(e){var t="",r=this.im,i=this.re,n=qi(this.re,e),u=qi(this.im,e),l=Ie(e)?e:e?e.precision:null;if(l!==null){var d=Math.pow(10,-l);Math.abs(i/r)<d&&(i=0),Math.abs(r/i)<d&&(r=0)}return r===0?t=n:i===0?r===1?t="i":r===-1?t="-i":t=u+"i":r<0?r===-1?t=n+" - i":t=n+" - "+u.substring(1)+"i":r===1?t=n+" + i":t=n+" + "+u+"i",t},et.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return et(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],i=arguments[1];if(Ie(r)){if(ja(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),Ie(i))return new et({r,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},et.prototype.valueOf=et.prototype.toString,et.fromJSON=function(e){return new et(e)},et.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},et),{isClass:!0}),gs={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var i=2e3,n={s:1,n:0,d:1};function u(v,g){if(isNaN(v=parseInt(v,10)))throw c();return v*g}function l(v,g){if(g===0)throw y();var D=Object.create(p.prototype);D.s=v<0?-1:1,v=v<0?-v:v;var A=o(v,g);return D.n=v/A,D.d=g/A,D}function d(v){for(var g={},D=v,A=2,w=4;w<=D;){for(;D%A===0;)D/=A,g[A]=(g[A]||0)+1;w+=1+2*A++}return D!==v?D>1&&(g[D]=(g[D]||0)+1):g[v]=(g[v]||0)+1,g}var f=function(v,g){var D=0,A=1,w=1,C=0,b=0,E=0,S=1,T=1,x=0,P=1,H=1,B=1,R=1e7,O;if(v!=null)if(g!==void 0){if(D=v,A=g,w=D*A,D%1!==0||A%1!==0)throw m()}else switch(typeof v){case"object":{if("d"in v&&"n"in v)D=v.n,A=v.d,"s"in v&&(D*=v.s);else if(0 in v)D=v[0],1 in v&&(A=v[1]);else throw c();w=D*A;break}case"number":{if(v<0&&(w=v,v=-v),v%1===0)D=v;else if(v>0){for(v>=1&&(T=Math.pow(10,Math.floor(1+Math.log(v)/Math.LN10)),v/=T);P<=R&&B<=R;)if(O=(x+H)/(P+B),v===O){P+B<=R?(D=x+H,A=P+B):B>P?(D=H,A=B):(D=x,A=P);break}else v>O?(x+=H,P+=B):(H+=x,B+=P),P>R?(D=H,A=B):(D=x,A=P);D*=T}else(isNaN(v)||isNaN(g))&&(A=D=NaN);break}case"string":{if(P=v.match(/\d+|./g),P===null)throw c();if(P[x]==="-"?(w=-1,x++):P[x]==="+"&&x++,P.length===x+1?b=u(P[x++],w):P[x+1]==="."||P[x]==="."?(P[x]!=="."&&(C=u(P[x++],w)),x++,(x+1===P.length||P[x+1]==="("&&P[x+3]===")"||P[x+1]==="'"&&P[x+3]==="'")&&(b=u(P[x],w),S=Math.pow(10,P[x].length),x++),(P[x]==="("&&P[x+2]===")"||P[x]==="'"&&P[x+2]==="'")&&(E=u(P[x+1],w),T=Math.pow(10,P[x+1].length)-1,x+=3)):P[x+1]==="/"||P[x+1]===":"?(b=u(P[x],w),S=u(P[x+2],1),x+=3):P[x+3]==="/"&&P[x+1]===" "&&(C=u(P[x],w),b=u(P[x+2],w),S=u(P[x+4],1),x+=5),P.length<=x){A=S*T,w=D=E+A*C+T*b;break}}default:throw c()}if(A===0)throw y();n.s=w<0?-1:1,n.n=Math.abs(D),n.d=Math.abs(A)};function h(v,g,D){for(var A=1;g>0;v=v*v%D,g>>=1)g&1&&(A=A*v%D);return A}function s(v,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var D=10%g,A=1;D!==1;A++)if(D=D*10%g,A>i)return 0;return A}function a(v,g,D){for(var A=1,w=h(10,D,g),C=0;C<300;C++){if(A===w)return C;A=A*10%g,w=w*10%g}return 0}function o(v,g){if(!v)return g;if(!g)return v;for(;;){if(v%=g,!v)return g;if(g%=v,!g)return v}}function p(v,g){if(f(v,g),this instanceof p)v=o(n.d,n.n),this.s=n.s,this.n=n.n/v,this.d=n.d/v;else return l(n.s*n.n,n.d)}var y=function(){return new Error("Division by Zero")},c=function(){return new Error("Invalid argument")},m=function(){return new Error("Parameters must be integer")};p.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(v,g){return f(v,g),l(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(v,g){return f(v,g),l(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(v,g){return f(v,g),l(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(v,g){return f(v,g),l(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(v,g){if(isNaN(this.n)||isNaN(this.d))return new p(NaN);if(v===void 0)return l(this.s*this.n%this.d,1);if(f(v,g),n.n===0&&this.d===0)throw y();return l(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(v,g){return f(v,g),l(o(n.n,this.n)*o(n.d,this.d),n.d*this.d)},lcm:function(v,g){return f(v,g),n.n===0&&this.n===0?l(0,1):l(n.n*this.n,o(n.n,this.n)*o(n.d,this.d))},ceil:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):l(Math.ceil(v*this.s*this.n/this.d),v)},floor:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):l(Math.floor(v*this.s*this.n/this.d),v)},round:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):l(Math.round(v*this.s*this.n/this.d),v)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(v,g){if(f(v,g),n.d===1)return n.s<0?l(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):l(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var D=d(this.n),A=d(this.d),w=1,C=1;for(var b in D)if(b!=="1"){if(b==="0"){w=0;break}if(D[b]*=n.n,D[b]%n.d===0)D[b]/=n.d;else return null;w*=Math.pow(b,D[b])}for(var b in A)if(b!=="1"){if(A[b]*=n.n,A[b]%n.d===0)A[b]/=n.d;else return null;C*=Math.pow(b,A[b])}return n.s<0?l(C,w):l(w,C)},equals:function(v,g){return f(v,g),this.s*this.n*n.d===n.s*n.n*this.d},compare:function(v,g){f(v,g);var D=this.s*this.n*n.d-n.s*n.n*this.d;return(0<D)-(D<0)},simplify:function(v){if(isNaN(this.n)||isNaN(this.d))return this;v=v||.001;for(var g=this.abs(),D=g.toContinued(),A=1;A<D.length;A++){for(var w=l(D[A-1],1),C=A-2;C>=0;C--)w=w.inverse().add(D[C]);if(Math.abs(w.sub(g).valueOf())<v)return w.mul(this.s)}return this},divisible:function(v,g){return f(v,g),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(v){var g,D="",A=this.n,w=this.d;return this.s<0&&(D+="-"),w===1?D+=A:(v&&(g=Math.floor(A/w))>0&&(D+=g,D+=" ",A%=w),D+=A,D+="/",D+=w),D},toLatex:function(v){var g,D="",A=this.n,w=this.d;return this.s<0&&(D+="-"),w===1?D+=A:(v&&(g=Math.floor(A/w))>0&&(D+=g,A%=w),D+="\\frac{",D+=A,D+="}{",D+=w,D+="}"),D},toContinued:function(){var v,g=this.n,D=this.d,A=[];if(isNaN(g)||isNaN(D))return A;do A.push(Math.floor(g/D)),v=g%D,g=D,D=v;while(g!==1);return A},toString:function(v){var g=this.n,D=this.d;if(isNaN(g)||isNaN(D))return"NaN";v=v||15;var A=s(g,D),w=a(g,D,A),C=this.s<0?"-":"";if(C+=g/D|0,g%=D,g*=10,g&&(C+="."),A){for(var b=w;b--;)C+=g/D|0,g%=D,g*=10;C+="(";for(var b=A;b--;)C+=g/D|0,g%=D,g*=10;C+=")"}else for(var b=v;g&&b--;)C+=g/D|0,g%=D,g*=10;return C}},Object.defineProperty(p,"__esModule",{value:!0}),p.default=p,p.Fraction=p,e.exports=p})()})(gs);var Yf=gs.exports;const Lt=Wi(Yf);var eh="Fraction",th=[],rh=J(eh,th,()=>(Object.defineProperty(Lt,"name",{value:"Fraction"}),Lt.prototype.constructor=Lt,Lt.prototype.type="Fraction",Lt.prototype.isFraction=!0,Lt.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Lt.fromJSON=function(e){return new Lt(e)},Lt),{isClass:!0}),nh="Matrix",ih=[],uh=J(nh,ih,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,i){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,i){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function ys(e){return Object.keys(e.signatures||{}).reduce(function(t,r){var i=(r.match(/,/g)||[]).length+1;return Math.max(t,i)},-1)}var ah="DenseMatrix",sh=["Matrix"],oh=J(ah,sh,e=>{var{Matrix:t}=e;function r(s,a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!zt(a))throw new Error("Invalid datatype: "+a);if(ze(s))s.type==="DenseMatrix"?(this._data=Qe(s._data),this._size=Qe(s._size),this._datatype=a||s._datatype):(this._data=s.toArray(),this._size=s.size(),this._datatype=a||s._datatype);else if(s&&Ue(s.data)&&Ue(s.size))this._data=s.data,this._size=s.size,Ru(this._data,this._size),this._datatype=a||s.datatype;else if(Ue(s))this._data=h(s),this._size=ft(this._data),Ru(this._data,this._size),this._datatype=a;else{if(s)throw new TypeError("Unsupported type of data ("+Mt(s)+")");this._data=[],this._size=[0],this._datatype=a}}r.prototype=new t,r.prototype.createDenseMatrix=function(s,a){return new r(s,a)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Rn(this._data,Mt)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(s,a){return new r(s,a)},r.prototype.subset=function(s,a,o){switch(arguments.length){case 1:return i(this,s);case 2:case 3:return u(this,s,a,o);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(s){if(!Ue(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new be(s.length,this._size.length);for(var a=0;a<s.length;a++)$e(s[a],this._size[a]);for(var o=this._data,p=0,y=s.length;p<y;p++){var c=s[p];$e(c,o.length),o=o[c]}return o},r.prototype.set=function(s,a,o){if(!Ue(s))throw new TypeError("Array expected");if(s.length<this._size.length)throw new be(s.length,this._size.length,"<");var p,y,c,m=s.map(function(g){return g+1});f(this,m,o);var v=this._data;for(p=0,y=s.length-1;p<y;p++)c=s[p],$e(c,v.length),v=v[c];return c=s[s.length-1],$e(c,v.length),v[c]=a,this};function i(s,a){if(!Ji(a))throw new TypeError("Invalid index");var o=a.isScalar();if(o)return s.get(a.min());var p=a.size();if(p.length!==s._size.length)throw new be(p.length,s._size.length);for(var y=a.min(),c=a.max(),m=0,v=s._size.length;m<v;m++)$e(y[m],s._size[m]),$e(c[m],s._size[m]);return new r(n(s._data,a,p.length,0),s._datatype)}function n(s,a,o,p){var y=p===o-1,c=a.dimension(p);return y?c.map(function(m){return $e(m,s.length),s[m]}).valueOf():c.map(function(m){$e(m,s.length);var v=s[m];return n(v,a,o,p+1)}).valueOf()}function u(s,a,o,p){if(!a||a.isIndex!==!0)throw new TypeError("Invalid index");var y=a.size(),c=a.isScalar(),m;if(ze(o)?(m=o.size(),o=o.valueOf()):m=ft(o),c){if(m.length!==0)throw new TypeError("Scalar expected");s.set(a.min(),o,p)}else{if(!qr(m,y))try{m.length===0?o=Iu([o],y):o=Iu(o,y),m=ft(o)}catch{}if(y.length<s._size.length)throw new be(y.length,s._size.length,"<");if(m.length<y.length){for(var v=0,g=0;y[v]===1&&m[v]===1;)v++;for(;y[v]===1;)g++,v++;o=Xa(o,y.length,g,m)}if(!qr(y,m))throw new be(y,m,">");var D=a.max().map(function(C){return C+1});f(s,D,p);var A=y.length,w=0;l(s._data,a,o,A,w)}return s}function l(s,a,o,p,y){var c=y===p-1,m=a.dimension(y);c?m.forEach(function(v,g){$e(v),s[v]=o[g[0]]}):m.forEach(function(v,g){$e(v),l(s[v],a,o[g[0]],p,y+1)})}r.prototype.resize=function(s,a,o){if(!zr(s))throw new TypeError("Array or Matrix expected");var p=s.valueOf().map(c=>Array.isArray(c)&&c.length===1?c[0]:c),y=o?this.clone():this;return d(y,p,a)};function d(s,a,o){if(a.length===0){for(var p=s._data;Ue(p);)p=p[0];return p}return s._size=a.slice(0),s._data=Li(s._data,s._size,o),s}r.prototype.reshape=function(s,a){var o=a?this.clone():this;o._data=Ka(o._data,s);var p=o._size.reduce((y,c)=>y*c);return o._size=Xi(s,p),o};function f(s,a,o){for(var p=s._size.slice(0),y=!1;p.length<a.length;)p.push(0),y=!0;for(var c=0,m=a.length;c<m;c++)a[c]>p[c]&&(p[c]=a[c],y=!0);y&&d(s,p,o)}r.prototype.clone=function(){var s=new r({data:Qe(this._data),size:Qe(this._size),datatype:this._datatype});return s},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(s){var a=this,o=ys(s),p=function m(v,g){return Ue(v)?v.map(function(D,A){return m(D,g.concat(A))}):o===1?s(v):o===2?s(v,g):s(v,g,a)},y=p(this._data,[]),c=this._datatype!==void 0?Rn(y,Mt):void 0;return new r(y,c)},r.prototype.forEach=function(s){var a=this,o=function p(y,c){Ue(y)?y.forEach(function(m,v){p(m,c.concat(v))}):s(y,c,a)};o(this._data,[])},r.prototype[Symbol.iterator]=function*(){var s=function*a(o,p){if(Ue(o))for(var y=0;y<o.length;y++)yield*a(o[y],p.concat(y));else yield{value:o,index:p}};yield*s(this._data,[])},r.prototype.rows=function(){var s=[],a=this.size();if(a.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var o=this._data;for(var p of o)s.push(new r([p],this._datatype));return s},r.prototype.columns=function(){var s=this,a=[],o=this.size();if(o.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,y=function(v){var g=p.map(D=>[D[v]]);a.push(new r(g,s._datatype))},c=0;c<o[1];c++)y(c);return a},r.prototype.toArray=function(){return Qe(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(s){return Ge(this._data,s)},r.prototype.toString=function(){return Ge(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(s){if(s){if(Je(s)&&(s=s.toNumber()),!Ie(s)||!We(s))throw new TypeError("The parameter k must be an integer number")}else s=0;for(var a=s>0?s:0,o=s<0?-s:0,p=this._size[0],y=this._size[1],c=Math.min(p-o,y-a),m=[],v=0;v<c;v++)m[v]=this._data[v+o][v+a];return new r({data:m,size:[c],datatype:this._datatype})},r.diagonal=function(s,a,o,p){if(!Ue(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(b){if(Je(b)&&(b=b.toNumber()),!Ie(b)||!We(b)||b<1)throw new Error("Size values must be positive integers");return b}),o){if(Je(o)&&(o=o.toNumber()),!Ie(o)||!We(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var y=o>0?o:0,c=o<0?-o:0,m=s[0],v=s[1],g=Math.min(m-c,v-y),D;if(Ue(a)){if(a.length!==g)throw new Error("Invalid value array length");D=function(E){return a[E]}}else if(ze(a)){var A=a.size();if(A.length!==1||A[0]!==g)throw new Error("Invalid matrix length");D=function(E){return a.get([E])}}else D=function(){return a};p||(p=Je(D(0))?D(0).mul(0):0);var w=[];if(s.length>0){w=Li(w,s,p);for(var C=0;C<g;C++)w[C+c][C+y]=D(C)}return new r({data:w,size:[m,v]})},r.fromJSON=function(s){return new r(s)},r.prototype.swapRows=function(s,a){if(!Ie(s)||!We(s)||!Ie(a)||!We(a))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $e(s,this._size[0]),$e(a,this._size[0]),r._swapRows(s,a,this._data),this},r._swapRows=function(s,a,o){var p=o[s];o[s]=o[a],o[a]=p};function h(s){return ze(s)?h(s.valueOf()):Ue(s)?s.map(h):s}return r},{isClass:!0});function lh(e){var t=e.length,r=e[0].length,i,n,u=[];for(n=0;n<r;n++){var l=[];for(i=0;i<t;i++)l.push(e[i][n]);u.push(l)}return u}function Xn(e){for(var t=0;t<e.length;t++)if(zr(e[t]))return!0;return!1}function $r(e,t){ze(e)&&(e=e.valueOf());for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?$r(n,t):t(n)}}function Bt(e,t,r){return e&&typeof e.map=="function"?e.map(function(i){return Bt(i,t)}):t(e)}function eu(e,t,r){var i=Array.isArray(e)?ft(e):e.size();if(t<0||t>=i.length)throw new jt(t,i.length);return ze(e)?e.create(Un(e.valueOf(),t,r)):Un(e,t,r)}function Un(e,t,r){var i,n,u,l;if(t<=0)if(Array.isArray(e[0])){for(l=lh(e),n=[],i=0;i<l.length;i++)n[i]=Un(l[i],t-1,r);return n}else{for(u=e[0],i=1;i<e.length;i++)u=r(u,e[i]);return u}else{for(n=[],i=0;i<e.length;i++)n[i]=Un(e[i],t-1,r);return n}}var Uu="isInteger",ch=["typed"],fh=J(Uu,ch,e=>{var{typed:t}=e;return t(Uu,{number:We,BigNumber:function(i){return i.isInt()},Fraction:function(i){return i.d===1&&isFinite(i.n)},"Array | Matrix":t.referToSelf(r=>i=>Bt(i,r))})}),ws="number",tu="number, number";function Cs(e){return Math.abs(e)}Cs.signature=ws;function As(e,t){return e+t}As.signature=tu;function Fs(e,t){return e-t}Fs.signature=tu;function Es(e,t){return e*t}Es.signature=tu;function bs(e){return-e}bs.signature=ws;var Ss="number";function Ns(e){return e===0}Ns.signature=Ss;function Ms(e){return Number.isNaN(e)}Ms.signature=Ss;var $u="isNumeric",hh=["typed"],dh=J($u,hh,e=>{var{typed:t}=e;return t($u,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":t.referToSelf(r=>i=>Bt(i,r))})}),Vu="isZero",ph=["typed"],vh=J(Vu,ph,e=>{var{typed:t}=e;return t(Vu,{number:Ns,BigNumber:function(i){return i.isZero()},Complex:function(i){return i.re===0&&i.im===0},Fraction:function(i){return i.d===1&&i.n===0},Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>Bt(i,r))})}),ju="isNaN",mh=["typed"],Dh=J(ju,mh,e=>{var{typed:t}=e;return t(ju,{number:Ms,BigNumber:function(i){return i.isNaN()},Fraction:function(i){return!1},Complex:function(i){return i.isNaN()},Unit:function(i){return Number.isNaN(i.value)},"Array | Matrix":function(i){return Bt(i,Number.isNaN)}})});function Yn(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var i=e.minus(t).abs();if(i.isZero())return!0;var n=e.constructor.max(e.abs(),t.abs());return i.lte(n.times(r))}return!1}function gh(e,t,r){return mr(e.re,t.re,r)&&mr(e.im,t.im,r)}var ei=J("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(i,n)=>{if(!i.equalBase(n))throw new Error("Cannot compare units with different base");return t.find(r,[i.valueType(),n.valueType()])(i.value,n.value)})}}),$n="equalScalar",yh=["typed","config"],wh=J($n,yh,e=>{var{typed:t,config:r}=e,i=ei({typed:t});return t($n,{"boolean, boolean":function(u,l){return u===l},"number, number":function(u,l){return mr(u,l,r.epsilon)},"BigNumber, BigNumber":function(u,l){return u.eq(l)||Yn(u,l,r.epsilon)},"Fraction, Fraction":function(u,l){return u.equals(l)},"Complex, Complex":function(u,l){return gh(u,l,r.epsilon)}},i)});J($n,["typed","config"],e=>{var{typed:t,config:r}=e;return t($n,{"number, number":function(n,u){return mr(n,u,r.epsilon)}})});var Ch="SparseMatrix",Ah=["typed","equalScalar","Matrix"],Fh=J(Ch,Ah,e=>{var{typed:t,equalScalar:r,Matrix:i}=e;function n(c,m){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!zt(m))throw new Error("Invalid datatype: "+m);if(ze(c))u(this,c,m);else if(c&&Ue(c.index)&&Ue(c.ptr)&&Ue(c.size))this._values=c.values,this._index=c.index,this._ptr=c.ptr,this._size=c.size,this._datatype=m||c.datatype;else if(Ue(c))l(this,c,m);else{if(c)throw new TypeError("Unsupported type of data ("+Mt(c)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function u(c,m,v){m.type==="SparseMatrix"?(c._values=m._values?Qe(m._values):void 0,c._index=Qe(m._index),c._ptr=Qe(m._ptr),c._size=Qe(m._size),c._datatype=v||m._datatype):l(c,m.valueOf(),v||m._datatype)}function l(c,m,v){c._values=[],c._index=[],c._ptr=[],c._datatype=v;var g=m.length,D=0,A=r,w=0;if(zt(v)&&(A=t.find(r,[v,v])||r,w=t.convert(0,v)),g>0){var C=0;do{c._ptr.push(c._index.length);for(var b=0;b<g;b++){var E=m[b];if(Ue(E)){if(C===0&&D<E.length&&(D=E.length),C<E.length){var S=E[C];A(S,w)||(c._values.push(S),c._index.push(b))}}else C===0&&D<1&&(D=1),A(E,w)||(c._values.push(E),c._index.push(b))}C++}while(C<D)}c._ptr.push(c._index.length),c._size=[g,D]}n.prototype=new i,n.prototype.createSparseMatrix=function(c,m){return new n(c,m)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return Rn(this._values,Mt)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,m){return new n(c,m)},n.prototype.density=function(){var c=this._size[0],m=this._size[1];return c!==0&&m!==0?this._index.length/(c*m):0},n.prototype.subset=function(c,m,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return d(this,c);case 2:case 3:return f(this,c,m,v);default:throw new SyntaxError("Wrong number of arguments")}};function d(c,m){if(!Ji(m))throw new TypeError("Invalid index");var v=m.isScalar();if(v)return c.get(m.min());var g=m.size();if(g.length!==c._size.length)throw new be(g.length,c._size.length);var D,A,w,C,b=m.min(),E=m.max();for(D=0,A=c._size.length;D<A;D++)$e(b[D],c._size[D]),$e(E[D],c._size[D]);var S=c._values,T=c._index,x=c._ptr,P=m.dimension(0),H=m.dimension(1),B=[],R=[];P.forEach(function(K,ue){R[K]=ue[0],B[K]=!0});var O=S?[]:void 0,Y=[],k=[];return H.forEach(function(K){for(k.push(Y.length),w=x[K],C=x[K+1];w<C;w++)D=T[w],B[D]===!0&&(Y.push(R[D]),O&&O.push(S[w]))}),k.push(Y.length),new n({values:O,index:Y,ptr:k,size:g,datatype:c._datatype})}function f(c,m,v,g){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var D=m.size(),A=m.isScalar(),w;if(ze(v)?(w=v.size(),v=v.toArray()):w=ft(v),A){if(w.length!==0)throw new TypeError("Scalar expected");c.set(m.min(),v,g)}else{if(D.length!==1&&D.length!==2)throw new be(D.length,c._size.length,"<");if(w.length<D.length){for(var C=0,b=0;D[C]===1&&w[C]===1;)C++;for(;D[C]===1;)b++,C++;v=Xa(v,D.length,b,w)}if(!qr(D,w))throw new be(D,w,">");if(D.length===1){var E=m.dimension(0);E.forEach(function(x,P){$e(x),c.set([x,0],v[P[0]],g)})}else{var S=m.dimension(0),T=m.dimension(1);S.forEach(function(x,P){$e(x),T.forEach(function(H,B){$e(H),c.set([x,H],v[P[0]][B[0]],g)})})}}return c}n.prototype.get=function(c){if(!Ue(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new be(c.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=c[0],v=c[1];$e(m,this._size[0]),$e(v,this._size[1]);var g=h(m,this._ptr[v],this._ptr[v+1],this._index);return g<this._ptr[v+1]&&this._index[g]===m?this._values[g]:0},n.prototype.set=function(c,m,v){if(!Ue(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new be(c.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var g=c[0],D=c[1],A=this._size[0],w=this._size[1],C=r,b=0;zt(this._datatype)&&(C=t.find(r,[this._datatype,this._datatype])||r,b=t.convert(0,this._datatype)),(g>A-1||D>w-1)&&(o(this,Math.max(g+1,A),Math.max(D+1,w),v),A=this._size[0],w=this._size[1]),$e(g,A),$e(D,w);var E=h(g,this._ptr[D],this._ptr[D+1],this._index);return E<this._ptr[D+1]&&this._index[E]===g?C(m,b)?s(E,D,this._values,this._index,this._ptr):this._values[E]=m:C(m,b)||a(E,g,D,m,this._values,this._index,this._ptr),this};function h(c,m,v,g){if(v-m===0)return v;for(var D=m;D<v;D++)if(g[D]===c)return D;return m}function s(c,m,v,g,D){v.splice(c,1),g.splice(c,1);for(var A=m+1;A<D.length;A++)D[A]--}function a(c,m,v,g,D,A,w){D.splice(c,0,g),A.splice(c,0,m);for(var C=v+1;C<w.length;C++)w[C]++}n.prototype.resize=function(c,m,v){if(!zr(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(g.length!==2)throw new Error("Only two dimensions matrix are supported");g.forEach(function(A){if(!Ie(A)||!We(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ge(g)+")")});var D=v?this.clone():this;return o(D,g[0],g[1],m)};function o(c,m,v,g){var D=g||0,A=r,w=0;zt(c._datatype)&&(A=t.find(r,[c._datatype,c._datatype])||r,w=t.convert(0,c._datatype),D=t.convert(D,c._datatype));var C=!A(D,w),b=c._size[0],E=c._size[1],S,T,x;if(v>E){for(T=E;T<v;T++)if(c._ptr[T]=c._values.length,C)for(S=0;S<b;S++)c._values.push(D),c._index.push(S);c._ptr[v]=c._values.length}else v<E&&(c._ptr.splice(v+1,E-v),c._values.splice(c._ptr[v],c._values.length),c._index.splice(c._ptr[v],c._index.length));if(E=v,m>b){if(C){var P=0;for(T=0;T<E;T++){c._ptr[T]=c._ptr[T]+P,x=c._ptr[T+1]+P;var H=0;for(S=b;S<m;S++,H++)c._values.splice(x+H,0,D),c._index.splice(x+H,0,S),P++}c._ptr[E]=c._values.length}}else if(m<b){var B=0;for(T=0;T<E;T++){c._ptr[T]=c._ptr[T]-B;var R=c._ptr[T],O=c._ptr[T+1]-B;for(x=R;x<O;x++)S=c._index[x],S>m-1&&(c._values.splice(x,1),c._index.splice(x,1),B++)}c._ptr[T]=c._values.length}return c._size[0]=m,c._size[1]=v,c}n.prototype.reshape=function(c,m){if(!Ue(c))throw new TypeError("Array expected");if(c.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");c.forEach(function(K){if(!Ie(K)||!We(K)||K<=-2||K===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ge(c)+")")});var v=this._size[0]*this._size[1];c=Xi(c,v);var g=c[0]*c[1];if(v!==g)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var D=m?this.clone():this;if(this._size[0]===c[0]&&this._size[1]===c[1])return D;for(var A=[],w=0;w<D._ptr.length;w++)for(var C=0;C<D._ptr[w+1]-D._ptr[w];C++)A.push(w);for(var b=D._values.slice(),E=D._index.slice(),S=0;S<D._index.length;S++){var T=E[S],x=A[S],P=T*D._size[1]+x;A[S]=P%c[1],E[S]=Math.floor(P/c[1])}D._values.length=0,D._index.length=0,D._ptr.length=c[1]+1,D._size=c.slice();for(var H=0;H<D._ptr.length;H++)D._ptr[H]=0;for(var B=0;B<b.length;B++){var R=E[B],O=A[B],Y=b[B],k=h(R,D._ptr[O],D._ptr[O+1],D._index);a(k,R,O,Y,D._values,D._index,D._ptr)}return D},n.prototype.clone=function(){var c=new n({values:this._values?Qe(this._values):void 0,index:Qe(this._index),ptr:Qe(this._ptr),size:Qe(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,g=this._size[0],D=this._size[1],A=ys(c),w=function(b,E,S){return A===1?c(b):A===2?c(b,[E,S]):c(b,[E,S],v)};return p(this,0,g-1,0,D-1,w,m)};function p(c,m,v,g,D,A,w){var C=[],b=[],E=[],S=r,T=0;zt(c._datatype)&&(S=t.find(r,[c._datatype,c._datatype])||r,T=t.convert(0,c._datatype));for(var x=function(ce,qe,Te){ce=A(ce,qe,Te),S(ce,T)||(C.push(ce),b.push(qe))},P=g;P<=D;P++){E.push(C.length);var H=c._ptr[P],B=c._ptr[P+1];if(w)for(var R=H;R<B;R++){var O=c._index[R];O>=m&&O<=v&&x(c._values[R],O-m,P-g)}else{for(var Y={},k=H;k<B;k++){var K=c._index[k];Y[K]=c._values[k]}for(var ue=m;ue<=v;ue++){var de=ue in Y?Y[ue]:0;x(de,ue-m,P-g)}}}return E.push(C.length),new n({values:C,index:b,ptr:E,size:[v-m+1,D-g+1]})}n.prototype.forEach=function(c,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,g=this._size[0],D=this._size[1],A=0;A<D;A++){var w=this._ptr[A],C=this._ptr[A+1];if(m)for(var b=w;b<C;b++){var E=this._index[b];c(this._values[b],[E,A],v)}else{for(var S={},T=w;T<C;T++){var x=this._index[T];S[x]=this._values[T]}for(var P=0;P<g;P++){var H=P in S?S[P]:0;c(H,[P,A],v)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var c=this._size[1],m=0;m<c;m++)for(var v=this._ptr[m],g=this._ptr[m+1],D=v;D<g;D++){var A=this._index[D];yield{value:this._values[D],index:[A,m]}}},n.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)};function y(c,m,v,g,D){var A=g[0],w=g[1],C=[],b,E;for(b=0;b<A;b++)for(C[b]=[],E=0;E<w;E++)C[b][E]=0;for(E=0;E<w;E++)for(var S=v[E],T=v[E+1],x=S;x<T;x++)b=m[x],C[b][E]=c?D?Qe(c[x]):c[x]:1;return C}return n.prototype.format=function(c){for(var m=this._size[0],v=this._size[1],g=this.density(),D="Sparse Matrix ["+Ge(m,c)+" x "+Ge(v,c)+"] density: "+Ge(g,c)+`
`,A=0;A<v;A++)for(var w=this._ptr[A],C=this._ptr[A+1],b=w;b<C;b++){var E=this._index[b];D+=`
    (`+Ge(E,c)+", "+Ge(A,c)+") ==> "+(this._values?Ge(this._values[b],c):"X")}return D},n.prototype.toString=function(){return Ge(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Je(c)&&(c=c.toNumber()),!Ie(c)||!We(c))throw new TypeError("The parameter k must be an integer number")}else c=0;var m=c>0?c:0,v=c<0?-c:0,g=this._size[0],D=this._size[1],A=Math.min(g-v,D-m),w=[],C=[],b=[];b[0]=0;for(var E=m;E<D&&w.length<A;E++)for(var S=this._ptr[E],T=this._ptr[E+1],x=S;x<T;x++){var P=this._index[x];if(P===E-m+v){w.push(this._values[x]),C[w.length-1]=P-v;break}}return b.push(w.length),new n({values:w,index:C,ptr:b,size:[A,1]})},n.fromJSON=function(c){return new n(c)},n.diagonal=function(c,m,v,g,D){if(!Ue(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(K){if(Je(K)&&(K=K.toNumber()),!Ie(K)||!We(K)||K<1)throw new Error("Size values must be positive integers");return K}),v){if(Je(v)&&(v=v.toNumber()),!Ie(v)||!We(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var A=r,w=0;zt(D)&&(A=t.find(r,[D,D])||r,w=t.convert(0,D));var C=v>0?v:0,b=v<0?-v:0,E=c[0],S=c[1],T=Math.min(E-b,S-C),x;if(Ue(m)){if(m.length!==T)throw new Error("Invalid value array length");x=function(ue){return m[ue]}}else if(ze(m)){var P=m.size();if(P.length!==1||P[0]!==T)throw new Error("Invalid matrix length");x=function(ue){return m.get([ue])}}else x=function(){return m};for(var H=[],B=[],R=[],O=0;O<S;O++){R.push(H.length);var Y=O-C;if(Y>=0&&Y<T){var k=x(Y);A(k,w)||(B.push(Y+b),H.push(k))}}return R.push(H.length),new n({values:H,index:B,ptr:R,size:[E,S]})},n.prototype.swapRows=function(c,m){if(!Ie(c)||!We(c)||!Ie(m)||!We(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $e(c,this._size[0]),$e(m,this._size[0]),n._swapRows(c,m,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(c,m,v,g,D){for(var A=g[c],w=g[c+1],C=A;C<w;C++)D(v[C],m[C])},n._swapRows=function(c,m,v,g,D,A){for(var w=0;w<v;w++){var C=A[w],b=A[w+1],E=h(c,C,b,D),S=h(m,C,b,D);if(E<b&&S<b&&D[E]===c&&D[S]===m){if(g){var T=g[E];g[E]=g[S],g[S]=T}continue}if(E<b&&D[E]===c&&(S>=b||D[S]!==m)){var x=g?g[E]:void 0;D.splice(S,0,m),g&&g.splice(S,0,x),D.splice(S<=E?E+1:E,1),g&&g.splice(S<=E?E+1:E,1);continue}if(S<b&&D[S]===m&&(E>=b||D[E]!==c)){var P=g?g[S]:void 0;D.splice(E,0,c),g&&g.splice(E,0,P),D.splice(E<=S?S+1:S,1),g&&g.splice(E<=S?S+1:S,1)}}},n},{isClass:!0}),Eh="number",bh=["typed"];function Sh(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],i=t[2],n=t[3];return{input:e,radix:r,integerPart:i,fractionalPart:n}}else return null}function Nh(e){for(var t=parseInt(e.integerPart,e.radix),r=0,i=0;i<e.fractionalPart.length;i++){var n=parseInt(e.fractionalPart[i],e.radix);r+=n/Math.pow(e.radix,i+1)}var u=t+r;if(isNaN(u))throw new SyntaxError('String "'+e.input+'" is no valid number');return u}var Mh=J(Eh,bh,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var u=Sh(n);if(u)return Nh(u);var l=0,d=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);d&&(l=Number(d[2]),n=d[1]);var f=Number(n);if(isNaN(f))throw new SyntaxError('String "'+n+'" is no valid number');if(d){if(f>2**l-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));f>=2**(l-1)&&(f=f-2**l)}return f},BigNumber:function(n){return n.toNumber()},Fraction:function(n){return n.valueOf()},Unit:t.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),null:function(n){return 0},"Unit, string | Unit":function(n,u){return n.toNumber(u)},"Array | Matrix":t.referToSelf(i=>n=>Bt(n,i))});return r.fromJSON=function(i){return parseFloat(i.value)},r}),xh="bignumber",Bh=["typed","BigNumber"],_h=J(xh,Bh,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(n){return new r(n+"")},string:function(n){var u=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(u){var l=u[2],d=r(u[1]),f=new r(2).pow(Number(l));if(d.gt(f.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var h=new r(2).pow(Number(l)-1);return d.gte(h)?d.sub(f):d}return new r(n)},BigNumber:function(n){return n},Unit:t.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),Fraction:function(n){return new r(n.n).div(n.d).times(n.s)},null:function(n){return new r(0)},"Array | Matrix":t.referToSelf(i=>n=>Bt(n,i))})}),Th="fraction",Oh=["typed","Fraction"],Ph=J(Th,Oh,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new r(n)},string:function(n){return new r(n)},"number, number":function(n,u){return new r(n,u)},null:function(n){return new r(0)},BigNumber:function(n){return new r(n.toString())},Fraction:function(n){return n},Unit:t.referToSelf(i=>n=>{var u=n.clone();return u.value=i(n.value),u}),Object:function(n){return new r(n)},"Array | Matrix":t.referToSelf(i=>n=>Bt(n,i))})}),Qu="matrix",Rh=["typed","Matrix","DenseMatrix","SparseMatrix"],Ih=J(Qu,Rh,e=>{var{typed:t,Matrix:r,DenseMatrix:i,SparseMatrix:n}=e;return t(Qu,{"":function(){return u([])},string:function(d){return u([],d)},"string, string":function(d,f){return u([],d,f)},Array:function(d){return u(d)},Matrix:function(d){return u(d,d.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(l,d,f){if(d==="dense"||d==="default"||d===void 0)return new i(l,f);if(d==="sparse")return new n(l,f);throw new TypeError("Unknown matrix type "+JSON.stringify(d)+".")}}),Hu="unaryMinus",zh=["typed"],qh=J(Hu,zh,e=>{var{typed:t}=e;return t(Hu,{number:bs,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:t.referToSelf(r=>i=>{var n=i.clone();return n.value=t.find(r,n.valueType())(i.value),n}),"Array | Matrix":t.referToSelf(r=>i=>Bt(i,r))})}),Wu="abs",Lh=["typed"],Uh=J(Wu,Lh,e=>{var{typed:t}=e;return t(Wu,{number:Cs,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),"Array | Matrix":t.referToSelf(r=>i=>Bt(i,r))})}),Zu="apply",$h=["typed","isInteger"],Vh=J(Zu,$h,e=>{var{typed:t,isInteger:r}=e;return t(Zu,{"Array | Matrix, number | BigNumber, function":function(n,u,l){if(!r(u))throw new TypeError("Integer number expected for dimension");var d=Array.isArray(n)?ft(n):n.size();if(u<0||u>=d.length)throw new jt(u,d.length);return ze(n)?n.create(Vn(n.valueOf(),u,l)):Vn(n,u,l)}})});function Vn(e,t,r){var i,n,u;if(t<=0)if(Array.isArray(e[0])){for(u=jh(e),n=[],i=0;i<u.length;i++)n[i]=Vn(u[i],t-1,r);return n}else return r(e);else{for(n=[],i=0;i<e.length;i++)n[i]=Vn(e[i],t-1,r);return n}}function jh(e){var t=e.length,r=e[0].length,i,n,u=[];for(n=0;n<r;n++){var l=[];for(i=0;i<t;i++)l.push(e[i][n]);u.push(l)}return u}var Gu="addScalar",Qh=["typed"],Hh=J(Gu,Qh,e=>{var{typed:t}=e;return t(Gu,{"number, number":As,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":t.referToSelf(r=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var u=i.clone();return u.value=t.find(r,[u.valueType(),n.valueType()])(u.value,n.value),u.fixPrefix=!1,u})})}),ku="subtractScalar",Wh=["typed"],Zh=J(ku,Wh,e=>{var{typed:t}=e;return t(ku,{"number, number":Fs,"Complex, Complex":function(i,n){return i.sub(n)},"BigNumber, BigNumber":function(i,n){return i.minus(n)},"Fraction, Fraction":function(i,n){return i.sub(n)},"Unit, Unit":t.referToSelf(r=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var u=i.clone();return u.value=t.find(r,[u.valueType(),n.valueType()])(u.value,n.value),u.fixPrefix=!1,u})})}),Gh="matAlgo11xS0s",kh=["typed","equalScalar"],xs=J(Gh,kh,e=>{var{typed:t,equalScalar:r}=e;return function(n,u,l,d){var f=n._values,h=n._index,s=n._ptr,a=n._size,o=n._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=a[0],y=a[1],c,m=r,v=0,g=l;typeof o=="string"&&(c=o,m=t.find(r,[c,c]),v=t.convert(0,c),u=t.convert(u,c),g=t.find(l,[c,c]));for(var D=[],A=[],w=[],C=0;C<y;C++){w[C]=A.length;for(var b=s[C],E=s[C+1],S=b;S<E;S++){var T=h[S],x=d?g(u,f[S]):g(f[S],u);m(x,v)||(A.push(T),D.push(x))}}return w[y]=A.length,n.createSparseMatrix({values:D,index:A,ptr:w,size:[p,y],datatype:c})}}),Kh="matAlgo12xSfs",Jh=["typed","DenseMatrix"],ti=J(Kh,Jh,e=>{var{typed:t,DenseMatrix:r}=e;return function(n,u,l,d){var f=n._values,h=n._index,s=n._ptr,a=n._size,o=n._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=a[0],y=a[1],c,m=l;typeof o=="string"&&(c=o,u=t.convert(u,c),m=t.find(l,[c,c]));for(var v=[],g=[],D=[],A=0;A<y;A++){for(var w=A+1,C=s[A],b=s[A+1],E=C;E<b;E++){var S=h[E];g[S]=f[E],D[S]=w}for(var T=0;T<p;T++)A===0&&(v[T]=[]),D[T]===w?v[T][A]=d?m(u,g[T]):m(g[T],u):v[T][A]=d?m(u,0):m(0,u)}return new r({data:v,size:[p,y],datatype:c})}}),Xh="matAlgo14xDs",Yh=["typed"],ru=J(Xh,Yh,e=>{var{typed:t}=e;return function(n,u,l,d){var f=n._data,h=n._size,s=n._datatype,a,o=l;typeof s=="string"&&(a=s,u=t.convert(u,a),o=t.find(l,[a,a]));var p=h.length>0?r(o,0,h,h[0],f,u,d):[];return n.createDenseMatrix({data:p,size:Qe(h),datatype:a})};function r(i,n,u,l,d,f,h){var s=[];if(n===u.length-1)for(var a=0;a<l;a++)s[a]=h?i(f,d[a]):i(d[a],f);else for(var o=0;o<l;o++)s[o]=r(i,n+1,u,u[n+1],d[o],f,h);return s}}),e0="matAlgo03xDSf",t0=["typed"],ri=J(e0,t0,e=>{var{typed:t}=e;return function(i,n,u,l){var d=i._data,f=i._size,h=i._datatype,s=n._values,a=n._index,o=n._ptr,p=n._size,y=n._datatype;if(f.length!==p.length)throw new be(f.length,p.length);if(f[0]!==p[0]||f[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+p+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var c=f[0],m=f[1],v,g=0,D=u;typeof h=="string"&&h===y&&(v=h,g=t.convert(0,v),D=t.find(u,[v,v]));for(var A=[],w=0;w<c;w++)A[w]=[];for(var C=[],b=[],E=0;E<m;E++){for(var S=E+1,T=o[E],x=o[E+1],P=T;P<x;P++){var H=a[P];C[H]=l?D(s[P],d[H][E]):D(d[H][E],s[P]),b[H]=S}for(var B=0;B<c;B++)b[B]===S?A[B][E]=C[B]:A[B][E]=l?D(g,d[B][E]):D(d[B][E],g)}return i.createDenseMatrix({data:A,size:[c,m],datatype:v})}}),r0="matAlgo05xSfSf",n0=["typed","equalScalar"],Bs=J(r0,n0,e=>{var{typed:t,equalScalar:r}=e;return function(n,u,l){var d=n._values,f=n._index,h=n._ptr,s=n._size,a=n._datatype,o=u._values,p=u._index,y=u._ptr,c=u._size,m=u._datatype;if(s.length!==c.length)throw new be(s.length,c.length);if(s[0]!==c[0]||s[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");var v=s[0],g=s[1],D,A=r,w=0,C=l;typeof a=="string"&&a===m&&(D=a,A=t.find(r,[D,D]),w=t.convert(0,D),C=t.find(l,[D,D]));var b=d&&o?[]:void 0,E=[],S=[],T=b?[]:void 0,x=b?[]:void 0,P=[],H=[],B,R,O,Y;for(R=0;R<g;R++){S[R]=E.length;var k=R+1;for(O=h[R],Y=h[R+1];O<Y;O++)B=f[O],E.push(B),P[B]=k,T&&(T[B]=d[O]);for(O=y[R],Y=y[R+1];O<Y;O++)B=p[O],P[B]!==k&&E.push(B),H[B]=k,x&&(x[B]=o[O]);if(b)for(O=S[R];O<E.length;){B=E[O];var K=P[B],ue=H[B];if(K===k||ue===k){var de=K===k?T[B]:w,pe=ue===k?x[B]:w,ce=C(de,pe);A(ce,w)?E.splice(O,1):(b.push(ce),O++)}}}return S[g]=E.length,n.createSparseMatrix({values:b,index:E,ptr:S,size:[v,g],datatype:D})}}),i0="matAlgo13xDD",u0=["typed"],a0=J(i0,u0,e=>{var{typed:t}=e;return function(n,u,l){var d=n._data,f=n._size,h=n._datatype,s=u._data,a=u._size,o=u._datatype,p=[];if(f.length!==a.length)throw new be(f.length,a.length);for(var y=0;y<f.length;y++){if(f[y]!==a[y])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+a+")");p[y]=f[y]}var c,m=l;typeof h=="string"&&h===o&&(c=h,m=t.find(l,[c,c]));var v=p.length>0?r(m,0,p,p[0],d,s):[];return n.createDenseMatrix({data:v,size:p,datatype:c})};function r(i,n,u,l,d,f){var h=[];if(n===u.length-1)for(var s=0;s<l;s++)h[s]=i(d[s],f[s]);else for(var a=0;a<l;a++)h[a]=r(i,n+1,u,u[n+1],d[a],f[a]);return h}}),s0="broadcast",o0=["concat"],l0=J(s0,o0,e=>{var{concat:t}=e;return function(n,u){var l=Math.max(n._size.length,u._size.length);if(n._size.length===u._size.length&&n._size.every((y,c)=>y===u._size[c]))return[n,u];for(var d=r(n._size,l,0),f=r(u._size,l,0),h=[],s=0;s<l;s++)h[s]=Math.max(d[s],f[s]);In(d,h),In(f,h);var a=n.clone(),o=u.clone();a._size.length<l?a.reshape(r(a._size,l,1)):o._size.length<l&&o.reshape(r(o._size,l,1));for(var p=0;p<l;p++)a._size[p]<h[p]&&(a=i(a,h[p],p)),o._size[p]<h[p]&&(o=i(o,h[p],p));return[a,o]};function r(n,u,l){return[...Array(u-n.length).fill(l),...n]}function i(n,u,l){return t(...Array(u).fill(n),l)}}),c0="matrixAlgorithmSuite",f0=["typed","matrix","concat"],hn=J(c0,f0,e=>{var{typed:t,matrix:r,concat:i}=e,n=a0({typed:t}),u=ru({typed:t}),l=l0({concat:i});return function(f){var h=f.elop,s=f.SD||f.DS,a;h?(a={"DenseMatrix, DenseMatrix":(c,m)=>n(...l(c,m),h),"Array, Array":(c,m)=>n(...l(r(c),r(m)),h).valueOf(),"Array, DenseMatrix":(c,m)=>n(...l(r(c),m),h),"DenseMatrix, Array":(c,m)=>n(...l(c,r(m)),h)},f.SS&&(a["SparseMatrix, SparseMatrix"]=(c,m)=>f.SS(...l(c,m),h,!1)),f.DS&&(a["DenseMatrix, SparseMatrix"]=(c,m)=>f.DS(...l(c,m),h,!1),a["Array, SparseMatrix"]=(c,m)=>f.DS(...l(r(c),m),h,!1)),s&&(a["SparseMatrix, DenseMatrix"]=(c,m)=>s(...l(m,c),h,!0),a["SparseMatrix, Array"]=(c,m)=>s(...l(r(m),c),h,!0))):(a={"DenseMatrix, DenseMatrix":t.referToSelf(c=>(m,v)=>n(...l(m,v),c)),"Array, Array":t.referToSelf(c=>(m,v)=>n(...l(r(m),r(v)),c).valueOf()),"Array, DenseMatrix":t.referToSelf(c=>(m,v)=>n(...l(r(m),v),c)),"DenseMatrix, Array":t.referToSelf(c=>(m,v)=>n(...l(m,r(v)),c))},f.SS&&(a["SparseMatrix, SparseMatrix"]=t.referToSelf(c=>(m,v)=>f.SS(...l(m,v),c,!1))),f.DS&&(a["DenseMatrix, SparseMatrix"]=t.referToSelf(c=>(m,v)=>f.DS(...l(m,v),c,!1)),a["Array, SparseMatrix"]=t.referToSelf(c=>(m,v)=>f.DS(...l(r(m),v),c,!1))),s&&(a["SparseMatrix, DenseMatrix"]=t.referToSelf(c=>(m,v)=>s(...l(v,m),c,!0)),a["SparseMatrix, Array"]=t.referToSelf(c=>(m,v)=>s(...l(r(v),m),c,!0))));var o=f.scalar||"any",p=f.Ds||f.Ss;p&&(h?(a["DenseMatrix,"+o]=(c,m)=>u(c,m,h,!1),a[o+", DenseMatrix"]=(c,m)=>u(m,c,h,!0),a["Array,"+o]=(c,m)=>u(r(c),m,h,!1).valueOf(),a[o+", Array"]=(c,m)=>u(r(m),c,h,!0).valueOf()):(a["DenseMatrix,"+o]=t.referToSelf(c=>(m,v)=>u(m,v,c,!1)),a[o+", DenseMatrix"]=t.referToSelf(c=>(m,v)=>u(v,m,c,!0)),a["Array,"+o]=t.referToSelf(c=>(m,v)=>u(r(m),v,c,!1).valueOf()),a[o+", Array"]=t.referToSelf(c=>(m,v)=>u(r(v),m,c,!0).valueOf())));var y=f.sS!==void 0?f.sS:f.Ss;return h?(f.Ss&&(a["SparseMatrix,"+o]=(c,m)=>f.Ss(c,m,h,!1)),y&&(a[o+", SparseMatrix"]=(c,m)=>y(m,c,h,!0))):(f.Ss&&(a["SparseMatrix,"+o]=t.referToSelf(c=>(m,v)=>f.Ss(m,v,c,!1))),y&&(a[o+", SparseMatrix"]=t.referToSelf(c=>(m,v)=>y(v,m,c,!0)))),h&&h.signatures&&Ha(a,h.signatures),a}}),h0="matAlgo01xDSid",d0=["typed"],_s=J(h0,d0,e=>{var{typed:t}=e;return function(i,n,u,l){var d=i._data,f=i._size,h=i._datatype,s=n._values,a=n._index,o=n._ptr,p=n._size,y=n._datatype;if(f.length!==p.length)throw new be(f.length,p.length);if(f[0]!==p[0]||f[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+p+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var c=f[0],m=f[1],v=typeof h=="string"&&h===y?h:void 0,g=v?t.find(u,[v,v]):u,D,A,w=[];for(D=0;D<c;D++)w[D]=[];var C=[],b=[];for(A=0;A<m;A++){for(var E=A+1,S=o[A],T=o[A+1],x=S;x<T;x++)D=a[x],C[D]=l?g(s[x],d[D][A]):g(d[D][A],s[x]),b[D]=E;for(D=0;D<c;D++)b[D]===E?w[D][A]=C[D]:w[D][A]=d[D][A]}return i.createDenseMatrix({data:w,size:[c,m],datatype:v})}}),p0="matAlgo04xSidSid",v0=["typed","equalScalar"],m0=J(p0,v0,e=>{var{typed:t,equalScalar:r}=e;return function(n,u,l){var d=n._values,f=n._index,h=n._ptr,s=n._size,a=n._datatype,o=u._values,p=u._index,y=u._ptr,c=u._size,m=u._datatype;if(s.length!==c.length)throw new be(s.length,c.length);if(s[0]!==c[0]||s[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");var v=s[0],g=s[1],D,A=r,w=0,C=l;typeof a=="string"&&a===m&&(D=a,A=t.find(r,[D,D]),w=t.convert(0,D),C=t.find(l,[D,D]));var b=d&&o?[]:void 0,E=[],S=[],T=d&&o?[]:void 0,x=d&&o?[]:void 0,P=[],H=[],B,R,O,Y,k;for(R=0;R<g;R++){S[R]=E.length;var K=R+1;for(Y=h[R],k=h[R+1],O=Y;O<k;O++)B=f[O],E.push(B),P[B]=K,T&&(T[B]=d[O]);for(Y=y[R],k=y[R+1],O=Y;O<k;O++)if(B=p[O],P[B]===K){if(T){var ue=C(T[B],o[O]);A(ue,w)?P[B]=null:T[B]=ue}}else E.push(B),H[B]=K,x&&(x[B]=o[O]);if(T&&x)for(O=S[R];O<E.length;)B=E[O],P[B]===K?(b[O]=T[B],O++):H[B]===K?(b[O]=x[B],O++):E.splice(O,1)}return S[g]=E.length,n.createSparseMatrix({values:b,index:E,ptr:S,size:[v,g],datatype:D})}}),D0="matAlgo10xSids",g0=["typed","DenseMatrix"],Ts=J(D0,g0,e=>{var{typed:t,DenseMatrix:r}=e;return function(n,u,l,d){var f=n._values,h=n._index,s=n._ptr,a=n._size,o=n._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=a[0],y=a[1],c,m=l;typeof o=="string"&&(c=o,u=t.convert(u,c),m=t.find(l,[c,c]));for(var v=[],g=[],D=[],A=0;A<y;A++){for(var w=A+1,C=s[A],b=s[A+1],E=C;E<b;E++){var S=h[E];g[S]=f[E],D[S]=w}for(var T=0;T<p;T++)A===0&&(v[T]=[]),D[T]===w?v[T][A]=d?m(u,g[T]):m(g[T],u):v[T][A]=u}return new r({data:v,size:[p,y],datatype:c})}}),y0="multiplyScalar",w0=["typed"],C0=J(y0,w0,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":Es,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":(r,i)=>i.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,i)=>r.multiply(i)})}),Ku="multiply",A0=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],F0=J(Ku,A0,e=>{var{typed:t,matrix:r,addScalar:i,multiplyScalar:n,equalScalar:u,dot:l}=e,d=xs({typed:t,equalScalar:u}),f=ru({typed:t});function h(w,C){switch(w.length){case 1:switch(C.length){case 1:if(w[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(w[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+C[0]+")");break;case 2:if(w[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function s(w,C,b){if(b===0)throw new Error("Cannot multiply two empty vectors");return l(w,C)}function a(w,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return o(w,C)}function o(w,C){var b=w._data,E=w._size,S=w._datatype,T=C._data,x=C._size,P=C._datatype,H=E[0],B=x[1],R,O=i,Y=n;S&&P&&S===P&&typeof S=="string"&&(R=S,O=t.find(i,[R,R]),Y=t.find(n,[R,R]));for(var k=[],K=0;K<B;K++){for(var ue=Y(b[0],T[0][K]),de=1;de<H;de++)ue=O(ue,Y(b[de],T[de][K]));k[K]=ue}return w.createDenseMatrix({data:k,size:[B],datatype:R})}var p=t("_multiplyMatrixVector",{"DenseMatrix, any":c,"SparseMatrix, any":g}),y=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":D,"SparseMatrix, SparseMatrix":A});function c(w,C){var b=w._data,E=w._size,S=w._datatype,T=C._data,x=C._datatype,P=E[0],H=E[1],B,R=i,O=n;S&&x&&S===x&&typeof S=="string"&&(B=S,R=t.find(i,[B,B]),O=t.find(n,[B,B]));for(var Y=[],k=0;k<P;k++){for(var K=b[k],ue=O(K[0],T[0]),de=1;de<H;de++)ue=R(ue,O(K[de],T[de]));Y[k]=ue}return w.createDenseMatrix({data:Y,size:[P],datatype:B})}function m(w,C){var b=w._data,E=w._size,S=w._datatype,T=C._data,x=C._size,P=C._datatype,H=E[0],B=E[1],R=x[1],O,Y=i,k=n;S&&P&&S===P&&typeof S=="string"&&(O=S,Y=t.find(i,[O,O]),k=t.find(n,[O,O]));for(var K=[],ue=0;ue<H;ue++){var de=b[ue];K[ue]=[];for(var pe=0;pe<R;pe++){for(var ce=k(de[0],T[0][pe]),qe=1;qe<B;qe++)ce=Y(ce,k(de[qe],T[qe][pe]));K[ue][pe]=ce}}return w.createDenseMatrix({data:K,size:[H,R],datatype:O})}function v(w,C){var b=w._data,E=w._size,S=w._datatype,T=C._values,x=C._index,P=C._ptr,H=C._size,B=C._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var R=E[0],O=H[1],Y,k=i,K=n,ue=u,de=0;S&&B&&S===B&&typeof S=="string"&&(Y=S,k=t.find(i,[Y,Y]),K=t.find(n,[Y,Y]),ue=t.find(u,[Y,Y]),de=t.convert(0,Y));for(var pe=[],ce=[],qe=[],Te=C.createSparseMatrix({values:pe,index:ce,ptr:qe,size:[R,O],datatype:Y}),Pe=0;Pe<O;Pe++){qe[Pe]=ce.length;var Se=P[Pe],Ze=P[Pe+1];if(Ze>Se)for(var Ce=0,ve=0;ve<R;ve++){for(var ot=ve+1,He=void 0,me=Se;me<Ze;me++){var Ve=x[me];Ce!==ot?(He=K(b[ve][Ve],T[me]),Ce=ot):He=k(He,K(b[ve][Ve],T[me]))}Ce===ot&&!ue(He,de)&&(ce.push(ve),pe.push(He))}}return qe[O]=ce.length,Te}function g(w,C){var b=w._values,E=w._index,S=w._ptr,T=w._datatype;if(!b)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var x=C._data,P=C._datatype,H=w._size[0],B=C._size[0],R=[],O=[],Y=[],k,K=i,ue=n,de=u,pe=0;T&&P&&T===P&&typeof T=="string"&&(k=T,K=t.find(i,[k,k]),ue=t.find(n,[k,k]),de=t.find(u,[k,k]),pe=t.convert(0,k));var ce=[],qe=[];Y[0]=0;for(var Te=0;Te<B;Te++){var Pe=x[Te];if(!de(Pe,pe))for(var Se=S[Te],Ze=S[Te+1],Ce=Se;Ce<Ze;Ce++){var ve=E[Ce];qe[ve]?ce[ve]=K(ce[ve],ue(Pe,b[Ce])):(qe[ve]=!0,O.push(ve),ce[ve]=ue(Pe,b[Ce]))}}for(var ot=O.length,He=0;He<ot;He++){var me=O[He];R[He]=ce[me]}return Y[1]=O.length,w.createSparseMatrix({values:R,index:O,ptr:Y,size:[H,1],datatype:k})}function D(w,C){var b=w._values,E=w._index,S=w._ptr,T=w._datatype;if(!b)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var x=C._data,P=C._datatype,H=w._size[0],B=C._size[0],R=C._size[1],O,Y=i,k=n,K=u,ue=0;T&&P&&T===P&&typeof T=="string"&&(O=T,Y=t.find(i,[O,O]),k=t.find(n,[O,O]),K=t.find(u,[O,O]),ue=t.convert(0,O));for(var de=[],pe=[],ce=[],qe=w.createSparseMatrix({values:de,index:pe,ptr:ce,size:[H,R],datatype:O}),Te=[],Pe=[],Se=0;Se<R;Se++){ce[Se]=pe.length;for(var Ze=Se+1,Ce=0;Ce<B;Ce++){var ve=x[Ce][Se];if(!K(ve,ue))for(var ot=S[Ce],He=S[Ce+1],me=ot;me<He;me++){var Ve=E[me];Pe[Ve]!==Ze?(Pe[Ve]=Ze,pe.push(Ve),Te[Ve]=k(ve,b[me])):Te[Ve]=Y(Te[Ve],k(ve,b[me]))}}for(var ht=ce[Se],nt=pe.length,Et=ht;Et<nt;Et++){var Qt=pe[Et];de[Et]=Te[Qt]}}return ce[R]=pe.length,qe}function A(w,C){var b=w._values,E=w._index,S=w._ptr,T=w._datatype,x=C._values,P=C._index,H=C._ptr,B=C._datatype,R=w._size[0],O=C._size[1],Y=b&&x,k,K=i,ue=n;T&&B&&T===B&&typeof T=="string"&&(k=T,K=t.find(i,[k,k]),ue=t.find(n,[k,k]));for(var de=Y?[]:void 0,pe=[],ce=[],qe=w.createSparseMatrix({values:de,index:pe,ptr:ce,size:[R,O],datatype:k}),Te=Y?[]:void 0,Pe=[],Se,Ze,Ce,ve,ot,He,me,Ve,ht=0;ht<O;ht++){ce[ht]=pe.length;var nt=ht+1;for(ot=H[ht],He=H[ht+1],ve=ot;ve<He;ve++)if(Ve=P[ve],Y)for(Ze=S[Ve],Ce=S[Ve+1],Se=Ze;Se<Ce;Se++)me=E[Se],Pe[me]!==nt?(Pe[me]=nt,pe.push(me),Te[me]=ue(x[ve],b[Se])):Te[me]=K(Te[me],ue(x[ve],b[Se]));else for(Ze=S[Ve],Ce=S[Ve+1],Se=Ze;Se<Ce;Se++)me=E[Se],Pe[me]!==nt&&(Pe[me]=nt,pe.push(me));if(Y)for(var Et=ce[ht],Qt=pe.length,Ht=Et;Ht<Qt;Ht++){var Dr=pe[Ht];de[Ht]=Te[Dr]}}return ce[O]=pe.length,qe}return t(Ku,n,{"Array, Array":t.referTo("Matrix, Matrix",w=>(C,b)=>{h(ft(C),ft(b));var E=w(r(C),r(b));return ze(E)?E.valueOf():E}),"Matrix, Matrix":function(C,b){var E=C.size(),S=b.size();return h(E,S),E.length===1?S.length===1?s(C,b,E[0]):a(C,b):S.length===1?p(C,b):y(C,b)},"Matrix, Array":t.referTo("Matrix,Matrix",w=>(C,b)=>w(C,r(b))),"Array, Matrix":t.referToSelf(w=>(C,b)=>w(r(C,b.storage()),b)),"SparseMatrix, any":function(C,b){return d(C,b,n,!1)},"DenseMatrix, any":function(C,b){return f(C,b,n,!1)},"any, SparseMatrix":function(C,b){return d(b,C,n,!0)},"any, DenseMatrix":function(C,b){return f(b,C,n,!0)},"Array, any":function(C,b){return f(r(C),b,n,!1).valueOf()},"any, Array":function(C,b){return f(r(b),C,n,!0).valueOf()},"any, any":n,"any, any, ...any":t.referToSelf(w=>(C,b,E)=>{for(var S=w(C,b),T=0;T<E.length;T++)S=w(S,E[T]);return S})})}),E0="sqrt",b0=["config","typed","Complex"],S0=J(E0,b0,e=>{var{config:t,typed:r,Complex:i}=e;return r("sqrt",{number:n,Complex:function(l){return l.sqrt()},BigNumber:function(l){return!l.isNegative()||t.predictable?l.sqrt():n(l.toNumber())},Unit:function(l){return l.pow(.5)}});function n(u){return isNaN(u)?NaN:u>=0||t.predictable?Math.sqrt(u):new i(u,0).sqrt()}}),Ju="subtract",N0=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],M0=J(Ju,N0,e=>{var{typed:t,matrix:r,equalScalar:i,subtractScalar:n,unaryMinus:u,DenseMatrix:l,concat:d}=e,f=_s({typed:t}),h=ri({typed:t}),s=Bs({typed:t,equalScalar:i}),a=Ts({typed:t,DenseMatrix:l}),o=ti({typed:t,DenseMatrix:l}),p=hn({typed:t,matrix:r,concat:d});return t(Ju,{"any, any":n},p({elop:n,SS:s,DS:f,SD:h,Ss:o,sS:a}))}),x0="matAlgo07xSSf",B0=["typed","DenseMatrix"],Os=J(x0,B0,e=>{var{typed:t,DenseMatrix:r}=e;return function(u,l,d){var f=u._size,h=u._datatype,s=l._size,a=l._datatype;if(f.length!==s.length)throw new be(f.length,s.length);if(f[0]!==s[0]||f[1]!==s[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+s+")");var o=f[0],p=f[1],y,c=0,m=d;typeof h=="string"&&h===a&&(y=h,c=t.convert(0,y),m=t.find(d,[y,y]));var v,g,D=[];for(v=0;v<o;v++)D[v]=[];var A=[],w=[],C=[],b=[];for(g=0;g<p;g++){var E=g+1;for(i(u,g,C,A,E),i(l,g,b,w,E),v=0;v<o;v++){var S=C[v]===E?A[v]:c,T=b[v]===E?w[v]:c;D[v][g]=m(S,T)}}return new r({data:D,size:[o,p],datatype:y})};function i(n,u,l,d,f){for(var h=n._values,s=n._index,a=n._ptr,o=a[u],p=a[u+1];o<p;o++){var y=s[o];l[y]=f,d[y]=h[o]}}}),Xu="conj",_0=["typed"],T0=J(Xu,_0,e=>{var{typed:t}=e;return t(Xu,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>i=>Bt(i,r))})}),Yu="concat",O0=["typed","matrix","isInteger"],P0=J(Yu,O0,e=>{var{typed:t,matrix:r,isInteger:i}=e;return t(Yu,{"...Array | Matrix | number | BigNumber":function(u){var l,d=u.length,f=-1,h,s=!1,a=[];for(l=0;l<d;l++){var o=u[l];if(ze(o)&&(s=!0),Ie(o)||Je(o)){if(l!==d-1)throw new Error("Dimension must be specified as last argument");if(h=f,f=o.valueOf(),!i(f))throw new TypeError("Integer number expected for dimension");if(f<0||l>0&&f>h)throw new jt(f,h+1)}else{var p=Qe(o).valueOf(),y=ft(p);if(a[l]=p,h=f,f=y.length-1,l>0&&f!==h)throw new be(h+1,f+1)}}if(a.length===0)throw new SyntaxError("At least one matrix expected");for(var c=a.shift();a.length;)c=rs(c,a.shift(),f);return s?r(c):c},"...string":function(u){return u.join("")}})});function R0(e,t,r,i,n){if(yr.isTypedFunction(e)){var u=[t,r,i],l=yr.resolve(e,u);if(l)return a(l.implementation,u);var d=[t,r],f=yr.resolve(e,d);if(f)return a(f.implementation,d);var h=[t],s=yr.resolve(e,h);return s?a(s.implementation,h):a(e,u)}else return e(t,r,i);function a(o,p){try{return o.apply(o,p)}catch(m){var y;if(m instanceof TypeError&&((y=m.data)===null||y===void 0?void 0:y.category)==="wrongType"){var c=[];throw c.push("value: ".concat(Mt(t))),p.length>=2&&c.push("index: ".concat(Mt(r))),p.length>=3&&c.push("array: ".concat(Mt(i))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(e.name,"(").concat(c.join(", "),") at index ").concat(JSON.stringify(r)))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(m.message))}}}var ea="identity",I0=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],z0=J(ea,I0,e=>{var{typed:t,config:r,matrix:i,BigNumber:n,DenseMatrix:u,SparseMatrix:l}=e;return t(ea,{"":function(){return r.matrix==="Matrix"?i([]):[]},string:function(s){return i(s)},"number | BigNumber":function(s){return f(s,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(s,a){return f(s,s,a)},"number | BigNumber, number | BigNumber":function(s,a){return f(s,a,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(s,a,o){return f(s,a,o)},Array:function(s){return d(s)},"Array, string":function(s,a){return d(s,a)},Matrix:function(s){return d(s.valueOf(),s.storage())},"Matrix, string":function(s,a){return d(s.valueOf(),a)}});function d(h,s){switch(h.length){case 0:return s?i(s):[];case 1:return f(h[0],h[0],s);case 2:return f(h[0],h[1],s);default:throw new Error("Vector containing two values expected")}}function f(h,s,a){var o=Je(h)||Je(s)?n:null;if(Je(h)&&(h=h.toNumber()),Je(s)&&(s=s.toNumber()),!We(h)||h<1)throw new Error("Parameters in function identity must be positive integers");if(!We(s)||s<1)throw new Error("Parameters in function identity must be positive integers");var p=o?new n(1):1,y=o?new o(0):0,c=[h,s];if(a){if(a==="sparse")return l.diagonal(c,p,0,y);if(a==="dense")return u.diagonal(c,p,0,y);throw new TypeError('Unknown matrix type "'.concat(a,'"'))}for(var m=Li([],c,y),v=h<s?h:s,g=0;g<v;g++)m[g][g]=p;return m}}),ta="map",q0=["typed"],L0=J(ta,q0,e=>{var{typed:t}=e;return t(ta,{"Array, function":U0,"Matrix, function":function(i,n){return i.map(n)}})});function U0(e,t){var r=function i(n,u){return Array.isArray(n)?n.map(function(l,d){return i(l,u.concat(d))}):R0(t,n,u,e,"map")};return r(e,[])}function $0(){throw new Error('No "bignumber" implementation available')}function V0(){throw new Error('No "fraction" implementation available')}function j0(){throw new Error('No "matrix" implementation available')}var ra="size",Q0=["typed","config","?matrix"],H0=J(ra,Q0,e=>{var{typed:t,config:r,matrix:i}=e;return t(ra,{Matrix:function(u){return u.create(u.size())},Array:ft,string:function(u){return r.matrix==="Array"?[u.length]:i([u.length])},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:i?i([]):j0()}})});function Vt(e,t,r){var i;return String(e).indexOf("Unexpected type")!==-1?(i=arguments.length>2?" (type: "+Mt(r)+", value: "+JSON.stringify(r)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+i)):String(e).indexOf("complex numbers")!==-1?(i=arguments.length>2?" (type: "+Mt(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+i)):e}var W0="numeric",Z0=["number","?bignumber","?fraction"],G0=J(W0,Z0,e=>{var{number:t,bignumber:r,fraction:i}=e,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:l=>t(l),BigNumber:r?l=>r(l):$0,Fraction:i?l=>i(l):V0};return function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",h=arguments.length>2?arguments[2]:void 0;if(h!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var s=Mt(d);if(!(s in n))throw new TypeError("Cannot convert "+d+' of type "'+s+'"; valid input types are '+Object.keys(n).join(", "));if(!(f in u))throw new TypeError("Cannot convert "+d+' to type "'+f+'"; valid output types are '+Object.keys(u).join(", "));return f===s?d:u[f](d)}}),na="divideScalar",k0=["typed","numeric"],K0=J(na,k0,e=>{var{typed:t,numeric:r}=e;return t(na,{"number, number":function(n,u){return n/u},"Complex, Complex":function(n,u){return n.div(u)},"BigNumber, BigNumber":function(n,u){return n.div(u)},"Fraction, Fraction":function(n,u){return n.div(u)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,n)=>i.divide(n),"number | Fraction | Complex | BigNumber, Unit":(i,n)=>n.divideInto(i)})}),jn="compare",J0=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],X0=J(jn,J0,e=>{var{typed:t,config:r,equalScalar:i,matrix:n,BigNumber:u,Fraction:l,DenseMatrix:d,concat:f}=e,h=ri({typed:t}),s=Bs({typed:t,equalScalar:i}),a=ti({typed:t,DenseMatrix:d}),o=hn({typed:t,matrix:n,concat:f}),p=ei({typed:t});return t(jn,Y0({typed:t,config:r}),{"boolean, boolean":function(c,m){return c===m?0:c>m?1:-1},"BigNumber, BigNumber":function(c,m){return Yn(c,m,r.epsilon)?new u(0):new u(c.cmp(m))},"Fraction, Fraction":function(c,m){return new l(c.compare(m))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,o({SS:s,DS:h,Ss:a}))}),Y0=J(jn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(jn,{"number, number":function(n,u){return mr(n,u,r.epsilon)?0:n>u?1:-1}})}),Qn="smaller",ed=["typed","config","matrix","DenseMatrix","concat"],td=J(Qn,ed,e=>{var{typed:t,config:r,matrix:i,DenseMatrix:n,concat:u}=e,l=ri({typed:t}),d=Os({typed:t,DenseMatrix:n}),f=ti({typed:t,DenseMatrix:n}),h=hn({typed:t,matrix:i,concat:u}),s=ei({typed:t});return t(Qn,rd({typed:t,config:r}),{"boolean, boolean":(a,o)=>a<o,"BigNumber, BigNumber":function(o,p){return o.lt(p)&&!Yn(o,p,r.epsilon)},"Fraction, Fraction":(a,o)=>a.compare(o)===-1,"Complex, Complex":function(o,p){throw new TypeError("No ordering relation is defined for complex numbers")}},s,h({SS:d,DS:l,Ss:f}))}),rd=J(Qn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Qn,{"number, number":function(n,u){return n<u&&!mr(n,u,r.epsilon)}})}),Hn="larger",nd=["typed","config","matrix","DenseMatrix","concat"],id=J(Hn,nd,e=>{var{typed:t,config:r,matrix:i,DenseMatrix:n,concat:u}=e,l=ri({typed:t}),d=Os({typed:t,DenseMatrix:n}),f=ti({typed:t,DenseMatrix:n}),h=hn({typed:t,matrix:i,concat:u}),s=ei({typed:t});return t(Hn,ud({typed:t,config:r}),{"boolean, boolean":(a,o)=>a>o,"BigNumber, BigNumber":function(o,p){return o.gt(p)&&!Yn(o,p,r.epsilon)},"Fraction, Fraction":(a,o)=>a.compare(o)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},s,h({SS:d,DS:l,Ss:f}))}),ud=J(Hn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Hn,{"number, number":function(n,u){return n>u&&!mr(n,u,r.epsilon)}})}),ia="partitionSelect",ad=["typed","isNumeric","isNaN","compare"],sd=J(ia,ad,e=>{var{typed:t,isNumeric:r,isNaN:i,compare:n}=e,u=n,l=(h,s)=>-n(h,s);return t(ia,{"Array | Matrix, number":function(s,a){return d(s,a,u)},"Array | Matrix, number, string":function(s,a,o){if(o==="asc")return d(s,a,u);if(o==="desc")return d(s,a,l);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":d});function d(h,s,a){if(!We(s)||s<0)throw new Error("k must be a non-negative integer");if(ze(h)){var o=h.size();if(o.length>1)throw new Error("Only one dimensional matrices supported");return f(h.valueOf(),s,a)}if(Array.isArray(h))return f(h,s,a)}function f(h,s,a){if(s>=h.length)throw new Error("k out of bounds");for(var o=0;o<h.length;o++)if(r(h[o])&&i(h[o]))return h[o];for(var p=0,y=h.length-1;p<y;){for(var c=p,m=y,v=h[Math.floor(Math.random()*(y-p+1))+p];c<m;)if(a(h[c],v)>=0){var g=h[m];h[m]=h[c],h[c]=g,--m}else++c;a(h[c],v)>0&&--c,s<=c?y=c:p=c+1}return h[s]}}),ua="max",od=["typed","config","numeric","larger"],ld=J(ua,od,e=>{var{typed:t,config:r,numeric:i,larger:n}=e;return t(ua,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,h){return eu(f,h.valueOf(),u)},"...":function(f){if(Xn(f))throw new TypeError("Scalar values expected in function max");return l(f)}});function u(d,f){try{return n(d,f)?d:f}catch(h){throw Vt(h,"max",f)}}function l(d){var f;if($r(d,function(h){try{isNaN(h)&&typeof h=="number"?f=NaN:(f===void 0||n(h,f))&&(f=h)}catch(s){throw Vt(s,"max",h)}}),f===void 0)throw new Error("Cannot calculate max of an empty array");return typeof f=="string"&&(f=i(f,r.number)),f}}),aa="min",cd=["typed","config","numeric","smaller"],fd=J(aa,cd,e=>{var{typed:t,config:r,numeric:i,smaller:n}=e;return t(aa,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,h){return eu(f,h.valueOf(),u)},"...":function(f){if(Xn(f))throw new TypeError("Scalar values expected in function min");return l(f)}});function u(d,f){try{return n(d,f)?d:f}catch(h){throw Vt(h,"min",f)}}function l(d){var f;if($r(d,function(h){try{isNaN(h)&&typeof h=="number"?f=NaN:(f===void 0||n(h,f))&&(f=h)}catch(s){throw Vt(s,"min",h)}}),f===void 0)throw new Error("Cannot calculate min of an empty array");return typeof f=="string"&&(f=i(f,r.number)),f}}),sa="add",hd=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],dd=J(sa,hd,e=>{var{typed:t,matrix:r,addScalar:i,equalScalar:n,DenseMatrix:u,SparseMatrix:l,concat:d}=e,f=_s({typed:t}),h=m0({typed:t,equalScalar:n}),s=Ts({typed:t,DenseMatrix:u}),a=hn({typed:t,matrix:r,concat:d});return t(sa,{"any, any":i,"any, any, ...any":t.referToSelf(o=>(p,y,c)=>{for(var m=o(p,y),v=0;v<c.length;v++)m=o(m,c[v]);return m})},a({elop:i,DS:f,SS:h,Ss:s}))}),oa="dot",pd=["typed","addScalar","multiplyScalar","conj","size"],vd=J(oa,pd,e=>{var{typed:t,addScalar:r,multiplyScalar:i,conj:n,size:u}=e;return t(oa,{"Array | DenseMatrix, Array | DenseMatrix":d,"SparseMatrix, SparseMatrix":f});function l(s,a){var o=h(s),p=h(a),y,c;if(o.length===1)y=o[0];else if(o.length===2&&o[1]===1)y=o[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");if(p.length===1)c=p[0];else if(p.length===2&&p[1]===1)c=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(y!==c)throw new RangeError("Vectors must have equal length ("+y+" != "+c+")");if(y===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return y}function d(s,a){var o=l(s,a),p=ze(s)?s._data:s,y=ze(s)?s._datatype:void 0,c=ze(a)?a._data:a,m=ze(a)?a._datatype:void 0,v=h(s).length===2,g=h(a).length===2,D=r,A=i;if(y&&m&&y===m&&typeof y=="string"){var w=y;D=t.find(r,[w,w]),A=t.find(i,[w,w])}if(!v&&!g){for(var C=A(n(p[0]),c[0]),b=1;b<o;b++)C=D(C,A(n(p[b]),c[b]));return C}if(!v&&g){for(var E=A(n(p[0]),c[0][0]),S=1;S<o;S++)E=D(E,A(n(p[S]),c[S][0]));return E}if(v&&!g){for(var T=A(n(p[0][0]),c[0]),x=1;x<o;x++)T=D(T,A(n(p[x][0]),c[x]));return T}if(v&&g){for(var P=A(n(p[0][0]),c[0][0]),H=1;H<o;H++)P=D(P,A(n(p[H][0]),c[H][0]));return P}}function f(s,a){l(s,a);for(var o=s._index,p=s._values,y=a._index,c=a._values,m=0,v=r,g=i,D=0,A=0;D<o.length&&A<y.length;){var w=o[D],C=y[A];if(w<C){D++;continue}if(w>C){A++;continue}w===C&&(m=v(m,g(p[D],c[A])),D++,A++)}return m}function h(s){return ze(s)?s.size():u(s)}}),la="det",md=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Dd=J(la,md,e=>{var{typed:t,matrix:r,subtractScalar:i,multiply:n,divideScalar:u,isZero:l,unaryMinus:d}=e;return t(la,{any:function(s){return Qe(s)},"Array | Matrix":function(s){var a;switch(ze(s)?a=s.size():Array.isArray(s)?(s=r(s),a=s.size()):a=[],a.length){case 0:return Qe(s);case 1:if(a[0]===1)return Qe(s.valueOf()[0]);if(a[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ge(a)+")");case 2:{var o=a[0],p=a[1];if(o===p)return f(s.clone().valueOf(),o);if(p===0)return 1;throw new RangeError("Matrix must be square (size: "+Ge(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ge(a)+")")}}});function f(h,s,a){if(s===1)return Qe(h[0][0]);if(s===2)return i(n(h[0][0],h[1][1]),n(h[1][0],h[0][1]));for(var o=!1,p=new Array(s).fill(0).map((b,E)=>E),y=0;y<s;y++){var c=p[y];if(l(h[c][y])){var m=void 0;for(m=y+1;m<s;m++)if(!l(h[p[m]][y])){c=p[m],p[m]=p[y],p[y]=c,o=!o;break}if(m===s)return h[c][y]}for(var v=h[c][y],g=y===0?1:h[p[y-1]][y-1],D=y+1;D<s;D++)for(var A=p[D],w=y+1;w<s;w++)h[A][w]=u(i(n(h[A][w],v),n(h[A][y],h[c][w])),g)}var C=h[p[s-1]][s-1];return o?d(C):C}}),ca="inv",gd=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],yd=J(ca,gd,e=>{var{typed:t,matrix:r,divideScalar:i,addScalar:n,multiply:u,unaryMinus:l,det:d,identity:f,abs:h}=e;return t(ca,{"Array | Matrix":function(o){var p=ze(o)?o.size():ft(o);switch(p.length){case 1:if(p[0]===1)return ze(o)?r([i(1,o.valueOf()[0])]):[i(1,o[0])];throw new RangeError("Matrix must be square (size: "+Ge(p)+")");case 2:{var y=p[0],c=p[1];if(y===c)return ze(o)?r(s(o.valueOf(),y,c),o.storage()):s(o,y,c);throw new RangeError("Matrix must be square (size: "+Ge(p)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ge(p)+")")}},any:function(o){return i(1,o)}});function s(a,o,p){var y,c,m,v,g;if(o===1){if(v=a[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,v)]]}else if(o===2){var D=d(a);if(D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(a[1][1],D),i(l(a[0][1]),D)],[i(l(a[1][0]),D),i(a[0][0],D)]]}else{var A=a.concat();for(y=0;y<o;y++)A[y]=A[y].concat();for(var w=f(o).valueOf(),C=0;C<p;C++){var b=h(A[C][C]),E=C;for(y=C+1;y<o;)h(A[y][C])>b&&(b=h(A[y][C]),E=y),y++;if(b===0)throw Error("Cannot calculate inverse, determinant is zero");y=E,y!==C&&(g=A[C],A[C]=A[y],A[y]=g,g=w[C],w[C]=w[y],w[y]=g);var S=A[C],T=w[C];for(y=0;y<o;y++){var x=A[y],P=w[y];if(y!==C){if(x[C]!==0){for(m=i(l(x[C]),S[C]),c=C;c<p;c++)x[c]=n(x[c],u(m,S[c]));for(c=0;c<p;c++)P[c]=n(P[c],u(m,T[c]))}}else{for(m=S[C],c=C;c<p;c++)x[c]=i(x[c],m);for(c=0;c<p;c++)P[c]=i(P[c],m)}}}return w}}}),wd="divide",Cd=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Ad=J(wd,Cd,e=>{var{typed:t,matrix:r,multiply:i,equalScalar:n,divideScalar:u,inv:l}=e,d=xs({typed:t,equalScalar:n}),f=ru({typed:t});return t("divide",Ha({"Array | Matrix, Array | Matrix":function(s,a){return i(s,l(a))},"DenseMatrix, any":function(s,a){return f(s,a,u,!1)},"SparseMatrix, any":function(s,a){return d(s,a,u,!1)},"Array, any":function(s,a){return f(r(s),a,u,!1).valueOf()},"any, Array | Matrix":function(s,a){return i(s,l(a))}},u.signatures))}),fa="sum",Fd=["typed","config","add","numeric"],Ed=J(fa,Fd,e=>{var{typed:t,config:r,add:i,numeric:n}=e;return t(fa,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":l,"...":function(f){if(Xn(f))throw new TypeError("Scalar values expected in function sum");return u(f)}});function u(d){var f;return $r(d,function(h){try{f=f===void 0?h:i(f,h)}catch(s){throw Vt(s,"sum",h)}}),f===void 0&&(f=n(0,r.number)),typeof f=="string"&&(f=n(f,r.number)),f}function l(d,f){try{var h=eu(d,f,i);return h}catch(s){throw Vt(s,"sum")}}}),ha="median",bd=["typed","add","divide","compare","partitionSelect"],Sd=J(ha,bd,e=>{var{typed:t,add:r,divide:i,compare:n,partitionSelect:u}=e;function l(h){try{h=es(h.valueOf());var s=h.length;if(s===0)throw new Error("Cannot calculate median of an empty array");if(s%2===0){for(var a=s/2-1,o=u(h,a+1),p=h[a],y=0;y<a;++y)n(h[y],p)>0&&(p=h[y]);return f(p,o)}else{var c=u(h,(s-1)/2);return d(c)}}catch(m){throw Vt(m,"median")}}var d=t({"number | BigNumber | Complex | Unit":function(s){return s}}),f=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(s,a){return i(r(s,a),2)}});return t(ha,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(s,a){throw new Error("median(A, dim) is not yet supported")},"...":function(s){if(Xn(s))throw new TypeError("Scalar values expected in function median");return l(s)}})}),bi="unbiased",da="variance",Nd=["typed","add","subtract","multiply","divide","apply","isNaN"],Md=J(da,Nd,e=>{var{typed:t,add:r,subtract:i,multiply:n,divide:u,apply:l,isNaN:d}=e;return t(da,{"Array | Matrix":function(a){return f(a,bi)},"Array | Matrix, string":f,"Array | Matrix, number | BigNumber":function(a,o){return h(a,o,bi)},"Array | Matrix, number | BigNumber, string":h,"...":function(a){return f(a,bi)}});function f(s,a){var o,p=0;if(s.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if($r(s,function(m){try{o=o===void 0?m:r(o,m),p++}catch(v){throw Vt(v,"variance",m)}}),p===0)throw new Error("Cannot calculate variance of an empty array");var y=u(o,p);if(o=void 0,$r(s,function(m){var v=i(m,y);o=o===void 0?n(v,v):r(o,n(v,v))}),d(o))return o;switch(a){case"uncorrected":return u(o,p);case"biased":return u(o,p+1);case"unbiased":{var c=Je(o)?o.mul(0):0;return p===1?c:u(o,p-1)}default:throw new Error('Unknown normalization "'+a+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function h(s,a,o){try{if(s.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return l(s,a,p=>f(p,o))}catch(p){throw Vt(p,"variance")}}}),pa="std",xd=["typed","map","sqrt","variance"],Bd=J(pa,xd,e=>{var{typed:t,map:r,sqrt:i,variance:n}=e;return t(pa,{"Array | Matrix":u,"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":u,"Array | Matrix, number | BigNumber, string":u,"...":function(d){return u(d)}});function u(l,d){if(l.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var f=n.apply(null,arguments);return zr(f)?r(f,i):i(f)}catch(h){throw h instanceof TypeError&&h.message.indexOf(" variance")!==-1?new TypeError(h.message.replace(" variance"," std")):h}}}),ni=Gf({config:At}),Ps=Xf({}),nu=rh({}),iu=uh({}),ar=oh({Matrix:iu}),le=Kc({BigNumber:ni,Complex:Ps,DenseMatrix:ar,Fraction:nu}),_d=Uh({typed:le}),ii=Hh({typed:le}),Td=_h({BigNumber:ni,typed:le}),Od=T0({typed:le}),Vr=wh({config:At,typed:le}),Rs=fh({typed:le}),Pd=vh({typed:le}),Rd=L0({typed:le}),Is=C0({typed:le}),Id=Mh({typed:le}),uu=Fh({Matrix:iu,equalScalar:Vr,typed:le}),zs=Zh({typed:le}),zd=Vh({isInteger:Rs,typed:le}),qs=Dh({typed:le}),qd=S0({Complex:Ps,config:At,typed:le}),au=qh({typed:le}),Ld=Ph({Fraction:nu,typed:le}),Ud=dh({typed:le}),Ft=Ih({DenseMatrix:ar,Matrix:iu,SparseMatrix:uu,typed:le}),ui=G0({bignumber:Td,fraction:Ld,number:Id}),$d=H0({matrix:Ft,config:At,typed:le}),dn=P0({isInteger:Rs,matrix:Ft,typed:le}),su=K0({numeric:ui,typed:le}),Vd=z0({BigNumber:ni,DenseMatrix:ar,SparseMatrix:uu,config:At,matrix:Ft,typed:le}),jd=td({DenseMatrix:ar,concat:dn,config:At,matrix:Ft,typed:le}),Qd=M0({DenseMatrix:ar,concat:dn,equalScalar:Vr,matrix:Ft,subtractScalar:zs,typed:le,unaryMinus:au}),ou=dd({DenseMatrix:ar,SparseMatrix:uu,addScalar:ii,concat:dn,equalScalar:Vr,matrix:Ft,typed:le}),Ls=X0({BigNumber:ni,DenseMatrix:ar,Fraction:nu,concat:dn,config:At,equalScalar:Vr,matrix:Ft,typed:le}),Hd=vd({addScalar:ii,conj:Od,multiplyScalar:Is,size:$d,typed:le}),Wd=id({DenseMatrix:ar,concat:dn,config:At,matrix:Ft,typed:le}),Zd=fd({config:At,numeric:ui,smaller:jd,typed:le}),ai=F0({addScalar:ii,dot:Hd,equalScalar:Vr,matrix:Ft,multiplyScalar:Is,typed:le}),Gd=sd({compare:Ls,isNaN:qs,isNumeric:Ud,typed:le}),kd=Ed({add:ou,config:At,numeric:ui,typed:le}),Kd=Dd({divideScalar:su,isZero:Pd,matrix:Ft,multiply:ai,subtractScalar:zs,typed:le,unaryMinus:au}),Jd=ld({config:At,larger:Wd,numeric:ui,typed:le}),Xd=yd({abs:_d,addScalar:ii,det:Kd,divideScalar:su,identity:Vd,matrix:Ft,multiply:ai,typed:le,unaryMinus:au}),Us=Ad({divideScalar:su,equalScalar:Vr,inv:Xd,matrix:Ft,multiply:ai,typed:le}),$s=Md({add:ou,apply:zd,divide:Us,isNaN:qs,multiply:ai,subtract:Qd,typed:le}),Yd=Sd({add:ou,compare:Ls,divide:Us,partitionSelect:Gd,typed:le}),ep=Bd({map:Rd,sqrt:qd,typed:le,variance:$s}),_t=(e=>(e[e.SUM=0]="SUM",e[e.MIN=1]="MIN",e[e.MAX=2]="MAX",e[e.AVG=3]="AVG",e[e.COUNT=4]="COUNT",e[e.UNIQUE=5]="UNIQUE",e[e.STD=6]="STD",e[e.VARIANCE=7]="VARIANCE",e[e.MEDIAN=8]="MEDIAN",e))(_t||{}),Tt=(e=>(e.SUM="Total",e.MIN="Minimum",e.MAX="Maximum",e.AVG="Average",e.COUNT="Count",e.UNIQUE="Unique",e.STD="Standard deviation",e.VARIANCE="Variance",e.MEDIAN="Median",e))(Tt||{});const tp=e=>{const t=vr(r=>Ws(r,e));return te.debug("showColumnFilters",t),t},rp=e=>{const t=vr(r=>Zs(r,e));return te.debug("lovs",t),t},np=G.lazy(()=>cn(()=>import("./TableToolbar-1.0.7-6f7f9043.js"),["./TableToolbar-1.0.7-6f7f9043.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./DialogContent-1.0.7-fca1f4d6.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./index.esm-1.0.7-8ea9dc9a.js","./FileSaver.min-1.0.7-fd4f2e6e.js","./ActionsDml-1.0.7-c9050d88.js","./settings-1.0.7-0ed115b6.js","./FormControlLabel-1.0.7-e4e2218b.js","./AdminTheme-1.0.7-e1a0758c.js","./Tabs-1.0.7-766143ea.js","./settings-1.0.7-5a196fc8.css","./RadioGroup-1.0.7-a99aad94.js","./Radio-1.0.7-a1fc902e.js"],import.meta.url)),ip=G.lazy(()=>cn(()=>import("./RowActions-1.0.7-4beffb08.js"),["./RowActions-1.0.7-4beffb08.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./settings-1.0.7-0ed115b6.js","./FormControlLabel-1.0.7-e4e2218b.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./DialogContent-1.0.7-fca1f4d6.js","./AdminTheme-1.0.7-e1a0758c.js","./Tabs-1.0.7-766143ea.js","./settings-1.0.7-5a196fc8.css","./ActionsDml-1.0.7-c9050d88.js"],import.meta.url)),up=({appId:e,display:t,refresh:r,showForm:i,metaData:n})=>{var vn,mn,Dn,gn,yn,wn,Cn,An,Fn,En;const u=Zi(),l=G.useRef(null),d=G.useRef(null),f=G.useRef(!0),[h,s]=G.useState({pageIndex:0,pageSize:10}),[a,o]=G.useState([]),[p,y]=G.useState(""),[c,m]=G.useState([]),v=tp(e),[g,D]=G.useState(!1),[A,w]=G.useState(!1);te.debug(c,g);const C=vr(q=>Gs(q,e));te.debug("deleteColumnFilter",C),G.useEffect(()=>{if(C!==void 0){const q=[];c.map(ee=>{ee.id!==C&&q.push(ee)}),m(q),u(ks({appId:e}))}},[C]);const[b,E]=G.useState(void 0),[S,T]=G.useState({global:p,column:c,columnFns:{}}),[x,P]=G.useState({});te.debug(e,t,r,n,h,a,p,b,S,x),te.debug(c,g);const H=qo(e),B=H.table,R=H.columns,[O,Y]=G.useState(B.design.density.default),k=bo(),K=Zo(e),ue=So(e),de=G.useMemo(()=>rl,[ue.language.code]),pe=((mn=(vn=n==null?void 0:n.settings)==null?void 0:vn.wp)==null?void 0:mn.date_format)??"",ce=((gn=(Dn=n==null?void 0:n.settings)==null?void 0:Dn.wp)==null?void 0:gn.time_format)??"",qe=n.primary_key.length>0,Te=B.viewLink,Pe=!fi(n)&&((yn=n==null?void 0:n.privs)==null?void 0:yn.update)&&B.transactions.update,Se=!fi(n)&&((wn=n==null?void 0:n.privs)==null?void 0:wn.delete)&&B.transactions.delete,Ze=Te||Pe||Se,Ce=B.bulkActions,ve=G.useMemo(()=>{var ee;let q=!1;for(const V in Ce)V==="pdf"||V==="excel"||Ks(e)&&V==="sql"||(!((ee=n==null?void 0:n.privs)!=null&&ee.delete)||!qe)&&V==="delete"||(q=q||Ce[V]===!0);return q},[Ce]);te.debug(H,qe,Te,Pe,Se,Ze,Ce,ve);const ot=G.useMemo(()=>[],[R]);te.debug("inlineEditingColumns",ot);const He=G.useMemo(()=>({}),[R]);te.debug("inlineSearchColumns",He);const me=vr(q=>Js(q,e));te.debug("storeRows",me);const Ve=vr(q=>Xs(q,e));te.debug("fullScreen",Ve);const ht=q=>{for(let ee=0;ee<R.length;ee++){const V=R[ee].lookup;V!==void 0&&(V.loadOnStartup||R[ee].inlineEditing)&&(q===!0||!lu(rr.getState(),e,R[ee].columnName))&&ba(e,"table",R[ee].columnName,V.key,V.value,{},se=>{te.debug(se.data);const Ne={};for(let we=0;we<se.data.length;we++)if(!V.value.includes(","))Ne[se.data[we].key]=se.data[we].value;else{const xe=V.value.split(",");Ne[se.data[we].key]=xe.map(Be=>se.data[we][Be])}q!==!0&&u(oo({appId:e,columnName:R[ee].columnName,lookup:Ne}))},se=>{te.error(se)})}},nt=rp(e);G.useEffect(()=>{te.debug("executing useeffect tableColumns..."),ht()},[R]),G.useEffect(()=>{if(te.debug("executing effect columnFilters..."),B.largeTableSupport.actual===gt.ENABLED){for(let q=0;q<R.length;q++)if(R[q].inlineSearch&&R[q].inlineSearchEnum!==Zt.SEARCHBOX){const ee=R[q].columnName;let V,se;for(let Ne=0;Ne<S.column.length;Ne++)S.column[Ne].id===ee&&(V=S.column[Ne].value);for(let Ne=0;Ne<c.length;Ne++)c[Ne].id===ee&&(se=c[Ne].value);V!==se&&D(!g)}}},[c]);const Et=()=>B.searchSettings.searchFormPosition===di.HEADER||H.state.masterDetailConditions!==void 0,Qt=q=>$.jsx("div",{dangerouslySetInnerHTML:{__html:q}}),Ht=G.useMemo(()=>{const q={};return R.filter(ee=>ee.computedField===void 0).map(ee=>{q[ee.columnName]=ee.queryable}),q},[R]),Dr=G.useMemo(()=>{const q={};return R.map(ee=>{q[ee.columnName]=ee}),q},[R]),si=G.useMemo(()=>R.map(q=>q.columnName),[R]),jr=G.useMemo(()=>[],[R]),{data:F,isError:M,isRefetching:_,isLoading:I,refetch:U}=ql({queryKey:["table-data",h.pageIndex,h.pageSize,a,g,B.largeTableSupport.actual===gt.ENABLED?g:p,B.largeTableSupport.actual===gt.ENABLED?g:c],queryFn:async()=>{var ee,V,se,Ne;let q;if(B.searchSettings.forceSearch&&Array.isArray(c)&&c.length===0&&(p===void 0||p===""))q={data:{code:"ok",data:{},meta:{rowCount:0}}};else{const we=!Yo(S,{global:p,column:c,columnFns:Re.getState().columnFilterFns});we&&s({pageIndex:0,pageSize:h.pageSize});let xe;B.largeTableSupport.actual===gt.ENABLED&&B.largeTableSupport.skipCount===!0?(xe=Ys(n),xe===null&&(xe=void 0)):xe=we?void 0:b,te.debug("metaRowCount",xe),te.debug("rowCount",b);const Be={col:Ht,page_index:h.pageIndex,page_size:h.pageSize,sorting:a,search:p,search_columns:c.map(ae=>{var Me,Ae;if(He[ae.id].inlineSearchEnum!==Zt.SEARCHBOX&&((Me=He[ae.id].lookup)==null?void 0:Me.loadOnStartup)===!0&&nt!==void 0&&nt[ae.id]!==void 0&&lu(rr.getState(),e,ae.id)){const fe=eo(rr.getState(),e,ae.id);if(fe!==void 0)if(Array.isArray(ae.value)){if(fe.length>0)return{id:ae.id,value:ae.value.map(he=>{var Ye;return(Ye=fe.find(Oe=>Oe.value===he))==null?void 0:Ye.key})}}else return{id:ae.id,value:(Ae=fe.find(he=>he.value===ae.value))==null?void 0:Ae.key}}return ae}),search_column_fns:Re.getState().columnFilterFns,search_column_lov:R.filter(ae=>ae.lookup!==void 0).map(ae=>ae.columnName),row_count:xe,row_count_estimate:B.largeTableSupport.actual===gt.ENABLED,media:n==null?void 0:n.media};H.state.masterDetailConditions!==void 0&&(Be.md=H.state.masterDetailConditions),te.debug(Be,n.src),H.state.relTab===!0&&(Be.rel_tab=!0),await No(n.src.app_id?cu.appUrlAppSelect:cu.appUrlSelect,{...Be,...n.src}).then(ae=>{q=ae,w(!0)}).catch(ae=>{te.error(ae),q={}})}return te.debug(q),E((V=(ee=q==null?void 0:q.data)==null?void 0:ee.meta)==null?void 0:V.rowCount),T({global:p,column:c,columnFns:Re.getState().columnFilterFns}),P((Ne=(se=q.data)==null?void 0:se.context)==null?void 0:Ne.media),te.debug(q.data),q.data},placeholderData:ul}),z=G.useMemo(()=>{var q;if(F!==void 0&&Array.isArray(F.data)){const ee={};for(let V=0;V<R.length;V++){const se=R[V];if(se.aggregation!==void 0&&Array.isArray(R[V].aggregation)&&((q=se.aggregation)==null?void 0:q.length)>0){const Ne=se.columnName;let we=[];if(se.computedField===void 0)we=F.data.map((ae,Me)=>me[Me]!==void 0&&me[Me][Ne]!==void 0?me[Me][Ne]:ae[Ne]);else if(se.computedField.type===to.CODE&&se.computedField.expression!==void 0&&se.computedField.expression!==null&&se.computedField.expression!=="")for(let ae=0;ae<F.data.length;ae++){const Me=me[ae]??F.data[ae];let Ae=se.computedField.expression;for(const he in Me)Ae=Ae==null?void 0:Ae.replaceAll(`{:${he}}`,Me[he]);const fe=ro(Ae,se.computedField.type);we.push(fe)}const xe=we.filter(ae=>ae!==null),Be=we.length>0?kd(xe):void 0;ee[Ne]={[_t.SUM]:{value:Be,label:Tt.SUM},[_t.MIN]:{value:xe.length>0?Zd(xe):void 0,label:Tt.MIN},[_t.MAX]:{value:xe.length>0?Jd(xe):void 0,label:Tt.MAX},[_t.AVG]:{value:Be!==void 0?Be/F.data.length:void 0,label:Tt.AVG},[_t.COUNT]:{value:F.data.length,label:Tt.COUNT},[_t.UNIQUE]:{value:[...new Set(we.map(ae=>ae))].length,label:Tt.UNIQUE},[_t.STD]:{value:xe.length>0?ep(xe):void 0,label:Tt.STD},[_t.VARIANCE]:{value:xe.length>0?$s(xe):void 0,label:Tt.VARIANCE},[_t.MEDIAN]:{value:xe.length>0?Yd(xe):void 0,label:Tt.MEDIAN}}}}return ee}else return null},[F,me,R]);te.debug("aggregates",z);const W=Mn?Mn.palette.mode==="dark"?Bo(Mn.palette.warning.dark,.25):_o(Mn.palette.warning.light,.5):"transparent";te.debug("matchHighlightColor",W);const Q=q=>$.jsx("span",{style:{backgroundColor:W,borderRadius:"2px",padding:"2px 1px"},children:q}),Z=(q,ee)=>{if(!B.searchSettings.highlightMatches)return q;let V=q;return(p==null?void 0:p.trim())!==""&&(V=Hl(V,p,se=>Q(se))),te.debug(ee,q,V),V},j=G.useMemo(()=>{te.debug("executing memo columnDef");const q=[];for(let ee=0;ee<R.length;ee++){const V=R[ee],se=V.columnName,Ne=V.columnLabel,we=no(n,V.columnName);let xe=V.lookup!==void 0?"string":we!==void 0?fu(n.columns[we].data_type):void 0,Be=we!==void 0?fu(n.columns[we].data_type,!0):void 0,ae=we!==void 0?n.columns[we].data_type:void 0;const Me=n.media[se];te.debug(se,Ne,we,Be,ae,Me);const Ae={accessorKey:se,header:Ne,size:V.width,muiTableHeadCellProps:{className:V.classNames+(V.computedField===void 0&&V.orderable?" pp-column-orderable":"")+(V.alignment===hu.LEFT?" pp-align-left":V.alignment===hu.RIGHT?" pp-align-right":""),align:V.alignment},muiTableBodyCellProps:{className:V.classNames,align:V.alignment},enableColumnFilter:V.inlineSearch&&!1,enableSorting:V.orderable,enableColumnActions:V.inlineSearch||V.orderable,columnFilterModeOptions:V.inlineSearch&&V.inlineSearchEnum===Zt.SEARCHBOX?xe==="string"?["contains","startsWith","endsWith","equals","notEquals","empty","notEmpty"]:["contains","equals","notEquals","greaterThan","greaterThanOrEqualTo","lessThan","lessThanOrEqualTo","between","betweenInclusive","empty","notEmpty"]:[],filterFn:V.inlineSearch&&(V.inlineSearchEnum===Zt.DROPDOWN||V.inlineSearchEnum===Zt.MULTISELECT)?"equals":"contains",filterVariant:V.inlineSearch&&V.inlineSearchEnum===Zt.DROPDOWN?"select":V.inlineSearch&&V.inlineSearchEnum===Zt.MULTISELECT?"multi-select":"text",filterSelectOptions:V.inlineSearch&&V.inlineSearchEnum!==Zt.SEARCHBOX&&nt!==void 0&&nt[V.columnName]!==void 0?nt[V.columnName].map(fe=>fe.value):void 0,muiFilterTextFieldProps:({column:fe})=>({label:de.filterByColumn.replaceAll("{column}",fe.columnDef.header),...(Be==="date"||Be==="datetime")&&{placeholder:"yyyy-mm-dd"}})};if(V.lookup!==void 0){Ae.Cell=({cell:fe,renderedCellValue:he})=>(te.debug(Be,fe,he),he===null||he===""?null:$.jsx(Ll,{appId:e,lookupColumn:V,cell:fe,metaData:n,highlight:Z})),q.push(Ae);continue}V.computedField===void 0&&(Me==="ImageURL"?(Ae.muiTableBodyCellProps={className:"pp-image "+V.classNames,align:V.alignment,sx:{"& img":{width:"100%",height:"100%"}}},Ae.enableColumnFilter=!1,Ae.enableSorting=!1,Ae.enableColumnActions=!1,Ae.Cell=({cell:fe})=>(te.debug(Be,fe),fe.getValue()===null||fe.getValue()===""?null:$.jsx($.Fragment,{children:$.jsx("img",{src:fe.getValue(),alt:V.columnLabel})}))):Me==="HyperlinkURL"||Me==="HyperlinkObject"?(Ae.muiTableBodyCellProps={className:"pp-hyperlink "+V.classNames,align:V.alignment},Ae.enableColumnFilter=!1,Ae.enableSorting=!1,Ae.enableColumnActions=!1,Ae.Cell=({cell:fe})=>{if(te.debug(Be,fe),fe.getValue()===null||fe.getValue()==="")return null;if(Me==="HyperlinkObject")try{const he=JSON.parse(fe.getValue());return(he==null?void 0:he.url)!==""&&(he!=null&&he.target)&&(he==null?void 0:he.label)!==""?$.jsx("a",{href:he.url,target:he.target,onClick:Ye=>{Ye.stopPropagation()},children:he.label}):null}catch(he){return te.error("Invalid media properties",he),$.jsx(Cu,{title:"Error reading media! Check console...",children:$.jsx("span",{children:$.jsx(Au,{})})})}else return $.jsxs("a",{href:fe.getValue(),target:"_blank",style:{display:"flex",alignItems:"center",gap:"5px"},onClick:he=>{he.stopPropagation()},children:[$.jsx(Mo,{}),$.jsx("span",{children:V.columnLabel})]})}):Me==="WP-Image"||Me==="WP-Attachment"||Me==="WP-Audio"||Me==="WP-Video"?(Ae.muiTableBodyCellProps={className:Me.toLowerCase()+" "+V.classNames,align:V.alignment},Me==="WP-Image"&&(Ae.muiTableBodyCellProps.sx={"& img":{width:"100%",height:"100%"}}),Ae.enableColumnFilter=!1,Ae.enableSorting=!1,Ae.enableColumnActions=!1,Ae.Cell=({cell:fe,row:he})=>(te.debug(Be,fe,he),fe.getValue()===null||fe.getValue()===""||!x[he.id]||!x[he.id][V.columnName]?null:$.jsxs($.Fragment,{children:[...x[he.id][V.columnName].map(Ye=>{try{const Oe=JSON.parse(Ye);if(!(Oe!=null&&Oe.url))return null;switch(Me){case"WP-Image":return $.jsx("img",{src:Oe.url,title:Oe.title,alt:Oe.title},Oe.title);case"WP-Audio":return $.jsx("audio",{controls:!0,children:$.jsx("source",{src:Oe.url,type:Oe.mime_type})});case"WP-Video":return $.jsx("video",{controls:!0,children:$.jsx("source",{src:Oe.url,type:Oe.mime_type})});default:{const De=Oe.mime_type.split("/");return $.jsxs("a",{href:Oe.url,title:Oe.title,target:"_blank",onClick:ut=>{ut.stopPropagation()},children:[$.jsxs("div",{className:"pp-attachment-icon",children:[De[0]==="image"&&$.jsx(Go,{}),De[0]==="audio"&&$.jsx(ko,{}),De[0]==="video"&&$.jsx(Ko,{}),De[0]==="application"?De[1]==="pdf"?$.jsx(Jo,{}):$.jsx(Xo,{}):$.jsx($.Fragment,{})]}),$.jsx("div",{className:"pp-attachment-link",children:Oe.title})]})}}}catch(Oe){return te.error("Invalid media properties",Oe),$.jsx(Cu,{title:"Error reading media! Check console...",children:$.jsx("span",{children:$.jsx(Au,{})})})}})]}))):(ae!=null&&ae.includes("text")&&(Ae.muiTableBodyCellProps={className:V.classNames,align:V.alignment,sx:{whiteSpace:"pre-wrap"}}),Ae.Cell=({cell:fe,renderedCellValue:he})=>{if(te.debug(Be,fe,he),fe.getValue()===null||fe.getValue()==="")return null;if(R[ee].allowMarkup)return Qt(fe.getValue());if(Be==="date"){if(pe!==""){const Ye=new Date(Date.parse(fe.getValue()));if(Ye.toString().toLowerCase()!=="invalid date")return hi(pe,Ye)}}else if(Be==="time"){if(ce!==""){const Ye=new Date(new Date().toDateString()+" "+fe.getValue());if(Ye.toString().toLowerCase()!=="invalid date")return hi(ce,Ye)}}else if(Be==="datetime"&&pe!==""&&ce!==""){const Ye=new Date(Date.parse(fe.getValue()));if(Ye.toString().toLowerCase()!=="invalid date")return hi(pe+" "+ce,Ye)}return he}),q.push(Ae))}return q},[e,B,R,F,me,nt,x,ot]);te.debug("columnDef",j);const Fe=Nn("(min-width: 1200px)"),Ee=Nn("(max-width: 600px)"),Le=Nn("(max-width: 900px)"),Ke=Nn("(max-width: 900px)"),Xe=Lo(),vt=((Cn=l==null?void 0:l.current)==null?void 0:Cn.offsetWidth)??901,[it,Wt]=G.useState(Ke);G.useEffect(()=>{var q;Wt(Ke||(((q=d==null?void 0:d.current)==null?void 0:q.offsetWidth)??901)<=900)},[Ke,Xe.width]);const Re=wo({columns:j,data:(F==null?void 0:F.data)??[],rowCount:((An=F==null?void 0:F.meta)==null?void 0:An.rowCount)??0,initialState:{density:B.design.density.default,columnPinning:{left:["mrt-row-actions"]}},state:{pagination:h,sorting:a,globalFilter:p,columnFilters:c,isLoading:I,showAlertBanner:M,showProgressBars:_,columnOrder:["mrt-row-actions","mrt-row-select"].concat(si),showColumnFilters:v},localization:de,enableStickyHeader:!1,enableColumnOrdering:!1,enableColumnResizing:!1,enableColumnPinning:!1,enableHiding:!0,layoutMode:"semantic",enableTopToolbar:!0,enableBottomToolbar:!0,enableFullScreenToggle:!1,renderTopToolbarCustomActions:()=>$.jsx(G.Suspense,{children:$.jsx(np,{table:Re,metaData:n,appId:e,bulkActions:Ce,hasBulkActions:ve,tableStore:H,appLanguage:K,refetch:U,showForm:i})}),renderToolbarInternalActions:({table:q})=>$.jsxs($.Fragment,{children:[$.jsx(Co,{table:q}),jr.length>0&&(B.searchSettings.searchFormAlwaysOpen!==!0||Le)&&$.jsx(Ao,{table:q}),B.design.density.userCanChange&&$.jsx(Fo,{table:q})]}),muiTopToolbarProps:()=>({className:"pp-top-toolbar"}),muiToolbarAlertBannerProps:M?{color:"error",children:K.errorLoadingData}:void 0,enableRowActions:Ze,positionActionsColumn:"first",renderRowActions:({row:q,table:ee})=>{te.debug(q,ee);const V={};return n.primary_key.map(se=>{q.original[se]&&(V[se]=q.original[se])}),te.debug(V),$.jsx(G.Suspense,{children:$.jsx(ip,{metaData:n,appId:e,showForm:i,rowId:V,rowData:q.original,storeTableSettings:B,refetch:U,appLanguage:K})})},displayColumnDefOptions:{"mrt-row-actions":{minSize:0,size:(Number(Te)+Number(Pe)+Number(Se))*40,maxSize:(Number(Te)+Number(Pe)+Number(Se))*40,muiTableHeadCellProps:{sx:{"&.MuiTableCell-root.MuiTableCell-head":{backgroundColor:"inherit",paddingLeft:O===mt.COMPACT?"1rem":"1.5rem",boxShadow:"none"}}},muiTableBodyCellProps:{sx:{"&.MuiTableCell-root.MuiTableCell-body":{backgroundColor:"inherit",maxWidth:"0",width:"0",padding:O===mt.SPACIOUS?"0 1.5rem":"0 1rem"}}},enableHiding:!0},"mrt-row-select":{minSize:0,size:40,maxSize:40,enableHiding:!0}},renderColumnActionsMenuItems:({internalColumnMenuItems:q})=>{const ee=q.filter(V=>V.key!=="3"&&V.key!=="5"&&V.key!=="11"&&V.key!=="12");return ee.length===0?ee:[...ee.slice(0,ee.length-1),io({},...ee.slice(ee.length-1,ee.length),{props:{divider:!1}})]},enableRowSelection:ve,enableSelectAll:ve,muiTableBodyRowProps:({row:q})=>({hover:!0,onClick:q.getToggleSelectedHandler(),sx:{cursor:"pointer"}}),enablePagination:!0,manualPagination:!0,onPaginationChange:q=>{Re.setRowSelection({}),u(uo({appId:e})),s(q)},paginationDisplayMode:B.largeTableSupport.actual===gt.ENABLED||B.pagination.showCompactButtons?"default":"pages",positionPagination:"bottom",muiPaginationProps:{rowsPerPageOptions:[5,10,15,20,25,30,50,100],color:"primary",shape:"rounded",variant:"outlined",showRowsPerPage:!0,showFirstButton:B.pagination.showFirstButton,showLastButton:B.pagination.showLastButton&&(B.largeTableSupport.actual===gt.DISABLED||B.largeTableSupport.skipCount===!1)},manualFiltering:!0,enableGlobalFilter:!0,enableFilterMatchHighlighting:B.searchSettings.highlightMatches,enableGlobalFilterModes:!1,onGlobalFilterChange:y,enableColumnFilterModes:!0,columnFilterDisplayMode:Et()?"subheader":"custom",onColumnFiltersChange:m,enableColumnFilters:jr.length>0,onShowColumnFiltersChange:()=>{B.searchSettings.searchFormAlwaysOpen||u(du({appId:e,showColumnFilters:!v}))},muiSearchTextFieldProps:()=>({className:"pp-global-search-field",onKeyUp:q=>{B.largeTableSupport.actual===gt.ENABLED&&q.key.toLowerCase()==="enter"&&setTimeout(()=>{D(!g)},500)},onClick:q=>{B.largeTableSupport.actual===gt.ENABLED&&q.target instanceof SVGElement&&q.target.dataset.testid==="CloseIcon"&&setTimeout(()=>{D(!g)},500)},sx:{"& .MuiInputBase-input":{padding:"8px"}}}),muiFilterTextFieldProps:()=>({className:"pp-column-search-field",onKeyUp:q=>{B.largeTableSupport.actual===gt.ENABLED&&q.key.toLowerCase()==="enter"&&setTimeout(()=>{D(!g)},500)},onClickCapture:q=>{B.largeTableSupport.actual===gt.ENABLED&&(q.target.parentElement.dataset.testid==="CloseIcon"||q.target.dataset.testid==="CloseIcon")&&setTimeout(()=>{D(!g)},500)},sx:{"& .MuiInputBase-input":{padding:"8px"}}}),manualSorting:!0,onSortingChange:o,sortDescFirst:!1,enableColumnActions:!0,enableSorting:!0,enableRowNumbers:fi(n),muiTablePaperProps:{elevation:k,sx:{zIndex:1,visibility:t?"visible":"hidden",position:t?"auto":"fixed",height:t?"auto":0,order:((Fn=B==null?void 0:B.searchSettings)==null?void 0:Fn.searchFormPosition)===di.RIGHT?-1:1,gridRowStart:((En=B==null?void 0:B.searchSettings)==null?void 0:En.searchFormPosition)===di.BOTTOM?1:0,"& input":{border:"none"},border:"seperate","&.pp-table table":{margin:0,border:0,borderCollapse:"collapse"},"&.pp-table table tr th, &.pp-table table tr td":{boxShadow:"unset",padding:O===mt.COMPACT?"0.5rem":O===mt.COMFORTABLE?"1rem":"1.5rem",paddingRight:0},"&.pp-table table tr th":{paddingTop:O===mt.COMPACT?"0.25rem":O===mt.COMFORTABLE?"0.75rem":"1.25rem",paddingBottom:O===mt.COMPACT?"0.4rem":"0.6rem"},"&.pp-table table tr th:last-of-type, &.pp-table table tr td:last-of-type":{paddingRight:O===mt.COMPACT?"1rem":"1.5rem"}},className:"pp-table"+(Ve?" pp-table-sizer":"")},muiBottomToolbarProps:{sx:{"& > div":{...Ee&&{display:"grid",width:"100%",justifyContent:"stretch"}},"& .pp-bottom-toolbar-container":{font:"inherit",marginLeft:H.state.masterDetailConditions!==void 0?"8px":"20px"},"& > .MuiBox-root > .MuiBox-root > .MuiBox-root":{alignItems:"center",paddingTop:0,paddingRight:"10px",paddingBottom:0,paddingLeft:0},"& .MuiTablePagination-root .MuiTypography-root":{font:"inherit",paddingLeft:"0.5rem",paddingRight:"0.5rem",display:"none"},"& label.MuiFormLabel-root":{transform:"none",...Ee&&H.state.masterDetailConditions!==void 0&&{display:"none"}}}},renderBottomToolbarCustomActions:()=>$.jsxs(On,{className:"pp-bottom-toolbar-container",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[H.state.relTab!==!0&&H.state.masterDetailConditions!==void 0&&Ea(n)&&$.jsx(_n,{variant:"contained",className:"pp-builder-button",startIcon:$.jsx(xo,{}),onClick:()=>{u(ao({appId:e,hideThemeSettings:!0}))},sx:{marginRight:"15px"},children:"Table Builder"}),B.largeTableSupport.actual===gt.ENABLED?$.jsx($.Fragment,{children:B.largeTableSupport.skipCount===!0&&(Array.isArray(c)&&c.length>0||p!=null&&p!=="")?$.jsxs(gi,{children:[h.pageIndex*h.pageSize+1,"-",(h.pageIndex+1)*h.pageSize," ",de.of," ~filtered rows~ (total rows: ~",b==null?void 0:b.toLocaleString(),")"]}):$.jsxs(gi,{children:[h.pageIndex*h.pageSize+1,"-",(h.pageIndex+1)*h.pageSize," ",de.of," ~",b==null?void 0:b.toLocaleString()]})}):$.jsxs(gi,{children:[h.pageIndex*h.pageSize+1,"-",Math.min((h.pageIndex+1)*h.pageSize,b??0)," ",de.of," ",b==null?void 0:b.toLocaleString()]})]}),muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"},margin:0}}});te.debug(Re),G.useEffect(()=>{te.debug("executing effect viewLink + transactions...");const q=Re.getAllColumns();q[0].id==="mrt-row-actions"&&q[0].toggleVisibility(Ze)},[B.viewLink,B.transactions]),G.useEffect(()=>{te.debug("executing effect bulkActions...");const q=Re.getAllColumns();q[1].id==="mrt-row-select"&&q[1].toggleVisibility(ve)},[B.bulkActions]),G.useEffect(()=>{if(te.debug("executing effect overflow..."),B.design.overflow===pu.SCROLL){const q=Re.getAllColumns();for(let ee=0;ee<q.length;ee++){const V=Dr[q[ee].id];V!==void 0&&(Fe?q[ee].toggleVisibility(V.visible??!1):Ee?q[ee].toggleVisibility(V.visibleMobile??!1):q[ee].toggleVisibility(V.visibleTablet??!1))}}},[B.design.overflow,R,Fe,Ee]);const pn=(q=1)=>{var xe,Be;const ee=((xe=Re.refs.tableContainerRef.current)==null?void 0:xe.offsetWidth)??0,V=Re.getState().density==="spacious"?40:Re.getState().density==="comfortable"?32:16,se=80;let Ne=0;const we=Re.getAllColumns();for(let ae=0;ae<we.length;ae++){const Me=Dr[we[ae].id];Me!==void 0?(Me==null?void 0:Me.visible)===!0?(Ne+=we[ae].getSize()+V,Ne+se>ee?ae>q&&we[ae].toggleVisibility(!1):we[ae].toggleVisibility(!0)):we[ae].toggleVisibility(!1):(!it||((Be=we[ae])==null?void 0:Be.id)!=="mrt-row-select")&&(Ne+=we[ae].getSize()+V)}},Qr=1+(Ze?1:0)+(ve?1:0);te.debug("staticColumnNumber",Qr),G.useEffect(()=>{var ee,V;if(te.debug("executing effect density..."),ve){const se=Re.getAllColumns();((ee=se[0])==null?void 0:ee.id)==="mrt-row-select"&&(it?se[0].toggleVisibility(!1):se[0].toggleVisibility(!0)),((V=se[1])==null?void 0:V.id)==="mrt-row-select"&&(it?se[1].toggleVisibility(!1):se[1].toggleVisibility(!0))}function q(){pn(Qr)}return B.design.overflow===pu.RESPONSIVE&&(pn(Qr),window.addEventListener("resize",q)),()=>window.removeEventListener("resize",q)},[Re.getState().density,B.design.overflow,R,it,Ve,t]),G.useEffect(()=>{const q=Re.getState().density===mt.COMPACT?mt.COMPACT:Re.getState().density===mt.COMFORTABLE?mt.COMFORTABLE:mt.SPACIOUS;Y(q),u(so({appId:e,density:q}))},[Re.getState().density]),G.useEffect(()=>{te.debug("executing effect refresh..."),f.current?f.current=!1:U()},[r]),G.useEffect(()=>{},[B.searchSettings.searchForm,B.searchSettings.searchFormPosition,v]),G.useEffect(()=>{B.searchSettings.searchFormAlwaysOpen&&!Le&&vt>900&&u(du({appId:e,showColumnFilters:!0}))},[B.searchSettings.searchFormAlwaysOpen]),G.useEffect(()=>{A&&te.debug("cascade search boxes")},[p,c,g]);const oi=()=>({minWidth:0,width:"100%",gap:"6px",display:"grid"}),li=()=>null;return $.jsxs(On,{sx:oi(),className:"pp-table-container",ref:l,children:[li(),$.jsx(Eo,{table:Re})]})},ap=({appId:e,display:t,refresh:r,metaData:i,showForm:n})=>{te.debug(e,t,r);const u=new wl;return $.jsx(bl,{client:u,children:$.jsx(up,{appId:e,display:t,refresh:r,showForm:n,metaData:i})})},sp=e=>{const t=vr(r=>lo(r,e));return te.debug("tableSettingsVisible",t),t},op=()=>{const e=vr(t=>co(t));return te.debug("hideThemeSetting",e),e},lp=G.lazy(()=>cn(()=>import("./SettingsTable-1.0.7-15e4becb.js"),["./SettingsTable-1.0.7-15e4becb.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./useStoreTable-1.0.7-4bf15352.js","./useTableUpdater-1.0.7-8b30420d.js","./index-1.0.7-22a4f547.js","./AccordionSummary-1.0.7-07dc4067.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js","./settings-1.0.7-0ed115b6.js","./FormControlLabel-1.0.7-e4e2218b.js","./TextField-1.0.7-db52d17f.js","./DialogContent-1.0.7-fca1f4d6.js","./AdminTheme-1.0.7-e1a0758c.js","./Tabs-1.0.7-766143ea.js","./settings-1.0.7-5a196fc8.css","./RadioGroup-1.0.7-a99aad94.js","./Radio-1.0.7-a1fc902e.js","./DefaultWhere-1.0.7-5a862d59.js","./Link-1.0.7-7fd9c9be.js","./index.esm-1.0.7-50dfbcc7.js","./MenuItem-1.0.7-c593e11a.js","./PremiumFeature-1.0.7-7accbda7.js","./CssUnitTextField-1.0.7-44bdec8f.js"],import.meta.url)),cp=G.lazy(()=>cn(()=>import("./SettingsColumns-1.0.7-9bb5d2f6.js"),["./SettingsColumns-1.0.7-9bb5d2f6.js","./main-1.0.7.js","./useMetadataColumns-1.0.7-004f6707.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./useStoreTable-1.0.7-4bf15352.js","./AdminTheme-1.0.7-e1a0758c.js","./index.esm-1.0.7-c2078752.js","./ActionsDml-1.0.7-c9050d88.js","./index.esm-1.0.7-50dfbcc7.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./MenuItem-1.0.7-c593e11a.js","./index-1.0.7-22a4f547.js","./useTableUpdater-1.0.7-8b30420d.js","./Stepper-1.0.7-be2bc3e5.js","./settings-1.0.7-0ed115b6.js","./FormControlLabel-1.0.7-e4e2218b.js","./DialogContent-1.0.7-fca1f4d6.js","./Tabs-1.0.7-766143ea.js","./settings-1.0.7-5a196fc8.css","./Checkbox-1.0.7-e4c93e2e.js","./AccordionSummary-1.0.7-07dc4067.js","./useSlot-1.0.7-9849c4eb.js","./ScopeEnum-1.0.7-801b5acc.js","./PremiumFeature-1.0.7-7accbda7.js","./RadioGroup-1.0.7-a99aad94.js","./Radio-1.0.7-a1fc902e.js","./index.esm-1.0.7-790ca268.js","./AlertTitle-1.0.7-a2e806c7.js","./InputAdornment-1.0.7-45f92a3b.js","./DateTimePicker-1.0.7-ba971b5e.js","./useMobilePicker-1.0.7-72dd8d81.js","./date-time-utils-1.0.7-4bd69471.js","./dateViewRenderers-1.0.7-95ec4b9e.js","./TimePicker-1.0.7-a475013a.js","./DatePicker-1.0.7-438b5afb.js","./useAppLanguage-1.0.7-7d769d48.js","./index-1.0.7-2cb350a7.js"],import.meta.url)),fp=G.lazy(()=>cn(()=>import("./ThemeSettings-1.0.7-6837640e.js"),["./ThemeSettings-1.0.7-6837640e.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./index-1.0.7-2cb350a7.js","./PremiumFeature-1.0.7-7accbda7.js","./index.esm-1.0.7-50dfbcc7.js","./AdminTheme-1.0.7-e1a0758c.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./settings-1.0.7-0ed115b6.js","./FormControlLabel-1.0.7-e4e2218b.js","./DialogContent-1.0.7-fca1f4d6.js","./Tabs-1.0.7-766143ea.js","./settings-1.0.7-5a196fc8.css","./ScopeEnum-1.0.7-801b5acc.js","./RadioGroup-1.0.7-a99aad94.js","./Radio-1.0.7-a1fc902e.js","./CssUnitTextField-1.0.7-44bdec8f.js","./AccordionSummary-1.0.7-07dc4067.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),hp=({appId:e,metaData:t})=>{var b,E;te.debug(e,t);const r=Zi(),i=op(),[n,u]=G.useState(vu(rr.getState(),e));te.debug(n);const[l,d]=G.useState(fo(rr.getState(),e));te.debug(l);const[f,h]=G.useState(!1),s=()=>go(rr.getState(),e),a=S=>{r(po({appId:e,isUpdated:S}))},o=((b=gu)==null?void 0:b.palette.mode)===ho.LIGHT?(E=gu)==null?void 0:E.palette.primary.main:"",p=S=>{r(vo({anchor:S}))},y=()=>{r(mo({appId:e,tableState:n}))},c=()=>{r(Do({})),r(Du({appId:e,columnIndex:-1})),a(!1)},m=()=>{r(Du({appId:e,columnIndex:-1})),s()?h(!0):(y(),c())},v=()=>{Wo(e,tl.GLOBAL,S=>{if(te.debug(S),S!=null&&S.code&&(S==null?void 0:S.message)!==void 0)switch(S.code){case"ok":u(vu(rr.getState(),e)),Wr(S.message,{variant:"success"});break;case"info":Wr(S.message,{variant:"info"});break;default:te.error(S),Wr(S.message??pi.contactSupport,{variant:"error"})}else te.error(S),Wr(pi.contactSupport,{variant:"error"})},S=>{te.error("error",S),Wr(S??pi.contactSupport,{variant:"error"})}),a(!1)},g=()=>{s()?(v(),setTimeout(()=>{c()},1e3)):c()},[D,A]=G.useState("1"),w=(S,T)=>{A(T)},C=sp(e);return $.jsx($.Fragment,{children:C&&$.jsxs($.Fragment,{children:[$.jsxs(Uo,{closeDrawer:m,children:[$.jsx(To,{position:"static",elevation:4,sx:{borderRadius:0},children:$.jsxs(Oo,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[$.jsx(el,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Table Builder"}),$.jsx(vi,{title:"Dock to left",position:"bottom",children:$.jsx(Di,{onClick:()=>{p(mu.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:$.jsx($o,{})})}),$.jsx(vi,{title:"Dock to right",position:"bottom",children:$.jsx(Di,{onClick:()=>{p(mu.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:$.jsx(Vo,{})})}),$.jsx(vi,{title:"Close",position:"bottom",children:$.jsx(Di,{onClick:m,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:$.jsx(Po,{})})})]})}),$.jsx(yu,{className:"pp-settings-container",children:$.jsx(wu,{sx:{padding:0,margin:0},children:$.jsxs(jo,{value:D,children:[$.jsxs(Qo,{variant:"fullWidth",textColor:"primary",onChange:w,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[$.jsx(yi,{label:"Table",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),$.jsx(yi,{label:"Columns",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),i!==!0&&$.jsx(yi,{label:"Theme",value:"3",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),$.jsxs(On,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[$.jsx(mi,{value:"1",children:$.jsx(G.Suspense,{fallback:$.jsx(On,{sx:{padding:"30px"},children:$.jsx(Ro,{title:"Loading Table Builder..."})}),children:$.jsx(lp,{appId:e,metaData:t})})}),$.jsx(mi,{value:"2",children:$.jsx(G.Suspense,{children:$.jsx(cp,{appId:e,metaData:t})})}),i!==!0&&$.jsx(mi,{value:"3",children:$.jsx(G.Suspense,{children:$.jsx(fp,{appId:e,source:Io.TABLE,setIsUpdated:a})})})]})]})})}),$.jsx(yu,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:o},children:$.jsxs(wu,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[$.jsx(_n,{variant:"outlined",className:"footer_action_button_apply",onClick:v,children:"Apply"}),$.jsx(_n,{variant:"outlined",className:"footer_action_button",onClick:g,children:"OK"}),$.jsx(_n,{variant:"outlined",className:"footer_action_button",onClick:m,children:"Cancel"})]})})]}),$.jsx(Ho,{title:"Close Table Builder?",message:"All uncommitted changes will be lost!",open:f,setOpen:h,onConfirm:()=>{y(),c()},onKeep:()=>{c()}})]})})},dp=({appId:e,display:t,refresh:r,showForm:i,metaData:n})=>{te.debug(e,e,t,r);const u=G.useMemo(()=>Ea(n),[n]),l=G.useMemo(()=>yo(),[]);return $.jsxs($.Fragment,{children:[$.jsx(ap,{appId:e,display:t,refresh:r,showForm:i,metaData:n}),u&&$.jsx(zo,{theme:l,children:$.jsx(hp,{appId:e,metaData:n})})]})},xp=Object.freeze(Object.defineProperty({__proto__:null,default:dp},Symbol.toStringTag,{value:"Module"}));export{_t as A,xp as T,Tt as a};
