import{r as S,cB as vt,cC as yt,l as F,j as m,cD as ht,bh as bt,bw as gt,cl as Tt,bP as St,e as ie}from"./main-1.0.7.js";import{b as xt,u as _t,v as jt,B as Se,m as Ot,Z as wt,T as Et,ag as At,a5 as Ct}from"./main-1.0.7-9bcf9658.js";import{P as $}from"./DialogContent-1.0.7-fca1f4d6.js";import{e as Rt,f as Nt}from"./index.esm-1.0.7-8ea9dc9a.js";import{F as Te}from"./FileSaver.min-1.0.7-fd4f2e6e.js";import{d as kt}from"./ActionsDml-1.0.7-c9050d88.js";import{C as Pt}from"./settings-1.0.7-0ed115b6.js";import{B as le}from"./AdminTheme-1.0.7-e1a0758c.js";import{P as Ft}from"./TextField-1.0.7-db52d17f.js";import{T as Bt,I as It}from"./iconBase-1.0.7-dd244ceb.js";import{R as Mt}from"./RadioGroup-1.0.7-a99aad94.js";import{F as K}from"./FormControlLabel-1.0.7-e4e2218b.js";import{R as G}from"./Radio-1.0.7-a1fc902e.js";import"./Close-1.0.7-d2499b42.js";import"./Tabs-1.0.7-766143ea.js";function ee(e){if(typeof window>"u")return e;const t=S.useRef(null);return S.useLayoutEffect(()=>{t.current=e}),S.useCallback((...o)=>{var c;(c=t.current)===null||c===void 0||c.call(t,...o)},[])}const Le={};function Lt(e,t){Le[e]||(Le[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}const Ut={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1};function qt({parentPopupState:e,popupId:t,variant:o,disableAutoFocus:c}){const y=S.useRef(!0);S.useEffect(()=>(y.current=!0,()=>{y.current=!1}),[]);const[d,b]=S.useState(Ut),p=S.useCallback(f=>{y.current&&b(f)},[]),R=S.useCallback(f=>p(a=>({...a,setAnchorElUsed:!0,anchorEl:f??void 0})),[]),_=ee(f=>(d.isOpen?B(f):N(f),d)),N=ee(f=>{const a=f instanceof Element?void 0:f,T=f instanceof Element?f:(f==null?void 0:f.currentTarget)instanceof Element?f.currentTarget:void 0;if((a==null?void 0:a.type)==="touchstart"){p(x=>({...x,_deferNextOpen:!0}));return}const I=a==null?void 0:a.clientX,P=a==null?void 0:a.clientY,E=typeof I=="number"&&typeof P=="number"?{left:I,top:P}:void 0,M=x=>{if(!f&&!x.setAnchorElUsed&&o!=="dialog"&&Lt("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return x;setTimeout(()=>e._setChildPopupState(w))}const U={...x,isOpen:!0,anchorPosition:E,hovered:(a==null?void 0:a.type)==="mouseover"||x.hovered,focused:(a==null?void 0:a.type)==="focus"||x.focused,_openEventType:a==null?void 0:a.type};return x.setAnchorElUsed||(a!=null&&a.currentTarget?U.anchorEl=a==null?void 0:a.currentTarget:T&&(U.anchorEl=T)),U};p(x=>x._deferNextOpen?(setTimeout(()=>p(M),0),{...x,_deferNextOpen:!1}):M(x))}),k=f=>{const{_childPopupState:a}=f;return setTimeout(()=>{a==null||a.close(),e==null||e._setChildPopupState(null)}),{...f,isOpen:!1,hovered:!1,focused:!1}},B=ee(f=>{const a=f instanceof Element?void 0:f;if((a==null?void 0:a.type)==="touchstart"){p(T=>({...T,_deferNextClose:!0}));return}p(T=>T._deferNextClose?(setTimeout(()=>p(k),0),{...T,_deferNextClose:!1}):k(T))}),z=S.useCallback((f,a)=>{f?N(a):B(a)},[]),X=ee(f=>{const{relatedTarget:a}=f;p(T=>T.hovered&&!(a instanceof Element&&xe(a,w))?T.focused?{...T,hovered:!1}:k(T):T)}),O=ee(f=>{if(!f)return;const{relatedTarget:a}=f;p(T=>T.focused&&!(a instanceof Element&&xe(a,w))?T.hovered?{...T,focused:!1}:k(T):T)}),h=S.useCallback(f=>p(a=>({...a,_childPopupState:f})),[]),w={...d,setAnchorEl:R,popupId:t,variant:o,open:N,close:B,toggle:_,setOpen:z,onBlur:O,onMouseLeave:X,disableAutoFocus:c??!!(d.hovered||d.focused),_setChildPopupState:h};return w}function Xt({isOpen:e,popupId:t,variant:o}){return{...o==="popover"?{"aria-haspopup":!0,"aria-controls":e&&t!=null?t:void 0}:o==="popper"?{"aria-describedby":e&&t!=null?t:void 0}:void 0}}function Ht(e){return{...Xt(e),onClick:e.open,onTouchStart:e.open}}function Jt({isOpen:e,anchorEl:t,anchorPosition:o,close:c,popupId:y,onMouseLeave:d,disableAutoFocus:b,_openEventType:p}){return{id:y,anchorEl:t,anchorPosition:o,anchorReference:p==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:c,onMouseLeave:d,...b&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Wt(e,{popupId:t}){if(!t)return null;const o=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof o.getElementById=="function"?o.getElementById(t):null}function xe(e,t){const{anchorEl:o,_childPopupState:c}=t;return Ue(o,e)||Ue(Wt(e,t),e)||c!=null&&xe(e,c)}function Ue(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}function He({children:e,popupId:t,variant:o,parentPopupState:c,disableAutoFocus:y}){const d=qt({popupId:t,variant:o,parentPopupState:c,disableAutoFocus:y}),b=e(d);return b??null}He.propTypes={children:$.func.isRequired,popupId:$.string,variant:$.oneOf(["popover","popper"]).isRequired,parentPopupState:$.object,disableAutoFocus:$.bool};var Kt={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},Gt=`\r
`,Vt="\uFEFF",ae=e=>Object.assign({},Kt,e);class Yt extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class zt extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class Qt extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}class Zt extends Error{constructor(t){super(t),this.name="UnsupportedDataFormatError"}}var Y=e=>e,C=e=>e,te=Y,ce=Y,V=Y,qe=Y,Xe=Y,Dt=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},$t=e=>qe(typeof e=="object"?e.key:e),er=e=>Xe(typeof e=="object"?e.displayLabel:e),tr=(e,...t)=>t.reduce((o,c)=>c(o),e),rr=e=>t=>e.useBom?ce(C(t)+Vt):t,nr=e=>t=>e.showTitle?_e(ce(C(t)+e.title))(V("")):t,_e=e=>t=>ce(C(e)+C(t)+Gt),Je=e=>(t,o)=>or(e)(V(C(t)+C(o))),or=e=>t=>Y(C(t)+e.fieldSeparator),sr=(e,t)=>o=>{if(!e.showColumnHeaders)return o;if(t.length<1)throw new zt("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let c=V("");for(let y=0;y<t.length;y++){const d=er(t[y]);c=Je(e)(c,We(e,C(d)))}return c=V(C(c).slice(0,-1)),_e(o)(c)},ir=(e,t,o)=>c=>{let y=c;for(var d=0;d<o.length;d++){let b=V("");for(let p=0;p<t.length;p++){const R=$t(t[p]),_=o[d][C(R)];b=Je(e)(b,We(e,_))}b=V(C(b).slice(0,-1)),y=_e(y)(b)}return y},lr=e=>+e===e&&(!isFinite(e)||!!(e%1)),ur=(e,t)=>{if(lr(t)){if(e.decimalSeparator==="locale")return te(t.toLocaleString());if(e.decimalSeparator)return te(t.toString().replace(".",e.decimalSeparator))}return te(t.toString())},ue=(e,t)=>{let o=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(o=e.quoteCharacter+Dt(t,e.quoteCharacter)+e.quoteCharacter),te(o)},ar=(e,t)=>{const o=t?"true":"false";return te(e.boolDisplay[o])},cr=(e,t)=>typeof t>"u"&&e.replaceUndefinedWith!==void 0?ue(e,e.replaceUndefinedWith+""):t===null?ue(e,"null"):ue(e,""),We=(e,t)=>{if(typeof t=="number")return ur(e,t);if(typeof t=="string")return ue(e,t);if(typeof t=="boolean"&&e.boolDisplay)return ar(e,t);if(t===null||typeof t>"u")return cr(e,t);throw new Zt(`
    typeof ${typeof t} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},dr=e=>t=>{const o=ae(e),c=o.useKeysAsHeaders?Object.keys(t[0]):o.columnHeaders;let y=tr(ce(""),rr(o),nr(o),sr(o,c),ir(o,c,t));if(C(y).length<1)throw new Yt("Output is empty. Is your data formatted correctly?");return y},fr=e=>t=>{const o=ae(e),c=C(t),y=o.useTextFile?"plain":"csv";return new Blob([c],{type:`text/${y};charset=utf8;`})},pr=e=>t=>{if(!window)throw new Qt("Downloading only supported in a browser environment.");const o=fr(e)(t),c=ae(e),y=c.useTextFile?"txt":"csv",d=`${c.filename}.${y}`,b=document.createElement("a");b.download=d,b.href=URL.createObjectURL(o),b.setAttribute("visibility","hidden"),document.body.appendChild(b),b.click(),document.body.removeChild(b)},Ke={};(function(e){(function(t,o){o(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:vt,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.toXML=void 0;function o(i){return d(i)||y(i)||k(i)||c()}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function d(i){if(Array.isArray(i))return B(i)}function b(i,r){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);r&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),s.push.apply(s,l)}return s}function p(i){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?b(Object(s),!0).forEach(function(l){R(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}function R(i,r,s){return r in i?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,i}function _(i,r){return X(i)||z(i,r)||k(i,r)||N()}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(i,r){if(i){if(typeof i=="string")return B(i,r);var s=Object.prototype.toString.call(i).slice(8,-1);if(s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set")return Array.from(i);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return B(i,r)}}function B(i,r){(r==null||r>i.length)&&(r=i.length);for(var s=0,l=new Array(r);s<r;s++)l[s]=i[s];return l}function z(i,r){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var l=[],n=!0,u=!1,v,g;try{for(s=s.call(i);!(n=(v=s.next()).done)&&(l.push(v.value),!(r&&l.length===r));n=!0);}catch(j){u=!0,g=j}finally{try{!n&&s.return!=null&&s.return()}finally{if(u)throw g}}return l}}function X(i){if(Array.isArray(i))return i}function O(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(s){return typeof s}:O=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},O(i)}var h={ARRAY:"array",BOOLEAN:"boolean",DATE:"date",FUNCTION:"function",JSTOXML_OBJECT:"jstoxml-object",NULL:"null",NUMBER:"number",OBJECT:"object",STRING:"string"},w=[h.STRING,h.NUMBER,h.BOOLEAN],f='<?xml version="1.0" encoding="UTF-8"?>',a=["_selfCloseTag","_attrs"],T=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.repeat(s)},I=function(r){return Array.isArray(r)&&h.ARRAY||O(r)===h.OBJECT&&r!==null&&r._name&&h.JSTOXML_OBJECT||r instanceof Date&&h.DATE||r===null&&h.NULL||O(r)},P=function(r){return r.startsWith("<![CDATA[")},E=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,n=r;if(O(r)===h.STRING){if(P(r))return r;var u=new RegExp("(".concat(Object.keys(s).join("|"),")(?!(\\w|#)*;)"),"g");n=String(r).replace(u,function(v,g){return s[g]||""})}return typeof l=="function"?l(n):n},M=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,u=Array.isArray(r)?r:Object.entries(r).map(function(v){var g=_(v,2),j=g[0],q=g[1];return R({},j,q)});return u.reduce(function(v,g){var j=Object.keys(g)[0],q=g[j];if(O(l)===h.FUNCTION){var oe=l(j,q);if(oe)return v}var H=s?E(q,s):q,ve=!n&&H===!0?"":'="'.concat(H,'"');return v.push("".concat(j).concat(ve)),v},[])},x=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,u=M(r,s,l,n);if(u.length===0)return"";var v=u.join(" ");return" ".concat(v)},U=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(r).map(function(s){return{_name:s,_content:r[s]}})},de=function(r){return w.includes(I(r))},fe=function(r){return!r.match("<")},pe=function(r){var s=r.header,l=r.isOutputStart,n=s&&l;if(!n)return"";var u=O(s)===h.BOOLEAN;return u?f:s},re={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},ne=function i(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=s.depth,n=l===void 0?0:l,u=s.indent,v=s._isFirstItem,g=s._isOutputStart,j=g===void 0?!0:g,q=s.header,oe=s.attributeReplacements,H=oe===void 0?{}:oe,ve=s.attributeFilter,je=s.attributeExplicitTrue,Ge=je===void 0?!1:je,Oe=s.contentReplacements,ye=Oe===void 0?{}:Oe,we=s.contentMap,Ee=s.selfCloseTags,Ve=Ee===void 0?!0:Ee,Ye=typeof H=="boolean"&&!H,ze=Ye?{}:p(p({},re),H),Qe=typeof ye=="boolean"&&!ye,Ze=Qe?{}:p(p({},re),ye),Ae=typeof u=="string",he=T(u,n),De=I(r),Ce=pe({header:q,indent:u,depth:n,isOutputStart:j}),se=j&&!Ce&&v&&n===0,Re=Ae&&!se?`
`:"",L="";switch(De){case h.JSTOXML_OBJECT:{var J=r._name,W=r._content;if(W===null&&typeof we!="function"){L="".concat(Re).concat(he).concat(J);break}var $e=Array.isArray(W)&&W.every(de);if($e){var et=W.map(function(A){return i({_name:J,_content:A},p(p({},s),{},{depth:n,_isOutputStart:!1}))});return et.join("")}if(a.includes(J))break;var Q=i(W,p(p({},s),{},{depth:n+1,_isOutputStart:se})),tt=I(Q),rt=fe(Q),nt=P(Q),Ne="".concat(Re).concat(he);if(J==="_comment"){L+="".concat(Ne,"<!-- ").concat(W," -->");break}var ke=tt==="undefined"||Q==="",ot=Ve,Pe=r._selfCloseTag,Fe=O(Pe)===h.BOOLEAN?ke&&Pe:ke&&ot,st=Fe?"/":"",it=x(r._attrs,ze,ve,Ge),lt="<".concat(J).concat(it).concat(st,">"),ut=Ae&&!rt&&!nt?`
`.concat(he):"",at=Fe?"":"".concat(Q).concat(ut,"</").concat(J,">");L+="".concat(Ne).concat(lt).concat(at);break}case h.OBJECT:{var Be=Object.keys(r),ct=Be.map(function(A,Z){var be=p(p({},s),{},{_isFirstItem:Z===0,_isLastItem:Z+1===Be.length,_isOutputStart:se}),D={_name:A};if(I(r[A])===h.OBJECT){a.forEach(function(ge){var Me=r[A][ge];typeof Me<"u"&&(D[ge]=Me,delete r[A][ge])});var pt=typeof r[A]._content<"u";if(pt&&Object.keys(r[A]).length>1){var Ie=Object.assign({},r[A]);delete Ie._content,D._content=[].concat(o(U(Ie)),[r[A]._content])}}typeof D._content>"u"&&(D._content=r[A]);var mt=i(D,be);return mt},s);L=ct.join("");break}case h.FUNCTION:{var dt=r(s);L=i(dt,s);break}case h.ARRAY:{var ft=r.map(function(A,Z){var be=p(p({},s),{},{_isFirstItem:Z===0,_isLastItem:Z+1===r.length,_isOutputStart:se});return i(A,be)});L=ft.join("");break}default:{L=E(r,Ze,we);break}}return"".concat(Ce).concat(L)};t.toXML=ne;var me={toXML:ne};t.default=me})})(Ke);const mr=e=>{const t=xt(o=>yt(o,e));return F.debug("lookups",t),t},vr=({table:e,appId:t,metaData:o,bulkActions:c,tableStore:y,appLanguage:d,refetch:b})=>{F.debug(t,o);const p=_t(),R=y.table,_=y.columns;S.useState("landscape"),S.useState("striped");let N="csv";const[k,B]=S.useState(N),[z,X]=S.useState(!1),O=S.useMemo(()=>jt(),[]),h=mr(t),w=S.useMemo(()=>{const l={};return _.filter(n=>n.lookup!==void 0&&h!==void 0&&h[n.columnName]!==void 0).map(n=>{var u;if(h!==void 0&&h[n.columnName]!==void 0){const v=[];for(const g in h[n.columnName]){const j={key:g,value:Array.isArray(h[n.columnName][g])?h[n.columnName][g].join((u=n.lookup)==null?void 0:u.delimiter):h[n.columnName][g]};v.push(j)}l[n.columnName]=v}}),l},[h,_]);F.debug("lookupColumns",w);const f=S.useMemo(()=>{const l={};return _.filter(n=>n.computedField!==void 0).map(n=>{l[n.columnName]=n.computedField}),l},[_]);F.debug(f);const a=S.useMemo(()=>{const l={};return _.map(n=>{f[n.columnName]?l[n.columnName]=f[n.columnName].label:l[n.columnName]=n.columnLabel}),l},[f,_]);F.debug(a);const T=(l,n)=>{if(w!==void 0&&w[l]!==void 0){const u=w[l].filter(v=>v.key===n);if(Array.isArray(u)&&u.length===1)return u[0].value}return n},I=e.getAllColumns(),P=e.getSelectedRowModel().rows,E=P.map(l=>{const n={};return I.map(u=>{u.id!=="mrt-row-actions"&&u.id!=="mrt-row-select"&&(w!==void 0&&w[u.id]!==void 0?n[a[u.id]]=T(u.id,l.getValue(u.id)):f[u.id]||(n[a[u.id]]=l.getValue(u.id)))}),n});F.debug(E);const M=()=>{var l,n;return(o==null?void 0:o.src)===void 0?t:o.src.app_id&&((n=(l=o==null?void 0:o.app)==null?void 0:l.app[0])==null?void 0:n.app_title)!==""?o.app.app[0].app_title:o.src.dbs?o.src.tbl:t},x=ae({filename:M(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),U=l=>{const n={};if(o.primary_key&&Array.isArray(o.primary_key))for(let u=0;u<o.primary_key.length;u++){const v=o.primary_key[u];n[v]=l[v]}return n},de=l=>{var n,u,v;for(let g=0;g<((n=o==null?void 0:o.columns)==null?void 0:n.length);g++)if(((u=o==null?void 0:o.columns[g])==null?void 0:u.column_name)===l)return(v=o==null?void 0:o.columns[g])==null?void 0:v.data_type;return"varchar"},fe=async()=>{},pe=()=>{const l=dr(x)(E);pr(x)(l)},re=()=>{Te(new Blob([JSON.stringify(E)],{type:"text/json;charset=utf-8"}),M()+".json")};S.useRef();const ne=()=>{const l=P.map(u=>({row:u.original})),n=Ke.toXML({table:l});Te(new Blob([n],{type:"text/plain;charset=utf-8"}),M()+".xml")},me=()=>{const l=Tt(t);F.debug(l);let n="insert into "+l.tbl+" (";for(const u in E[0])n+=u+",";n=n.slice(0,-1)+") values ";for(let u=0;u<E.length;u++){const v=E[u];n+="(";for(const g in v){const j=St(de(g));v[g]===null?n+="null,":j==="number"?n+=v[g]+",":n+="'"+v[g]+"',"}n=n.slice(0,-1),n+="),"}n=n.slice(0,-1)+";",Te(new Blob([n],{type:"text/plain;charset=utf-8"}),M()+".sql")},i=()=>{for(let l=0;l<E.length;l++){const n=U(E[l]);kt(t,n,u=>{if(u!=null&&u.code&&(u!=null&&u.message))switch(u.code){case"ok":ie(d.deletedSuccessful,{variant:"success"}),b();break;default:F.error(u),ie(u.message??d.invalidResponse,{variant:"error"})}else F.error(u),ie(d.invalidResponse,{variant:"error"})},u=>{F.error("error",u),ie(u??d.invalidResponse,{variant:"error"})})}e.setRowSelection({})},r=()=>null,s=()=>null;return S.useState(0),S.useState(0),m.jsxs(m.Fragment,{children:[m.jsx(He,{variant:"popover",popupId:O,children:l=>{var n;return m.jsxs(Se,{children:[m.jsx(le,{variant:"contained",endIcon:m.jsx(Rt,{}),...Ht(l),children:d.bulkActions}),y.state.relTab===!0&&m.jsx(le,{variant:"contained",startIcon:m.jsx(Ot,{}),sx:{marginLeft:"10px"},onClick:()=>{p(ht({appId:t}))},children:d.back}),m.jsx(Ft,{...Jt(l),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:m.jsxs(Se,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[P.length===0&&m.jsx(Bt,{sx:{textAlign:"center",marginTop:"10px"},children:d.noRowsSelected}),m.jsxs(Mt,{value:k,onChange:(u,v)=>{B(v),u.stopPropagation()},children:[r(),c.csv&&m.jsx(K,{value:"csv",label:d.exportToCsv,control:m.jsx(G,{})}),c.json&&m.jsx(K,{value:"json",label:d.exportToJson,control:m.jsx(G,{})}),s(),c.xml&&m.jsx(K,{value:"xml",label:d.exportToXml,control:m.jsx(G,{})}),c.sql&&!bt(t)&&m.jsx(K,{value:"sql",label:d.exportToSql,control:m.jsx(G,{})}),((n=o==null?void 0:o.privs)==null?void 0:n.delete)&&!gt(o)&&(c==null?void 0:c.delete)===!0&&R.transactions.delete&&m.jsx(K,{value:"delete",label:d.deletePermanently,control:m.jsx(G,{})}),(c.select??!1)&&m.jsx(K,{value:"select",label:d.addSelectedRow,control:m.jsx(G,{})})]}),m.jsx(le,{variant:"contained",onClick:()=>{switch(k){case"pdf":fe();break;case"csv":pe();break;case"json":re();break;case"excel":break;case"xml":ne();break;case"sql":me();break;case"delete":X(!0);break}},disabled:P.length===0,children:d.apply})]})})]})}}),m.jsx(Pt,{title:d.deleteRowsTitle,message:d.deleteRowsMessage,open:z,setOpen:X,onConfirm:()=>{i()},theme:wt})]})},Nr=({table:e,metaData:t,appId:o,bulkActions:c,hasBulkActions:y,tableStore:d,appLanguage:b,refetch:p,showForm:R})=>{var N;const _=d.table;return m.jsxs(Se,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[m.jsx(Et,{arrow:!0,title:b.refresh,className:"ppToolbarRefreshIcon",children:m.jsx(It,{onClick:()=>p(),children:m.jsx(At,{})})}),((N=_==null?void 0:_.transactions)==null?void 0:N.insert)&&m.jsx(le,{variant:"contained",startIcon:m.jsx(Nt,{}),onClick:()=>{R(null,Ct.INSERT)},children:b.newRow}),y&&m.jsx(vr,{table:e,appId:o,metaData:t,bulkActions:c,tableStore:d,appLanguage:b,refetch:p})]})};export{Nr as default};
