import{l as R,c5 as Y,r as d,j as r,dx as Z,_ as b}from"./main-1.0.7.js";import{l as $}from"./ActionsDml-1.0.7-c9050d88.js";import{b as t}from"./main-1.0.7-9bcf9658.js";import{i as u}from"./index-1.0.7-2cb350a7.js";import{F as c,A as N,T as I,a as M}from"./TextField-1.0.7-db52d17f.js";import"./iconBase-1.0.7-dd244ceb.js";import"./Close-1.0.7-d2499b42.js";const n=({appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,storeForm:y,formMode:L,locale:A})=>{var F,q;R.debug(j,_,v,x,p,i,P,s,y,L,A);const E=t(e=>Y(e,j));R.debug("data",E);const[k,T]=d.useState([]);R.debug("lov",k);const[z,J]=d.useState(Array.isArray((F=i.lookup)==null?void 0:F.dynamicConditions)?(q=i.lookup)==null?void 0:q.dynamicConditions.map(e=>({columnName:e.tableColumnName,columnValue:""})):[]);R.debug("conditions",z),d.useEffect(()=>{var e,O;Array.isArray((e=i.lookup)==null?void 0:e.dynamicConditions)&&((O=i.lookup)==null||O.dynamicConditions.map(h=>{E[h.tableColumnName]===void 0&&R.error("Invalid lookup: column "+h.tableColumnName+" in dynamic condition not found.")})),z.length===0&&H()},[]),d.useEffect(()=>{var e,O;if(Object.keys(z).length>0){const h=Array.isArray((e=i.lookup)==null?void 0:e.dynamicConditions)?(O=i.lookup)==null?void 0:O.dynamicConditions.map(S=>({columnName:S.lookupColumnName,columnValue:E[S.tableColumnName]??""})):[];if(R.debug(h),!u(z,h)){const S={};h.length>0&&h.map(g=>{S[g.columnName]=g.columnValue}),R.debug("reloading dynamic lookup",_,h),H(S),J(h)}}},[E]);const H=(e={})=>{var O,h;$(j,"form",_,((O=i.lookup)==null?void 0:O.key)??"",((h=i.lookup)==null?void 0:h.value)??"",e,S=>{var g,w,B;if(R.debug(S.data),!((g=i.lookup)!=null&&g.value.includes(",")))T(S.data);else{const Q=(w=i.lookup)==null?void 0:w.value.split(","),G=[];for(let W=0;W<S.data.length;W++){const U=Q.map(X=>S.data[W][X]).join(((B=i.lookup)==null?void 0:B.delimiter)??"");G.push({key:S.data[W].key,value:U})}T(G)}},S=>{R.error(S)})},K=d.useMemo(()=>k.filter(e=>e.key===v)[0]??null,[v,k]);return r.jsxs(c,{fullWidth:!0,children:[r.jsx(N,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:k,getOptionLabel:e=>Array.isArray(e.value)?e.value[0]:e.value,value:K,onChange:(e,O)=>{O!==null?f(_,O==null?void 0:O.key):f(_,null)},renderInput:e=>r.jsx(I,{label:p.formLabel,required:p.is_nullable==="NO",...e,inputProps:{...e.inputProps,autoComplete:"new-password"}})}),r.jsx(M,{children:Z(i,A.selectEnum)})]})},C=d.lazy(()=>b(()=>import("./FieldText-1.0.7-fe8edd6b.js"),["./FieldText-1.0.7-fe8edd6b.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./InputAdornment-1.0.7-45f92a3b.js"],import.meta.url)),V=d.lazy(()=>b(()=>import("./FieldTextarea-1.0.7-87e79e37.js"),["./FieldTextarea-1.0.7-87e79e37.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js"],import.meta.url)),D=d.lazy(()=>b(()=>import("./FieldNumber-1.0.7-58fd7b3c.js"),["./FieldNumber-1.0.7-58fd7b3c.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./InputAdornment-1.0.7-45f92a3b.js"],import.meta.url)),l=d.lazy(()=>b(()=>import("./FieldSet-1.0.7-5b36399d.js"),["./FieldSet-1.0.7-5b36399d.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./MenuItem-1.0.7-c593e11a.js"],import.meta.url)),o=d.lazy(()=>b(()=>import("./FieldEnum-1.0.7-390b80b0.js"),["./FieldEnum-1.0.7-390b80b0.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./MenuItem-1.0.7-c593e11a.js","./EnumTypeEnum-1.0.7-7ffcf33a.js","./RadioGroup-1.0.7-a99aad94.js","./Radio-1.0.7-a1fc902e.js","./FormControlLabel-1.0.7-e4e2218b.js"],import.meta.url)),m=d.lazy(()=>b(()=>import("./FieldDate-1.0.7-0f65e932.js"),["./FieldDate-1.0.7-0f65e932.js","./main-1.0.7.js","./FormContainer-1.0.7-b77312e7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./AdminTheme-1.0.7-e1a0758c.js","./ActionsDml-1.0.7-c9050d88.js","./useAppLanguage-1.0.7-7d769d48.js","./CardActions-1.0.7-a34c40f3.js","./FormContainer-1.0.7-5da27d24.css","./useMobilePicker-1.0.7-72dd8d81.js","./DialogContent-1.0.7-fca1f4d6.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./InputAdornment-1.0.7-45f92a3b.js","./AdapterDayjs-1.0.7-09fd8143.js","./DatePicker-1.0.7-438b5afb.js","./dateViewRenderers-1.0.7-95ec4b9e.js"],import.meta.url)),a=d.lazy(()=>b(()=>import("./FieldDatetime-1.0.7-88aeae90.js"),["./FieldDatetime-1.0.7-88aeae90.js","./main-1.0.7.js","./FormContainer-1.0.7-b77312e7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./AdminTheme-1.0.7-e1a0758c.js","./ActionsDml-1.0.7-c9050d88.js","./useAppLanguage-1.0.7-7d769d48.js","./CardActions-1.0.7-a34c40f3.js","./FormContainer-1.0.7-5da27d24.css","./useMobilePicker-1.0.7-72dd8d81.js","./DialogContent-1.0.7-fca1f4d6.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./InputAdornment-1.0.7-45f92a3b.js","./AdapterDayjs-1.0.7-09fd8143.js","./DateTimePicker-1.0.7-ba971b5e.js","./Tabs-1.0.7-766143ea.js","./date-time-utils-1.0.7-4bd69471.js","./MenuItem-1.0.7-c593e11a.js","./dateViewRenderers-1.0.7-95ec4b9e.js"],import.meta.url)),ii=d.lazy(()=>b(()=>import("./FieldTime-1.0.7-a17feb7d.js"),["./FieldTime-1.0.7-a17feb7d.js","./main-1.0.7.js","./FormContainer-1.0.7-b77312e7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./AdminTheme-1.0.7-e1a0758c.js","./ActionsDml-1.0.7-c9050d88.js","./useAppLanguage-1.0.7-7d769d48.js","./CardActions-1.0.7-a34c40f3.js","./FormContainer-1.0.7-5da27d24.css","./useMobilePicker-1.0.7-72dd8d81.js","./DialogContent-1.0.7-fca1f4d6.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./InputAdornment-1.0.7-45f92a3b.js","./AdapterDayjs-1.0.7-09fd8143.js","./TimePicker-1.0.7-a475013a.js","./date-time-utils-1.0.7-4bd69471.js","./MenuItem-1.0.7-c593e11a.js"],import.meta.url)),si=d.lazy(()=>b(()=>import("./FieldCheckbox-1.0.7-e4faac37.js"),["./FieldCheckbox-1.0.7-e4faac37.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./FormControlLabel-1.0.7-e4e2218b.js","./Checkbox-1.0.7-e4c93e2e.js"],import.meta.url)),ri=d.lazy(()=>b(()=>import("./ColumnWpMedia-1.0.7-470215a7.js"),["./ColumnWpMedia-1.0.7-470215a7.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./index.esm-1.0.7-50dfbcc7.js","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./AdminTheme-1.0.7-e1a0758c.js"],import.meta.url)),di=d.lazy(()=>b(()=>import("./ColumnHyperlink-1.0.7-10898965.js"),["./ColumnHyperlink-1.0.7-10898965.js","./main-1.0.7.js","./main-1.0.7-9bcf9658.js","./iconBase-1.0.7-dd244ceb.js","./main-1.0.7-ca6efa15.css","./TextField-1.0.7-db52d17f.js","./Close-1.0.7-d2499b42.js","./FormControlLabel-1.0.7-e4e2218b.js","./Checkbox-1.0.7-e4c93e2e.js"],import.meta.url)),ki=({appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})=>{if(R.debug(j,_,v,x,p,i,s,y,L,A),s!=null&&s.media[_]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(s==null?void 0:s.media[_]))return r.jsx(d.Suspense,{children:r.jsx(ri,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k,columnMedia:y==null?void 0:y.media[_],mediaType:s==null?void 0:s.media[_]})});if((s==null?void 0:s.media[_])==="HyperlinkObject")return r.jsx(d.Suspense,{children:r.jsx(di,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})})}else{if(p.column_type.toLowerCase()==="tinyint(1)")return r.jsx(d.Suspense,{children:r.jsx(si,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});if(i.lookup!==void 0)return r.jsx(n,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})}switch(p.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return r.jsx(d.Suspense,{children:r.jsx(D,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});case"enum":return r.jsx(d.Suspense,{children:r.jsx(o,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});case"set":return r.jsx(d.Suspense,{children:r.jsx(l,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});case"time":return r.jsx(d.Suspense,{children:r.jsx(ii,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});case"date":return r.jsx(d.Suspense,{children:r.jsx(m,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});case"datetime":case"timestamp":return r.jsx(d.Suspense,{children:r.jsx(a,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});case"tinytext":case"text":case"mediumtext":case"longtext":return r.jsx(d.Suspense,{children:r.jsx(V,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})});default:return r.jsx(d.Suspense,{children:r.jsx(C,{appId:j,columnName:_,columnValue:v,columnInitialValue:x,columnMetaData:p,storeColumn:i,columnValidation:P,onColumnChange:f,metaData:s,context:y,storeTable:L,storeForm:A,formMode:E,locale:k})})}};export{ki as default};
