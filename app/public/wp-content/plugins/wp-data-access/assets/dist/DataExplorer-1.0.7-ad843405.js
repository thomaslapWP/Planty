import{r as p,j as e,_ as oe,l as h,T as en,U as tn,C as V,V as sn,W as nn,X as rn,Y as on,Z as an,$ as ln,a0 as cn,a1 as dn,a2 as un,a3 as pn,a4 as mn,a5 as xn,a6 as gn,a7 as hn,a8 as et,a9 as fn,aa as bn,B as He,ab as jn,ac as In,ad as yn,ae as Tn,af as Cn,ag as Sn,ah as vn,ai as wn,aj as En,ak as kn,al as Ht,am as _t,an as tt,ao as st,ap as Mn,aq as Pn,ar as qt,as as Ke,at as Xt,au as dt,av as An,aw as _n,ax as Rn,ay as Ln,az as On,aA as Dn,N as Me,aB as Jt,aC as Et,e as O,aD as Fn,aE as Rt,aF as Qt,aG as Vn,aH as Nn,aI as zn,aJ as Te,aK as it,aL as Bn,R as De,aM as Kn,aN as Wn,aO as nt,aP as ut,aQ as $n,aR as Ft,P as Gn,p as Vt,q as Un}from"./main-1.0.7.js";import{l as Hn,a as qn,b as Xn,c as Jn,d as Qn,e as Yn,f as Zn,g as er,h as tr,s as sr}from"./ActionsExplorer-1.0.7-4d40ab8a.js";import{x as nr,y as rr,z as or,C as Ve,E as rt,B as I,F as ir,u as U,b as A,M as ee,G as qe,H as ar,I as lr,g as cr,T as je,h as dr,J as ur,q as pr,K as mr,R as Xe,A as ht,e as ft,c as xr,L as gr,N as Yt,O as Zt,f as es,P as hr,Q as fr,S as Lt,k as br,v as jr,a as ts,U as Ir,p as yr}from"./main-1.0.7-9bcf9658.js";import{u as Tr,g as ss,a as ns,_ as D,b as Ie,c as pt,d as le,e as Cr,s as bt,f as rs,h as os,i as is,r as be,T as ve,I as ce,P as kt}from"./iconBase-1.0.7-dd244ceb.js";import{u as Pe,M as Ae,B as Nt,T as as,a as ls,b as mt,c as Q,d as cs}from"./index.esm-1.0.7-790ca268.js";import{b as ds,B as us,c as ps,d as Sr}from"./index.esm-1.0.7-8ea9dc9a.js";import{T as vr,a as wr}from"./index.esm-1.0.7-c2078752.js";import{C as ae}from"./Checkbox-1.0.7-e4c93e2e.js";import{f as Er,D as kr,g as Mr,h as Pr,C as xe,a as at,T as vt,i as Ar,S as We,R as _r,B as Rr,b as Lr,c as Or,d as Dr,e as zt}from"./settings-1.0.7-0ed115b6.js";import{c as ms}from"./Close-1.0.7-d2499b42.js";import{P as Bt,D as Fr,a as Vr,b as Nr}from"./DialogContent-1.0.7-fca1f4d6.js";import{A as ne,C as Mt,a as Pt,B as $,b as zr}from"./AdminTheme-1.0.7-e1a0758c.js";import{L as ye}from"./Link-1.0.7-7fd9c9be.js";import{C as Br,a as Kr}from"./index-1.0.7-dc3cd19e.js";import{F as q,b as Y,T as re,S as Ce,I as xt,a as ge,A as Kt}from"./TextField-1.0.7-db52d17f.js";import{C as Wr}from"./CardActions-1.0.7-a34c40f3.js";import{I as Wt}from"./InputAdornment-1.0.7-45f92a3b.js";import{M as K}from"./MenuItem-1.0.7-c593e11a.js";import{A as $r}from"./AdminMetaData-1.0.7-f52d4314.js";import{S as Gr}from"./ScopeEnum-1.0.7-801b5acc.js";import{A as we,a as Ee,b as ke}from"./AccordionSummary-1.0.7-07dc4067.js";import{R as xs}from"./RadioGroup-1.0.7-a99aad94.js";import{R as gt}from"./Radio-1.0.7-a1fc902e.js";import{c as Ur}from"./index-1.0.7-22a4f547.js";import{F as $e}from"./FormControlLabel-1.0.7-e4e2218b.js";import{F as Hr}from"./index.esm-1.0.7-50dfbcc7.js";import{g as qr}from"./ActionsDml-1.0.7-c9050d88.js";import{T as $t}from"./Tabs-1.0.7-766143ea.js";import"./AlertTitle-1.0.7-a2e806c7.js";import"./useSlot-1.0.7-9849c4eb.js";import"./DateTimePicker-1.0.7-ba971b5e.js";import"./useMobilePicker-1.0.7-72dd8d81.js";import"./date-time-utils-1.0.7-4bd69471.js";import"./dateViewRenderers-1.0.7-95ec4b9e.js";import"./TimePicker-1.0.7-a475013a.js";import"./DatePicker-1.0.7-438b5afb.js";function gs(t){return Tr}function Xr(t){return ss("MuiSimpleTreeView",t)}ns("MuiSimpleTreeView",["root"]);const Jr=(t,s)=>{const r=p.useRef({}),[n,o]=p.useState(()=>{const c={};return t.forEach(a=>{a.models&&Object.entries(a.models).forEach(([u,g])=>{r.current[u]={isControlled:s[u]!==void 0,getDefaultValue:g.getDefaultValue},c[u]=g.getDefaultValue(s)})}),c});return Object.fromEntries(Object.entries(r.current).map(([c,a])=>{const u=s[c]??n[c];return[c,{value:u,setControlledValue:g=>{a.isControlled||o(i=>D({},i,{[c]:g}))}}]}))};class Qr{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(s,r,n={}){let o=this.events[s];o||(o={highPriority:new Map,regular:new Map},this.events[s]=o),n.isFirst?o.highPriority.set(r,!0):o.regular.set(r,!0)}removeListener(s,r){this.events[s]&&(this.events[s].regular.delete(r),this.events[s].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(s,...r){const n=this.events[s];if(!n)return;const o=Array.from(n.highPriority.keys()),l=Array.from(n.regular.keys());for(let c=o.length-1;c>=0;c-=1){const a=o[c];n.highPriority.has(a)&&a.apply(this,r)}for(let c=0;c<l.length;c+=1){const a=l[c];n.regular.has(a)&&a.apply(this,r)}}once(s,r){const n=this;this.on(s,function o(...l){n.removeListener(s,o),r.apply(n,l)})}}const Yr=t=>t.isPropagationStopped!==void 0,hs=()=>{const[t]=p.useState(()=>new Qr),s=p.useCallback((...n)=>{const[o,l,c={}]=n;c.defaultMuiPrevented=!1,!(Yr(c)&&c.isPropagationStopped())&&t.emit(o,l,c)},[t]),r=p.useCallback((n,o)=>(t.on(n,o),()=>{t.removeListener(n,o)}),[t]);return{instance:{$$publishEvent:s,$$subscribeEvent:r}}};hs.params={};const fs=({params:t})=>{const s=nr(t.id),r=p.useCallback((n,o)=>o??`${s}-${n}`,[s]);return{getRootProps:()=>({id:s}),instance:{getTreeItemIdAttribute:r}}};fs.params={id:!0};const Zr=[hs,fs],eo=["slots","slotProps","apiRef","experimentalFeatures"],to=t=>{let{props:{slots:s,slotProps:r,apiRef:n,experimentalFeatures:o},plugins:l}=t,c=Ie(t.props,eo);const a={};l.forEach(x=>{Object.assign(a,x.params)});const u={},g={};Object.keys(c).forEach(x=>{const b=c[x];a[x]?u[x]=b:g[x]=b});const i=l.reduce((x,b)=>b.getDefaultizedParams?b.getDefaultizedParams(x):x,u);return{apiRef:n,forwardedProps:g,pluginParams:i,slots:s??{},slotProps:r??{},experimentalFeatures:o??{}}};function so(t){const s=p.useRef({});return t?(t.current==null&&(t.current={}),t.current):s.current}const no=({plugins:t,rootRef:s,props:r})=>{const n=[...Zr,...t],{pluginParams:o,forwardedProps:l,apiRef:c,experimentalFeatures:a,slots:u,slotProps:g}=to({plugins:n,props:r}),i=Jr(n,o),b=p.useRef({}).current,f=so(c),j=p.useRef(null),m=pt(j,s),[d,T]=p.useState(()=>{const S={};return n.forEach(C=>{C.getInitialState&&Object.assign(S,C.getInitialState(o))}),S}),w=n.map(S=>S.wrapItem).filter(S=>!!S),k=({itemId:S,children:C})=>{let E=C;return w.forEach(L=>{E=L({itemId:S,children:E,instance:b})}),E},_=n.map(S=>S.wrapRoot).filter(S=>!!S).reverse(),z={publicAPI:f,wrapItem:k,wrapRoot:({children:S})=>{let C=S;return _.forEach(E=>{C=E({children:C,instance:b})}),C},runItemPlugins:S=>{let C=null,E=null;return n.forEach(L=>{if(!L.itemPlugin)return;const R=L.itemPlugin({props:S,rootRef:C,contentRef:E});R!=null&&R.rootRef&&(C=R.rootRef),R!=null&&R.contentRef&&(E=R.contentRef)}),{contentRef:E,rootRef:C}},instance:b,rootRef:j},F=[],P=S=>{const C=S({instance:b,params:o,slots:u,slotProps:g,experimentalFeatures:a,state:d,setState:T,rootRef:j,models:i});C.getRootProps&&F.push(C.getRootProps),C.publicAPI&&Object.assign(f,C.publicAPI),C.instance&&Object.assign(b,C.instance),C.contextValue&&Object.assign(z,C.contextValue)};return n.forEach(P),{getRootProps:(S={})=>{const C=D({role:"tree"},l,S,{ref:m});return F.forEach(E=>{Object.assign(C,E(S))}),C},rootRef:m,contextValue:z,instance:b}},bs=p.createContext(null);function ro(t){const{value:s,children:r}=t;return e.jsx(bs.Provider,{value:s,children:s.wrapRoot({children:r})})}const js=(t,s,r)=>{t.$$publishEvent(s,r)},Se="__TREE_VIEW_ROOT_PARENT_ID__",Is=t=>{const s={};return t.forEach((r,n)=>{s[r]=n}),s},Ge=p.createContext(()=>-1),ys=({items:t,isItemDisabled:s,getItemLabel:r,getItemId:n})=>{const o={},l={},c={[Se]:[]},a=(g,i,x)=>{var m,d;const b=n?n(g):g.id;if(b==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(g)].join(`
`));if(o[b]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${b}"`].join(`
`));const f=r?r(g):g.label;if(f==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(g)].join(`
`));o[b]={id:b,label:f,parentId:x,idAttribute:void 0,expandable:!!((m=g.children)!=null&&m.length),disabled:s?s(g):!1,depth:i},l[b]=g,c[b]=[];const j=x??Se;c[j]||(c[j]=[]),c[j].push(b),(d=g.children)==null||d.forEach(T=>a(T,i+1,b))};t.forEach(g=>a(g,0,null));const u={};return Object.keys(c).forEach(g=>{u[g]=Is(c[g])}),{itemMetaMap:o,itemMap:l,itemOrderedChildrenIds:c,itemChildrenIndexes:u}},Je=({instance:t,params:s,state:r,setState:n,experimentalFeatures:o})=>{const l=p.useCallback(m=>r.items.itemMetaMap[m],[r.items.itemMetaMap]),c=p.useCallback(m=>r.items.itemMap[m],[r.items.itemMap]),a=p.useCallback(m=>{if(m==null)return!1;let d=t.getItemMeta(m);if(!d)return!1;if(d.disabled)return!0;for(;d.parentId!=null;)if(d=t.getItemMeta(d.parentId),d.disabled)return!0;return!1},[t]),u=p.useCallback(m=>{const d=t.getItemMeta(m).parentId??Se;return r.items.itemChildrenIndexes[d][m]},[t,r.items.itemChildrenIndexes]),g=p.useCallback(m=>r.items.itemOrderedChildrenIds[m??Se]??[],[r.items.itemOrderedChildrenIds]),i=m=>s.disabledItemsFocusable?!0:!t.isItemDisabled(m),x=p.useRef(!1),b=p.useCallback(()=>{x.current=!0},[]),f=p.useCallback(()=>x.current,[]);return p.useEffect(()=>{t.areItemUpdatesPrevented()||n(m=>{const d=ys({items:s.items,isItemDisabled:s.isItemDisabled,getItemId:s.getItemId,getItemLabel:s.getItemLabel});return Object.values(m.items.itemMetaMap).forEach(T=>{d.itemMetaMap[T.id]||js(t,"removeItem",{id:T.id})}),D({},m,{items:d})})},[t,n,s.items,s.isItemDisabled,s.getItemId,s.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof s.itemChildrenIndentation=="number"?`${s.itemChildrenIndentation}px`:s.itemChildrenIndentation}}),publicAPI:{getItem:c},instance:{getItemMeta:l,getItem:c,getItemsToRender:()=>{const m=d=>{const T=r.items.itemMetaMap[d];return{label:T.label,itemId:T.id,id:T.idAttribute,children:r.items.itemOrderedChildrenIds[d].map(m)}};return r.items.itemOrderedChildrenIds[Se].map(m)},getItemIndex:u,getItemOrderedChildrenIds:g,isItemDisabled:a,isItemNavigable:i,preventItemUpdates:b,areItemUpdatesPrevented:f},contextValue:{disabledItemsFocusable:s.disabledItemsFocusable,indentationAtItemLevel:o.indentationAtItemLevel??!1}}};Je.getInitialState=t=>({items:ys({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel})});Je.getDefaultizedParams=t=>D({},t,{disabledItemsFocusable:t.disabledItemsFocusable??!1,itemChildrenIndentation:t.itemChildrenIndentation??"12px"});Je.wrapRoot=({children:t,instance:s})=>e.jsx(Ge.Provider,{value:r=>{var n;return((n=s.getItemMeta(r))==null?void 0:n.depth)??0},children:t});Je.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,itemChildrenIndentation:!0};const jt=({instance:t,params:s,models:r})=>{const n=p.useMemo(()=>{const x=new Map;return r.expandedItems.value.forEach(b=>{x.set(b,!0)}),x},[r.expandedItems.value]),o=(x,b)=>{var f;(f=s.onExpandedItemsChange)==null||f.call(s,x,b),r.expandedItems.setControlledValue(b)},l=p.useCallback(x=>n.has(x),[n]),c=p.useCallback(x=>{var b;return!!((b=t.getItemMeta(x))!=null&&b.expandable)},[t]),a=le((x,b)=>{const f=t.isItemExpanded(b);t.setItemExpansion(x,b,!f)}),u=le((x,b,f)=>{if(t.isItemExpanded(b)===f)return;let m;f?m=[b].concat(r.expandedItems.value):m=r.expandedItems.value.filter(d=>d!==b),s.onItemExpansionToggle&&s.onItemExpansionToggle(x,b,f),o(x,m)}),g=(x,b)=>{const f=t.getItemMeta(b),m=t.getItemOrderedChildrenIds(f.parentId).filter(T=>t.isItemExpandable(T)&&!t.isItemExpanded(T)),d=r.expandedItems.value.concat(m);m.length>0&&(s.onItemExpansionToggle&&m.forEach(T=>{s.onItemExpansionToggle(x,T,!0)}),o(x,d))},i=p.useMemo(()=>s.expansionTrigger?s.expansionTrigger:"content",[s.expansionTrigger]);return{publicAPI:{setItemExpansion:u},instance:{isItemExpanded:l,isItemExpandable:c,setItemExpansion:u,toggleItemExpansion:a,expandAllSiblings:g},contextValue:{expansion:{expansionTrigger:i}}}};jt.models={expandedItems:{getDefaultValue:t=>t.defaultExpandedItems}};const oo=[];jt.getDefaultizedParams=t=>D({},t,{defaultExpandedItems:t.defaultExpandedItems??oo});jt.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Ts=(t,s)=>{let r=s.length-1;for(;r>=0&&!t.isItemNavigable(s[r]);)r-=1;if(r!==-1)return s[r]},Cs=(t,s)=>{const r=t.getItemMeta(s),n=t.getItemOrderedChildrenIds(r.parentId),o=t.getItemIndex(s);if(o===0)return r.parentId;let l=o-1;for(;!t.isItemNavigable(n[l])&&l>=0;)l-=1;if(l===-1)return r.parentId==null?null:Cs(t,r.parentId);let c=n[l],a=Ts(t,t.getItemOrderedChildrenIds(c));for(;t.isItemExpanded(c)&&a!=null;)c=a,a=t.getItemOrderedChildrenIds(c).find(t.isItemNavigable);return c},lt=(t,s)=>{if(t.isItemExpanded(s)){const n=t.getItemOrderedChildrenIds(s).find(t.isItemNavigable);if(n!=null)return n}let r=t.getItemMeta(s);for(;r!=null;){const n=t.getItemOrderedChildrenIds(r.parentId),o=t.getItemIndex(r.id);if(o<n.length-1){let l=o+1;for(;!t.isItemNavigable(n[l])&&l<n.length-1;)l+=1;if(t.isItemNavigable(n[l]))return n[l]}r=t.getItemMeta(r.parentId)}return null},Ss=t=>{let s=null;for(;s==null||t.isItemExpanded(s);){const r=t.getItemOrderedChildrenIds(s),n=Ts(t,r);if(n==null)return s;s=n}return s},Ue=t=>t.getItemOrderedChildrenIds(null).find(t.isItemNavigable),vs=(t,s,r)=>{if(s===r)return[s,r];const n=t.getItemMeta(s),o=t.getItemMeta(r);if(n.parentId===o.id||o.parentId===n.id)return o.parentId===n.id?[n.id,o.id]:[o.id,n.id];const l=[n.id],c=[o.id];let a=n.parentId,u=o.parentId,g=c.indexOf(a)!==-1,i=l.indexOf(u)!==-1,x=!0,b=!0;for(;!i&&!g;)x&&(l.push(a),g=c.indexOf(a)!==-1,x=a!==null,!g&&x&&(a=t.getItemMeta(a).parentId)),b&&!g&&(c.push(u),i=l.indexOf(u)!==-1,b=u!==null,!i&&b&&(u=t.getItemMeta(u).parentId));const f=g?a:u,j=t.getItemOrderedChildrenIds(f),m=l[l.indexOf(f)-1],d=c[c.indexOf(f)-1];return j.indexOf(m)<j.indexOf(d)?[s,r]:[r,s]},io=(t,s,r)=>{const n=u=>{if(t.isItemExpandable(u)&&t.isItemExpanded(u))return t.getItemOrderedChildrenIds(u)[0];let g=t.getItemMeta(u);for(;g!=null;){const i=t.getItemOrderedChildrenIds(g.parentId),x=t.getItemIndex(g.id);if(x<i.length-1)return i[x+1];g=t.getItemMeta(g.parentId)}throw new Error("Invalid range")},[o,l]=vs(t,s,r),c=[o];let a=o;for(;a!==l;)a=n(a),t.isItemDisabled(a)||c.push(a);return c},ao=t=>{let s=Ue(t);const r=[];for(;s!=null;)r.push(s),s=lt(t,s);return r},ct=t=>Array.isArray(t)?t:t!=null?[t]:[],wt=t=>{const s={};return t.forEach(r=>{s[r]=!0}),s},It=({instance:t,params:s,models:r})=>{const n=p.useRef(null),o=p.useRef({}),l=p.useMemo(()=>{const m=new Map;return Array.isArray(r.selectedItems.value)?r.selectedItems.value.forEach(d=>{m.set(d,!0)}):r.selectedItems.value!=null&&m.set(r.selectedItems.value,!0),m},[r.selectedItems.value]),c=(m,d)=>{if(s.onItemSelectionToggle)if(s.multiSelect){const T=d.filter(k=>!t.isItemSelected(k)),w=r.selectedItems.value.filter(k=>!d.includes(k));T.forEach(k=>{s.onItemSelectionToggle(m,k,!0)}),w.forEach(k=>{s.onItemSelectionToggle(m,k,!1)})}else d!==r.selectedItems.value&&(r.selectedItems.value!=null&&s.onItemSelectionToggle(m,r.selectedItems.value,!1),d!=null&&s.onItemSelectionToggle(m,d,!0));s.onSelectedItemsChange&&s.onSelectedItemsChange(m,d),r.selectedItems.setControlledValue(d)},a=m=>l.has(m),u=(m,d,T,w)=>{if(s.disableSelection)return;let k;if(T){const _=ct(r.selectedItems.value),N=t.isItemSelected(d);N&&(w===!1||w==null)?k=_.filter(M=>M!==d):!N&&(w===!0||w==null)?k=[d].concat(_):k=_}else w===!1?k=s.multiSelect?[]:null:k=s.multiSelect?[d]:d;c(m,k),n.current=d,o.current={}},g=(m,[d,T])=>{if(s.disableSelection||!s.multiSelect)return;let w=ct(r.selectedItems.value).slice();Object.keys(o.current).length>0&&(w=w.filter(M=>!o.current[M]));const k=wt(w),_=io(t,d,T),N=_.filter(M=>!k[M]);w=w.concat(N),c(m,w),o.current=wt(_)};return{getRootProps:()=>({"aria-multiselectable":s.multiSelect}),instance:{isItemSelected:a,selectItem:u,selectAllNavigableItems:m=>{if(s.disableSelection||!s.multiSelect)return;const d=ao(t);c(m,d),o.current=wt(d)},expandSelectionRange:(m,d)=>{if(n.current!=null){const[T,w]=vs(t,d,n.current);g(m,[T,w])}},selectRangeFromStartToItem:(m,d)=>{g(m,[Ue(t),d])},selectRangeFromItemToEnd:(m,d)=>{g(m,[d,Ss(t)])},selectItemFromArrowNavigation:(m,d,T)=>{if(s.disableSelection||!s.multiSelect)return;let w=ct(r.selectedItems.value).slice();Object.keys(o.current).length===0?(w.push(T),o.current={[d]:!0,[T]:!0}):(o.current[d]||(o.current={}),o.current[T]?(w=w.filter(k=>k!==d),delete o.current[d]):(w.push(T),o.current[T]=!0)),c(m,w)}},contextValue:{selection:{multiSelect:s.multiSelect,checkboxSelection:s.checkboxSelection,disableSelection:s.disableSelection}}}};It.models={selectedItems:{getDefaultValue:t=>t.defaultSelectedItems}};const lo=[];It.getDefaultizedParams=t=>D({},t,{disableSelection:t.disableSelection??!1,multiSelect:t.multiSelect??!1,checkboxSelection:t.checkboxSelection??!1,defaultSelectedItems:t.defaultSelectedItems??(t.multiSelect?lo:null)});It.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const Gt=1e3;class co{constructor(s=Gt){this.timeouts=new Map,this.cleanupTimeout=Gt,this.cleanupTimeout=s}register(s,r,n){this.timeouts||(this.timeouts=new Map);const o=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,o)}unregister(s){const r=this.timeouts.get(s.cleanupToken);r&&(this.timeouts.delete(s.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((s,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class uo{constructor(){this.registry=new FinalizationRegistry(s=>{typeof s=="function"&&s()})}register(s,r,n){this.registry.register(s,r,n)}unregister(s){this.registry.unregister(s)}reset(){}}class po{}function mo(t){let s=0;return function(n,o,l){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new uo:new co);const[c]=p.useState(new po),a=p.useRef(null),u=p.useRef();u.current=l;const g=p.useRef(null);if(!a.current&&u.current){const i=(x,b)=>{var f;b.defaultMuiPrevented||(f=u.current)==null||f.call(u,x,b)};a.current=n.$$subscribeEvent(o,i),s+=1,g.current={cleanupToken:s},t.registry.register(c,()=>{var x;(x=a.current)==null||x.call(a),a.current=null,g.current=null},g.current)}else!u.current&&a.current&&(a.current(),a.current=null,g.current&&(t.registry.unregister(g.current),g.current=null));p.useEffect(()=>{if(!a.current&&u.current){const i=(x,b)=>{var f;b.defaultMuiPrevented||(f=u.current)==null||f.call(u,x,b)};a.current=n.$$subscribeEvent(o,i)}return g.current&&t.registry&&(t.registry.unregister(g.current),g.current=null),()=>{var i;(i=a.current)==null||i.call(a),a.current=null}},[n,o])}}const xo={registry:null},go=mo(xo),ws=(t=document)=>{const s=t.activeElement;return s?s.shadowRoot?ws(s.shadowRoot):s:null};function ho(t){return t.replace(/["\\]/g,"\\$&")}const fo=(t,s)=>{let r=ct(s).find(n=>{if(!t.isItemNavigable(n))return!1;const o=t.getItemMeta(n);return o&&(o.parentId==null||t.isItemExpanded(o.parentId))});return r==null&&(r=Ue(t)),r},Ot=({instance:t,params:s,state:r,setState:n,models:o,rootRef:l})=>{const c=fo(t,o.selectedItems.value),a=le(d=>{const T=typeof d=="function"?d(r.focusedItemId):d;r.focusedItemId!==T&&n(w=>D({},w,{focusedItemId:T}))}),u=p.useCallback(()=>!!l.current&&l.current.contains(ws(rr(l.current))),[l]),g=p.useCallback(d=>r.focusedItemId===d&&u(),[r.focusedItemId,u]),i=d=>{const T=t.getItemMeta(d);return T&&(T.parentId==null||t.isItemExpanded(T.parentId))},x=(d,T)=>{const w=t.getItemMeta(T),k=document.getElementById(t.getTreeItemIdAttribute(T,w.idAttribute));k&&k.focus(),a(T),s.onItemFocus&&s.onItemFocus(d,T)},b=le((d,T)=>{i(T)&&x(d,T)}),f=le(()=>{if(r.focusedItemId==null)return;const d=t.getItemMeta(r.focusedItemId);if(d){const T=document.getElementById(t.getTreeItemIdAttribute(r.focusedItemId,d.idAttribute));T&&T.blur()}a(null)}),j=d=>d===c;go(t,"removeItem",({id:d})=>{r.focusedItemId===d&&x(null,c)});const m=d=>T=>{var w;(w=d.onFocus)==null||w.call(d,T),!T.defaultMuiPrevented&&T.target===T.currentTarget&&x(T,c)};return{getRootProps:d=>({onFocus:m(d)}),publicAPI:{focusItem:b},instance:{isItemFocused:g,canItemBeTabbed:j,focusItem:b,removeFocusedItem:f}}};Ot.getInitialState=()=>({focusedItemId:null});Ot.params={onItemFocus:!0};function bo(t){return!!t&&t.length===1&&!!t.match(/\S/)}const Es=({instance:t,params:s,state:r})=>{const n=or(),o=p.useRef({}),l=le(i=>{o.current=i(o.current)});p.useEffect(()=>{if(t.areItemUpdatesPrevented())return;const i={},x=b=>{i[b.id]=b.label.substring(0,1).toLowerCase()};Object.values(r.items.itemMetaMap).forEach(x),o.current=i},[r.items.itemMetaMap,s.getItemId,t]);const c=(i,x)=>{const b=x.toLowerCase(),f=T=>{const w=lt(t,T);return w===null?Ue(t):w};let j=null,m=f(i);const d={};for(;j==null&&!d[m];)o.current[m]===b?j=m:(d[m]=!0,m=f(m));return j},a=i=>!s.disableSelection&&!t.isItemDisabled(i),u=i=>!t.isItemDisabled(i)&&t.isItemExpandable(i);return{instance:{updateFirstCharMap:l,handleItemKeyDown:(i,x)=>{if(i.defaultMuiPrevented||i.altKey||i.currentTarget!==i.target.closest('*[role="treeitem"]'))return;const b=i.ctrlKey||i.metaKey,f=i.key;switch(!0){case(f===" "&&a(x)):{i.preventDefault(),s.multiSelect&&i.shiftKey?t.expandSelectionRange(i,x):s.multiSelect?t.selectItem(i,x,!0):t.selectItem(i,x,!1);break}case f==="Enter":{u(x)?(t.toggleItemExpansion(i,x),i.preventDefault()):a(x)&&(s.multiSelect?(i.preventDefault(),t.selectItem(i,x,!0)):t.isItemSelected(x)||(t.selectItem(i,x,!1),i.preventDefault()));break}case f==="ArrowDown":{const j=lt(t,x);j&&(i.preventDefault(),t.focusItem(i,j),s.multiSelect&&i.shiftKey&&a(j)&&t.selectItemFromArrowNavigation(i,x,j));break}case f==="ArrowUp":{const j=Cs(t,x);j&&(i.preventDefault(),t.focusItem(i,j),s.multiSelect&&i.shiftKey&&a(j)&&t.selectItemFromArrowNavigation(i,x,j));break}case(f==="ArrowRight"&&!n||f==="ArrowLeft"&&n):{if(t.isItemExpanded(x)){const j=lt(t,x);j&&(t.focusItem(i,j),i.preventDefault())}else u(x)&&(t.toggleItemExpansion(i,x),i.preventDefault());break}case(f==="ArrowLeft"&&!n||f==="ArrowRight"&&n):{if(u(x)&&t.isItemExpanded(x))t.toggleItemExpansion(i,x),i.preventDefault();else{const j=t.getItemMeta(x).parentId;j&&(t.focusItem(i,j),i.preventDefault())}break}case f==="Home":{a(x)&&s.multiSelect&&b&&i.shiftKey?t.selectRangeFromStartToItem(i,x):t.focusItem(i,Ue(t)),i.preventDefault();break}case f==="End":{a(x)&&s.multiSelect&&b&&i.shiftKey?t.selectRangeFromItemToEnd(i,x):t.focusItem(i,Ss(t)),i.preventDefault();break}case f==="*":{t.expandAllSiblings(i,x),i.preventDefault();break}case(f==="a"&&b&&s.multiSelect&&!s.disableSelection):{t.selectAllNavigableItems(i),i.preventDefault();break}case(!b&&!i.shiftKey&&bo(f)):{const j=c(x,f);j!=null&&(t.focusItem(i,j),i.preventDefault());break}}}}}};Es.params={};const ks=({slots:t,slotProps:s})=>({contextValue:{icons:{slots:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon},slotProps:{collapseIcon:s.collapseIcon,expandIcon:s.expandIcon,endIcon:s.endIcon}}}});ks.params={};const Qe=()=>{const t=p.useContext(bs);if(t==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return t},Ms=p.createContext(null);function Ps(t){const{children:s,itemId:r=null}=t,{instance:n,rootRef:o}=Qe(),l=p.useRef(new Map);p.useEffect(()=>{if(!o.current)return;let a=null;if(r==null)a=o.current.id;else{const f=n.getItemMeta(r);f!==void 0&&(a=n.getTreeItemIdAttribute(r,f.idAttribute))}if(a==null)return;const u=n.getItemOrderedChildrenIds(r??null)??[],g=ho(a),i=o.current.querySelectorAll(`${r==null?"":`*[id="${g}"] `}[role="treeitem"]:not(*[id="${g}"] [role="treeitem"] [role="treeitem"])`),x=Array.from(i).map(f=>l.current.get(f.id));(x.length!==u.length||x.some((f,j)=>f!==u[j]))&&n.setJSXItemsOrderedChildrenIds(r??null,x)});const c=p.useMemo(()=>({registerChild:(a,u)=>l.current.set(a,u),unregisterChild:a=>l.current.delete(a),parentId:r}),[r]);return e.jsx(Ms.Provider,{value:c,children:s})}const Ye=({instance:t,setState:s})=>{t.preventItemUpdates();const r=le(l=>(s(c=>{if(c.items.itemMetaMap[l.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${l.id}"`].join(`
`));return D({},c,{items:D({},c.items,{itemMetaMap:D({},c.items.itemMetaMap,{[l.id]:l}),itemMap:D({},c.items.itemMap,{[l.id]:{id:l.id,label:l.label}})})})}),()=>{s(c=>{const a=D({},c.items.itemMetaMap),u=D({},c.items.itemMap);return delete a[l.id],delete u[l.id],D({},c,{items:D({},c.items,{itemMetaMap:a,itemMap:u})})}),js(t,"removeItem",{id:l.id})})),n=(l,c)=>{const a=l??Se;s(u=>D({},u,{items:D({},u.items,{itemOrderedChildrenIds:D({},u.items.itemOrderedChildrenIds,{[a]:c}),itemChildrenIndexes:D({},u.items.itemChildrenIndexes,{[a]:Is(c)})})}))},o=le((l,c)=>(t.updateFirstCharMap(a=>(a[l]=c,a)),()=>{t.updateFirstCharMap(a=>{const u=D({},a);return delete u[l],u})}));return{instance:{insertJSXItem:r,setJSXItemsOrderedChildrenIds:n,mapFirstCharFromJSX:o}}},As=t=>Array.isArray(t)?t.length>0&&t.some(As):!!t,jo=({props:t,rootRef:s,contentRef:r})=>{const{instance:n}=Qe(),{children:o,disabled:l=!1,label:c,itemId:a,id:u}=t,g=p.useContext(Ms);if(g==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:i,unregisterChild:x,parentId:b}=g,f=As(o),j=p.useRef(null),m=pt(j,r);return Cr(()=>{const d=n.getTreeItemIdAttribute(a,u);return i(d,a),()=>{x(d)}},[n,i,x,a,u]),p.useEffect(()=>n.insertJSXItem({id:a,idAttribute:u,parentId:b,expandable:f,disabled:l}),[n,b,a,f,l,u]),p.useEffect(()=>{var d;if(c)return n.mapFirstCharFromJSX(a,(((d=j.current)==null?void 0:d.textContent)??"").substring(0,1).toLowerCase())},[n,a,c]),{contentRef:m,rootRef:s}};Ye.itemPlugin=jo;Ye.wrapItem=({children:t,itemId:s})=>{const r=p.useContext(Ge);return e.jsx(Ps,{itemId:s,children:e.jsx(Ge.Provider,{value:r+1,children:t})})};Ye.wrapRoot=({children:t})=>e.jsx(Ps,{children:e.jsx(Ge.Provider,{value:0,children:t})});Ye.params={};const Io=[Je,jt,It,Ot,Es,ks,Ye],yo=(t,s="warning")=>{let r=!1;const n=Array.isArray(t)?t.join(`
`):t;return()=>{r||(r=!0,s==="error"?console.error(n):console.warn(n))}},To=gs(),Co=t=>{const{classes:s}=t;return rs({root:["root"]},Xr,s)},So=bt("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(t,s)=>s.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),vo=[];yo(["MUI X: The `SimpleTreeView` component does not support the `items` prop.","If you want to add items, you need to pass them as JSX children.","Check the documentation for more details: https://mui.com/x/react-tree-view/simple-tree-view/items/"]);const Ze=p.forwardRef(function(s,r){const n=To({props:s,name:"MuiSimpleTreeView"}),o=n,{getRootProps:l,contextValue:c}=no({plugins:Io,rootRef:r,props:D({},n,{items:vo})}),{slots:a,slotProps:u}=n,g=Co(n),i=(a==null?void 0:a.root)??So,x=Ve({elementType:i,externalSlotProps:u==null?void 0:u.root,className:g.root,getSlotProps:l,ownerState:o});return e.jsx(ro,{value:c,children:e.jsx(i,D({},x))})});function _s(t){const{instance:s,selection:{multiSelect:r,checkboxSelection:n,disableSelection:o},expansion:{expansionTrigger:l}}=Qe(),c=s.isItemExpandable(t),a=s.isItemExpanded(t),u=s.isItemFocused(t),g=s.isItemSelected(t),i=s.isItemDisabled(t);return{disabled:i,expanded:a,selected:g,focused:u,disableSelection:o,checkboxSelection:n,handleExpansion:m=>{if(!i){u||s.focusItem(m,t);const d=r&&(m.shiftKey||m.ctrlKey||m.metaKey);c&&!(d&&s.isItemExpanded(t))&&s.toggleItemExpansion(m,t)}},handleSelection:m=>{i||(u||s.focusItem(m,t),r&&(m.shiftKey||m.ctrlKey||m.metaKey)?m.shiftKey?s.expandSelectionRange(m,t):s.selectItem(m,t,!0):s.selectItem(m,t,!1))},handleCheckboxSelection:m=>{if(o||i)return;const d=m.nativeEvent.shiftKey;r&&d?s.expandSelectionRange(m,t):s.selectItem(m,t,r,m.target.checked)},preventSelection:m=>{(m.shiftKey||m.ctrlKey||m.metaKey||i)&&m.preventDefault()},expansionTrigger:l}}const wo=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown"],Rs=p.forwardRef(function(s,r){const{classes:n,className:o,displayIcon:l,expansionIcon:c,icon:a,label:u,itemId:g,onClick:i,onMouseDown:x}=s,b=Ie(s,wo),{disabled:f,expanded:j,selected:m,focused:d,disableSelection:T,checkboxSelection:w,handleExpansion:k,handleSelection:_,handleCheckboxSelection:N,preventSelection:M,expansionTrigger:z}=_s(g),F=a||c||l,P=p.useRef(null),v=C=>{M(C),x&&x(C)},S=C=>{var E;(E=P.current)!=null&&E.contains(C.target)||(z==="content"&&k(C),w||_(C),i&&i(C))};return e.jsxs("div",D({},b,{className:os(o,n.root,j&&n.expanded,m&&n.selected,d&&n.focused,f&&n.disabled),onClick:S,onMouseDown:v,ref:r,children:[e.jsx("div",{className:n.iconContainer,children:F}),w&&e.jsx(ae,{className:n.checkbox,checked:m,onChange:N,disabled:f||T,ref:P,tabIndex:-1}),e.jsx("div",{className:n.label,children:u})]}))});function Eo(t){return ss("MuiTreeItem",t)}const se=ns("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox"]),ko=ms(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Mo=ms(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function Ls(t){const{children:s,itemId:r}=t,{wrapItem:n,instance:o}=Qe();return n({children:s,itemId:r,instance:o})}Ls.propTypes={children:Bt.node,itemId:Bt.string.isRequired};const Po=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],Ao=["ownerState"],_o=["ownerState"],Ro=["ownerState"],Lo=gs(),Oo=t=>{const{classes:s}=t;return rs({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],groupTransition:["groupTransition"]},Eo,s)},Do=bt("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,s)=>s.root})({listStyle:"none",margin:0,padding:0,outline:0}),Fo=bt(Rs,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,s)=>[s.content,s.iconContainer&&{[`& .${se.iconContainer}`]:s.iconContainer},s.label&&{[`& .${se.label}`]:s.label}],shouldForwardProp:t=>is(t)&&t!=="indentationAtItemLevel"})(({theme:t})=>({padding:t.spacing(.5,1),borderRadius:t.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:t.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${se.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${se.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rt(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rt(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${se.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:rt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${se.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${se.label}`]:D({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1),[`& .${se.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${t.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]})),Vo=bt(Er,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(t,s)=>s.groupTransition,shouldForwardProp:t=>is(t)&&t!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),Z=p.forwardRef(function(s,r){const{icons:n,runItemPlugins:o,selection:{multiSelect:l},expansion:{expansionTrigger:c},disabledItemsFocusable:a,indentationAtItemLevel:u,instance:g}=Qe(),i=p.useContext(Ge),x=Lo({props:s,name:"MuiTreeItem"}),{children:b,className:f,slots:j,slotProps:m,ContentComponent:d=Rs,ContentProps:T,itemId:w,id:k,label:_,onClick:N,onMouseDown:M,onBlur:z,onKeyDown:F}=x,P=Ie(x,Po),{expanded:v,focused:S,selected:C,disabled:E,handleExpansion:L}=_s(w),{contentRef:R,rootRef:he}=o(x),H=pt(r,he),ue=pt(T==null?void 0:T.ref,R),ie={expandIcon:(j==null?void 0:j.expandIcon)??n.slots.expandIcon??ko,collapseIcon:(j==null?void 0:j.collapseIcon)??n.slots.collapseIcon??Mo,endIcon:(j==null?void 0:j.endIcon)??n.slots.endIcon,icon:j==null?void 0:j.icon,groupTransition:j==null?void 0:j.groupTransition},Le=B=>Array.isArray(B)?B.length>0&&B.some(Le):!!B,pe=Le(b),fe=D({},x,{expanded:v,focused:S,selected:C,disabled:E,indentationAtItemLevel:u}),X=Oo(fe),Oe=ie.groupTransition??void 0,y=Ve({elementType:Oe,ownerState:{},externalSlotProps:m==null?void 0:m.groupTransition,additionalProps:D({unmountOnExit:!0,in:v,component:"ul",role:"group"},u?{indentationAtItemLevel:!0}:{}),className:X.groupTransition}),te=B=>{c==="iconContainer"&&L(B)},yt=v?ie.collapseIcon:ie.expandIcon,zs=Ve({elementType:yt,ownerState:{},externalSlotProps:B=>v?D({},be(n.slotProps.collapseIcon,B),be(m==null?void 0:m.collapseIcon,B)):D({},be(n.slotProps.expandIcon,B),be(m==null?void 0:m.expandIcon,B)),additionalProps:{onClick:te}}),Bs=Ie(zs,Ao),Ks=pe&&yt?e.jsx(yt,D({},Bs)):null,Tt=pe?void 0:ie.endIcon,Ws=Ve({elementType:Tt,ownerState:{},externalSlotProps:B=>pe?{}:D({},be(n.slotProps.endIcon,B),be(m==null?void 0:m.endIcon,B))}),$s=Ie(Ws,_o),Gs=Tt?e.jsx(Tt,D({},$s)):null,Ct=ie.icon,Us=Ve({elementType:Ct,ownerState:{},externalSlotProps:m==null?void 0:m.icon}),Hs=Ie(Us,Ro),qs=Ct?e.jsx(Ct,D({},Hs)):null;let St;l?St=C:C&&(St=!0);function Xs(B){!S&&(!E||a)&&B.currentTarget===B.target&&g.focusItem(B,w)}function Js(B){z==null||z(B),g.removeFocusedItem()}const Qs=B=>{F==null||F(B),g.handleItemKeyDown(B,w)},Ys=g.getTreeItemIdAttribute(w,k),Zs=g.canItemBeTabbed(w)?0:-1;return e.jsx(Ls,{itemId:w,children:e.jsxs(Do,D({className:os(X.root,f),role:"treeitem","aria-expanded":pe?v:void 0,"aria-selected":St,"aria-disabled":E||void 0,id:Ys,tabIndex:Zs},P,{ownerState:fe,onFocus:Xs,onBlur:Js,onKeyDown:Qs,ref:H,style:u?D({},P.style,{"--TreeView-itemDepth":typeof i=="function"?i(w):i}):P.style,children:[e.jsx(Fo,D({as:d,classes:{root:X.content,expanded:X.expanded,selected:X.selected,focused:X.focused,disabled:X.disabled,iconContainer:X.iconContainer,label:X.label,checkbox:X.checkbox},label:_,itemId:w,onClick:N,onMouseDown:M,icon:qs,expansionIcon:Ks,displayIcon:Gs,ownerState:fe},T,{ref:ue})),b&&e.jsx(Vo,D({as:Oe},y,{children:b}))]}))})}),de=()=>e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"30px"},children:[e.jsx(ir,{sx:{width:"1em !important",height:"1em !important"}}),e.jsx(ve,{children:"Loading..."})]}),_e={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTablePaperProps:{sx:{boxShadow:"none",marginRight:"30px",marginBottom:"40px"}}},Re=({msg:t})=>e.jsx(I,{sx:{padding:"1rem 0",marginBottom:"20px"},children:e.jsx(ve,{children:t})}),No=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),zo=({dbs:t,tbl:s})=>{h.debug(t,s);const r=U(),n=A(i=>en(i,t,s));h.debug(n);const o=A(i=>tn(i,t,s));h.debug(o);const[l,c]=p.useState("");p.useEffect(()=>{n||a()},[n]);const a=()=>{Hn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(sn({dbs:t,tbl:s,cls:x}))},i=>{h.error("error",i),c(i??V.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),g=Pe({..._e,columns:u,data:o,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),l!==""?e.jsx(p.Suspense,{children:e.jsx(No,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table has no columns"}):(h.debug(o),e.jsx(Ae,{table:g})):e.jsx(de,{})},Bo=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),Ko=({dbs:t,tbl:s})=>{h.debug(t,s);const r=U(),n=A(i=>nn(i,t,s));h.debug(n);const o=A(i=>rn(i,t,s));h.debug(o);const[l,c]=p.useState("");p.useEffect(()=>{n||a()},[n]);const a=()=>{qn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(on({dbs:t,tbl:s,idx:x}))},i=>{h.error("error",i),c(i??V.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),g=Pe({..._e,columns:u,data:o,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),l!==""?e.jsx(p.Suspense,{children:e.jsx(Bo,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table has no indexes"}):e.jsx(Ae,{table:g}):e.jsx(de,{})},Wo=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),$o=({dbs:t,tbl:s})=>{h.debug(t,s);const r=U(),n=A(i=>an(i,t,s));h.debug(n);const o=A(i=>ln(i,t,s));h.debug(o);const[l,c]=p.useState("");p.useEffect(()=>{n||a()},[n]);const a=()=>{Xn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(cn({dbs:t,tbl:s,trg:x}))},i=>{h.error("error",i),c(i??V.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:i})=>e.jsx("pre",{style:{padding:0,margin:0},children:i.getValue()})}],[]),g=Pe({..._e,columns:u,data:o,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),l!==""?e.jsx(p.Suspense,{children:e.jsx(Wo,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table has no triggers"}):e.jsx(Ae,{table:g}):e.jsx(de,{})},Go=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),Uo=({dbs:t,tbl:s})=>{h.debug(t,s);const r=U(),n=A(i=>dn(i,t,s));h.debug(n);const o=A(i=>un(i,t,s));h.debug(o);const[l,c]=p.useState("");p.useEffect(()=>{n||a()},[n]);const a=()=>{Jn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(pn({dbs:t,tbl:s,frk:x}))},i=>{h.error("error",i),c(i)})},u=p.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),g=Pe({..._e,columns:u,data:o,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),l!==""?e.jsx(p.Suspense,{children:e.jsx(Go,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table contains no foreign keys"}):e.jsx(Ae,{table:g}):e.jsx(de,{})};var W=(t=>(t[t.TABLE=0]="TABLE",t[t.VIEW=1]="VIEW",t))(W||{});const Os=p.memo(({dbs:t,tbl:s,typ:r})=>(h.debug(t,s,r),e.jsxs(Ze,{"aria-label":"Columns and indexes",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0"},children:[e.jsx(Z,{itemId:"columns",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ar,{}),e.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:e.jsx(zo,{dbs:t,tbl:s})}),r===W.TABLE&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{itemId:"indexes",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(lr,{}),e.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ko,{dbs:t,tbl:s})}),e.jsx(Z,{itemId:"foreignkeys",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(vr,{}),e.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Uo,{dbs:t,tbl:s})}),e.jsx(Z,{itemId:"triggers",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ds,{}),e.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:e.jsx($o,{dbs:t,tbl:s})})]})]})));var me=(t=>(t[t.MANAGE=0]="MANAGE",t[t.EXPLORE=1]="EXPLORE",t))(me||{});const Ho=t=>{const s=A(r=>mn(r,t));return h.debug("tablesSelected",s),s},qo=t=>{const s=A(r=>xn(r,t));return h.debug("viewsSelected",s),s},Ds=p.memo(({dbs:t,tbl:s,typ:r})=>{var a,u;h.debug(t,s,r);const n=U(),o=Ho(t),l=qo(t),c=cr("(max-width:900px)");return e.jsxs(I,{color:"primary",sx:{display:"grid",gridTemplateColumns:"calc(100% - 110px) auto",justifyContent:"space-between",alignItems:"center",gridGap:"20px","&:hover":{".pp-row-actions":{visibility:c?"hidden":"visible"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"0",overflow:"hidden"},children:[e.jsx(I,{sx:{display:"grid",alignItems:"center"},children:e.jsx(ae,{checked:l.includes(s)||o.includes(s),onClick:g=>{r===W.VIEW?n(gn({dbs:t,vws:s,isSelected:!l.includes(s)})):n(hn({dbs:t,tbl:s,isSelected:!o.includes(s)})),g.stopPropagation()}})}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[e.jsx(I,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:s}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center",visibility:"hidden"},className:"pp-row-actions",children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Manage table `"+s+"`",placement:"bottom",children:e.jsx(ye,{underline:"none",onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:me.MANAGE})),g.preventDefault(),g.stopPropagation()},children:"Manage"})}),e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Explore table `"+s+"`",placement:"bottom",children:e.jsx(ye,{underline:"none",onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:me.EXPLORE})),g.preventDefault(),g.stopPropagation()},children:"Explore"})})]})]})]}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-evenly",alignItems:"center",paddingRight:"16px"},children:[e.jsx(je,{title:"Manage table `"+s+"`",placement:"bottom",children:e.jsx(ce,{sx:{color:(a=ne)==null?void 0:a.palette.primary.main},onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:me.MANAGE})),g.preventDefault(),g.stopPropagation()},children:e.jsx(dr,{})})}),e.jsx(je,{title:"Explore table `"+s+"`",placement:"bottom",children:e.jsx(ce,{sx:{color:(u=ne)==null?void 0:u.palette.primary.main},onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:me.EXPLORE})),g.preventDefault(),g.stopPropagation()},children:e.jsx(ur,{})})})]})]})}),Xo=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),Jo=p.memo(({dbs:t,search:s})=>{const r=U();h.debug(t,s);const n=A(a=>fn(a,t));h.debug(n);const o=A(a=>bn(a,t));h.debug(o);const[l,c]=p.useState("");return p.useEffect(()=>{n||Qn(t,function(a){const u=a==null?void 0:a.data;h.debug("response data",u),r(jn({dbs:t,tbl:u}))},a=>{h.error("error",a),c(a??V.contactSupport)})},[n]),l!==""?e.jsx(p.Suspense,{children:e.jsx(Xo,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(I,{sx:{padding:"1rem"},children:e.jsx(ve,{children:"Database contains no tables"})}):e.jsxs(Ze,{"aria-label":"Tables",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0",overflow:"hidden"},children:[...o.map(a=>{const u=!He(a,s);return e.jsx(Z,{itemId:a,label:e.jsx(Ds,{dbs:t,tbl:a,typ:W.TABLE}),sx:{visibility:u?"hidden":"inherit",position:u?"fixed !important":"inherit"},children:e.jsx(Os,{dbs:t,tbl:a,typ:W.TABLE})})})]}):e.jsx(de,{})}),Qo=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),Yo=({dbs:t,search:s})=>{const r=U();h.debug(t,s);const n=A(u=>In(u,t));h.debug(n);const[o,l]=p.useState("");p.useEffect(()=>{n||a()},[n]);const c=A(u=>yn(u,t));h.debug(c);const a=()=>{Yn(t,u=>{const g=u==null?void 0:u.data;h.debug("response data",g),r(Tn({dbs:t,vws:g}))},u=>{h.error("error",u),l(u??V.contactSupport)})};return o!==""?e.jsx(p.Suspense,{children:e.jsx(Qo,{severity:"error",message:o,close:!1})}):n?n&&c.length===0?e.jsx(I,{sx:{padding:"1rem"},children:e.jsx(ve,{children:"Database contains no views"})}):e.jsxs(Ze,{"aria-label":"Views",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0",overflow:"hidden"},children:[...c.map(u=>{const g=!He(u,s);return e.jsx(Z,{itemId:u,label:e.jsx(Ds,{dbs:t,tbl:u,typ:W.VIEW}),sx:{visibility:g?"hidden":"unset",position:g?"fixed !important":"inherit"},children:e.jsx(Os,{dbs:t,tbl:u,typ:W.TABLE})})})]}):e.jsx(de,{})},Zo=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),ei=({dbs:t,search:s})=>{h.debug(t,s);const r=U(),n=A(i=>Cn(i,t));h.debug(n);const o=A(i=>Sn(i,t));h.debug(o);const[l,c]=p.useState("");p.useEffect(()=>{n||a()},[n]);const a=()=>{Zn(t,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(vn({dbs:t,prc:x}))},i=>{h.error("error",i),c(i??V.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:i})=>e.jsx("pre",{style:{padding:0,margin:0},children:i.getValue()})}],[]),g=Pe({..._e,columns:u,data:o.filter(i=>He(i.routine_name,s)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),l!==""?e.jsx(p.Suspense,{children:e.jsx(Zo,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Database contains no stored procedures"}):e.jsx(Ae,{table:g}):e.jsx(de,{})},ti=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),si=({dbs:t,search:s})=>{h.debug(t,s);const r=U(),n=A(i=>wn(i,t));h.debug(n);const o=A(i=>En(i,t));h.debug(o);const[l,c]=p.useState("");p.useEffect(()=>{n||a()},[n]);const a=()=>{er(t,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(kn({dbs:t,fnc:x}))},i=>{h.error("error",i),c(i??V.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:i})=>e.jsx("pre",{style:{padding:0,margin:0},children:i.getValue()})}],[]),g=Pe({..._e,columns:u,data:o.filter(i=>He(i.routine_name,s)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),l!==""?e.jsx(p.Suspense,{children:e.jsx(ti,{severity:"error",message:l,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Database contains no functions"}):e.jsx(Ae,{table:g}):e.jsx(de,{})};var G=(t=>(t.WP="wp",t.LOCAL="local",t.REMOTE="remote",t.SYSTEM="system",t))(G||{});const ni=({setShowFilter:t})=>{const s=U(),r=A(o=>Ht(o));h.debug(r);const n=A(o=>_t(o));return h.debug(n),p.useEffect(()=>{localStorage.setItem("ppExplorerSearchDbsTypes",JSON.stringify(r))},[r]),e.jsxs(Mt,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[e.jsx(Br,{title:"Database filter",sx:{textAlign:"center"}}),e.jsx(Pt,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:e.jsxs(I,{sx:{display:"inline-grid",textAlign:"left","& label":{display:"flex",alignItems:"center"}},children:[e.jsx(q,{children:e.jsxs(Y,{children:[e.jsx(ae,{checked:r.includes(G.WP),onChange:(o,l)=>{s(l?tt({dbsType:G.WP}):st({dbsType:G.WP}))}}),"WordPress database"]})}),e.jsx(q,{children:e.jsxs(Y,{children:[e.jsx(ae,{checked:r.includes(G.LOCAL),onChange:(o,l)=>{s(l?tt({dbsType:G.LOCAL}):st({dbsType:G.LOCAL}))}}),"Local databases"]})}),e.jsx(q,{children:e.jsxs(Y,{children:[e.jsx(ae,{checked:r.includes(G.REMOTE),onChange:(o,l)=>{s(l?tt({dbsType:G.REMOTE}):st({dbsType:G.REMOTE}))}}),"Remote databases"]})}),e.jsx(q,{children:e.jsxs(Y,{children:[e.jsx(ae,{checked:r.includes(G.SYSTEM),onChange:(o,l)=>{s(l?tt({dbsType:G.SYSTEM}):st({dbsType:G.SYSTEM}))}}),"System databases"]})})]})}),e.jsxs(Wr,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(I,{}),e.jsx($,{variant:"contained",onClick:()=>t(!1),children:"OK"})]})]})},Ne=({search:t,setSearch:s,addFilter:r})=>{h.debug(t,r);const[n,o]=p.useState(!1);return e.jsxs(I,{sx:{position:"relative",marginRight:r?0:"20px"},children:[e.jsx(re,{value:t,type:"search",onChange:l=>{s(l.target.value)},onClick:l=>{l.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(Wt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(pr,{})}),endAdornment:e.jsx(e.Fragment,{children:r&&e.jsx(Wt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(ce,{onClick:()=>{o(!n)},children:e.jsx(mr,{})})})})}}),n&&e.jsx(ni,{setShowFilter:o})]})},ri=(t,s)=>{const r=A(n=>Mn(n,t,s));return h.debug("allTablesSelected",r),r},oi=(t,s)=>{const r=A(n=>Pn(n,t,s));return h.debug("allViewsSelected",r),r},ze=t=>{const[s,r]=p.useState(localStorage.getItem(t)??""),n=o=>{r(o),localStorage.setItem(t,o)};return h.debug(s),{search:s,setSearch:n}},ii=p.memo(({dbs:t})=>{h.debug(t);const s=U(),[r,n]=p.useState(!1),{search:o,setSearch:l}=ze(`ppExplorerSearchTables-${t}`);h.debug(r,o);const[c,a]=p.useState(!1),{search:u,setSearch:g}=ze(`ppExplorerSearchViews-${t}`);h.debug(c,u);const[i,x]=p.useState(!1),{search:b,setSearch:f}=ze(`ppExplorerSearchProcedures-${t}`);h.debug(i,b);const[j,m]=p.useState(!1),{search:d,setSearch:T}=ze(`ppExplorerSearchFunctions-${t}`);h.debug(j,d);const w=ri(t,o),k=oi(t,u),[_,N]=p.useState("");return h.debug(_),e.jsxs(Ze,{className:"pp-data-exporer-table-tree","aria-label":"Databases",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0"},children:[e.jsx(Z,{itemId:"tables",className:"pp-data-exporer-table-tree-item "+_,onClickCapture:M=>{var z,F;!(M.target instanceof HTMLInputElement)&&!(M.target instanceof HTMLAnchorElement)&&!((z=M.target.closest("span"))!=null&&z.classList.contains("pp-select-all-tables"))&&((F=M.target.closest("li"))!=null&&F.classList.contains("pp-data-exporer-table-tree-item"))&&(N(_===""?"hide-details":""),r?M.stopPropagation():(n(!0),N("")))},sx:{padding:0,minWidth:0,"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[r&&_===""?e.jsx(ae,{className:"pp-select-all-tables",checked:w,onClick:M=>{s(qt({dbs:t,isSelected:!w,search:o})),M.stopPropagation()},sx:{marginLeft:"-13px"}}):e.jsx(us,{}),"Tables"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(Ke({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:r&&_===""&&e.jsx(Ne,{search:o,setSearch:l})})]}),children:e.jsx(Jo,{dbs:t,search:o})}),e.jsx(Z,{itemId:"view",onClick:()=>{a(!c)},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[c?e.jsx(ae,{checked:k,onClick:M=>{s(Xt({dbs:t,isSelected:!k,search:u})),M.stopPropagation()},sx:{marginLeft:"-13px"}}):e.jsx(ps,{}),"Views"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(dt({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:c&&e.jsx(Ne,{search:u,setSearch:g})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Yo,{dbs:t,search:u})}),e.jsx(Z,{itemId:"procedures",onClick:()=>{x(!i)},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ds,{}),"Stored Procedures"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(An({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:i&&e.jsx(Ne,{search:b,setSearch:f})})]}),sx:{padding:0,minWidth:0},children:e.jsx(ei,{dbs:t,search:b})}),e.jsx(Z,{itemId:"functions",onClick:()=>{m(!j)},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(wr,{}),"Functions"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(_n({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:j&&e.jsx(Ne,{search:d,setSearch:T})})]}),sx:{padding:0,minWidth:0},children:e.jsx(si,{dbs:t,search:d})})]})}),ai=()=>{const t=A(s=>Rn(s));return h.debug("countSelectedTables",t),t},li=()=>{const t=A(s=>Ln(s));return h.debug("hasBulkActions",t),t},ci=()=>{const t=A(s=>On(s));return h.debug("countSelectedViews",t),t};function di(t){return e.jsx(Pr,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:e.jsx(kt,{...t})})}const At=t=>{const{title:s,message:r,open:n,setOpen:o,onConfirm:l}=t;return e.jsxs(Fr,{open:n,onClose:()=>o(!1),PaperComponent:di,"aria-labelledby":"confirm-dialog",children:[e.jsx(kr,{style:{marginTop:"10px",cursor:"move"},id:"draggable-dialog-title",children:s}),e.jsx(Vr,{children:e.jsx(Mr,{component:"div",children:r})}),e.jsx(Nr,{sx:{marginRight:"15px",marginBottom:"15px"},children:e.jsx($,{variant:"contained",onClick:()=>{o(!1),l!==void 0&&l()},children:"OK"})})]})},Fs=()=>{const t=A(s=>Dn(s));return h.debug("context",t),t},ui=(t,s,r,n,o,l=!1)=>{h.debug(t,s,r),Xe(Me.appUrlActionRename,{dbs:t,from_tbl:s,to_tbl:r},n,o,l)},pi=(t,s,r,n,o,l,c,a=!1)=>{h.debug(t,s,r,n,o),Xe(Me.appUrlActionCopy,{from_dbs:t,to_dbs:s,from_tbl:r,to_tbl:n,copy_data:o},l,c,a)},Vs=(t,s,r,n,o=!1)=>{h.debug(t,s),Xe(Me.appUrlActionTruncate,{dbs:t,tbl:s},r,n,o)},Ns=(t,s,r,n,o,l=!1)=>{h.debug(t,s,r),Xe(Me.appUrlActionDrop,{dbs:t,tbl:s,typ:r},n,o,l)},mi=(t,s,r,n,o=!1)=>{h.debug(t);const l=new FormData;l.append("dbs",t),Object.keys(s).map(c=>{l.append("file"+c,s[c])}),Xe(Me.appUrlActionImport,l,r,n,o)},Fe={export:"Export table(s)",truncate:"Truncate table(s)",drop:"Drop table(s)/view(s)"},xi=()=>{const t=U(),s=li(),r=ai(),n=ci(),o=Fs(),[l,c]=p.useState({}),[a,u]=p.useState("*"),[g,i]=p.useState(null),[x,b]=p.useState(!1),[f,j]=p.useState(!1),[m,d]=p.useState(!1);p.useEffect(()=>{r===0&&(a==="export"||a==="truncate")&&u("*")},[r]);const T={vertical:"top",horizontal:"right"},w=()=>{const v=Jt(Et.getState()),S={};return v==null?{}:(Object.keys(v).map(C=>{v[C].tablesSelected.map(E=>{S[C]===void 0&&(S[C]={}),S[C][E]={status:null,typ:W.TABLE}}),a==="drop"&&v[C].viewsSelected.map(E=>{S[C]===void 0&&(S[C]={}),S[C][E]={status:null,typ:W.VIEW}})}),S)},k=(v,S,C)=>{const E={...l};S==="*"?Object.keys(E[v]).map(L=>E[v][L].status=C):E[v][S].status=C,c(E)},_=()=>{Object.keys(l).length>0&&Object.keys(l).map(v=>{window.document.getElementById(`pp-export-tables-${v}`).submit(),k(v,"*",!0)})},N=()=>{Object.keys(l).length>0&&Object.keys(l).map(v=>{Object.keys(l[v]).map(S=>{Vs(v,S,C=>{h.debug(C),(C==null?void 0:C.code)==="ok"&&(C==null?void 0:C.message)!==void 0?k(v,S,!0):k(v,S,!1)},C=>{h.error("error",v,S,C),k(v,S,!1)})})})},M=()=>{Object.keys(l).length>0&&Object.keys(l).map(v=>{Object.keys(l[v]).map(S=>{Ns(v,S,l[v][S].typ,C=>{h.debug(C),(C==null?void 0:C.code)==="ok"&&(C==null?void 0:C.message)!==void 0?k(v,S,!0):k(v,S,!1)},C=>{h.error("error",C),k(v,S,!1)})})})},z=v=>e.jsxs(as,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(ls,{children:e.jsxs(mt,{children:[e.jsx(Q,{children:"Database"}),e.jsx(Q,{children:"Table | View"}),e.jsx(Q,{children:"Status"})]})}),e.jsx(cs,{children:Object.keys(v).map(S=>Object.keys(v[S]).map((C,E)=>{var L,R;return e.jsxs(mt,{children:[e.jsx(Q,{children:E===0?S:null}),e.jsx(Q,{children:C}),e.jsxs(Q,{children:[v[S][C]===null&&e.jsx(gr,{style:{display:"block",margin:"0 auto"}}),v[S][C].status===!0&&e.jsx(Yt,{color:(L=ne)==null?void 0:L.palette.success.main,style:{display:"block",margin:"0 auto"}}),v[S][C].status===!1&&e.jsx(Zt,{color:(R=ne)==null?void 0:R.palette.error.main,style:{display:"block",margin:"0 auto"}})]})]},E)}))})]}),F=()=>e.jsx(I,{children:z(l)}),P=()=>{const v=w();return c(v),e.jsxs(I,{children:[z(v),(a==="truncate"||a==="drop")&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{style:{marginTop:"20px"}}),e.jsx(I,{sx:{marginTop:"20px",marginBottom:"20px"},children:a==="drop"?e.jsx("span",{children:"Deletes views and tables with all data permanently."}):e.jsx("span",{children:"Deletes all data permanently."})}),e.jsx(I,{children:e.jsx("strong",{children:"This actions cannot be undone!"})}),e.jsxs(I,{children:["'",e.jsx("strong",{children:"NO"}),"' to stop, '",e.jsx("strong",{children:"YES"}),"' to continue."]}),e.jsxs(I,{sx:{marginTop:"20px",fontSize:"80%",display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[e.jsx(xr,{}),e.jsxs("span",{children:["Does not ",a," WordPress tables"]})]})]})]})};return s?e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"pp-bulk-actions-container",color:"inherit",position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(ft,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(q,{variant:"standard",sx:{minWidth:200},children:e.jsxs(Ce,{MenuProps:{id:"pp-select-menu"},value:a,onChange:v=>{u(v.target.value)},children:[e.jsx(K,{value:"*",children:"Bulk actions"}),e.jsx(K,{value:"export",disabled:r===0,children:Fe.export}),e.jsx(K,{value:"truncate",disabled:r===0,children:Fe.truncate}),e.jsx(K,{value:"drop",children:Fe.drop})]})}),e.jsx($,{variant:"contained",onClick:()=>{a!=="*"?(i(P()),b(!0)):j(!0)},children:"Apply"})]}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsx(Nt,{badgeContent:r,color:"info",anchorOrigin:T,children:e.jsx(us,{color:"action",size:20})}),e.jsx(Nt,{badgeContent:n,color:"info",anchorOrigin:T,children:e.jsx(ps,{color:"action",size:20})})]})]})}),a==="export"&&Object.keys(l).map(v=>e.jsxs("form",{id:"pp-export-tables-"+v,action:o.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:v}),Object.keys(l[v]).map(S=>e.jsx("input",{type:"hidden",name:"table_names[]",value:S},S)),e.jsx("input",{type:"hidden",name:"_wpnonce",value:o.wp.nonce.split("-")[0]})]},"pp-export-tables-"+v)),e.jsx(At,{title:"Apply bulk action",message:"No bulk action selected",open:f,setOpen:j}),e.jsx(xe,{title:Fe[a],message:g,open:x,setOpen:b,onConfirm:()=>{switch(d(!0),a){case"export":_();break;case"truncate":N();break;case"drop":M()}}}),e.jsx(At,{title:Fe[a],message:F(),open:m,setOpen:d,onConfirm:()=>{Object.keys(l).map(v=>{t(Ke({dbs:v})),t(qt({dbs:v,isSelected:!1,search:""})),t(dt({dbs:v})),t(Xt({dbs:v,isSelected:!1,search:""}))})}})]}):null},Dt=()=>{const t=A(s=>Jt(s));return h.debug(t),t},gi=({setCanImport:t})=>{const s=Fs(),r=Dt(),n=Object.keys(r).filter(P=>r[P].dbsType===G.WP)[0],o=p.useRef(null),[l,c]=p.useState(n??""),[a,u]=p.useState(""),[g,i]=p.useState(null),x=s.wp.zip?".sql,.zip":".zip",b=s.wp.zip?"SQL and ZIP":"SQL",f=s.wp.upload,[j,m]=p.useState(!1),[d,T]=p.useState(null),[w,k]=p.useState(!1),[_,N]=p.useState(""),[M,z]=p.useState(null),F=P=>e.jsx(e.Fragment,{children:e.jsxs(as,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(ls,{children:e.jsxs(mt,{children:[e.jsx(Q,{children:"Import file"}),e.jsx(Q,{children:"Message"}),e.jsx(Q,{children:"Status"})]})}),e.jsx(cs,{children:P.map(v=>Object.keys(v).map(S=>{var C,E;return e.jsxs(mt,{children:[e.jsx(Q,{sx:{verticalAlign:"text-top"},children:S}),e.jsxs(Q,{sx:{verticalAlign:"text-top"},children:[v[S].msg,v[S].errors.map(L=>{var R;return e.jsx("ul",{children:e.jsx("li",{style:{color:(R=ne)==null?void 0:R.palette.error.main},children:L})})})]}),e.jsx(Q,{sx:{verticalAlign:"text-top"},children:v[S].status==="error"?e.jsx(Zt,{color:(C=ne)==null?void 0:C.palette.error.main,style:{display:"block",margin:"0 auto"}}):e.jsx(Yt,{color:(E=ne)==null?void 0:E.palette.success.main,style:{display:"block",margin:"0 auto"}})})]},S)}))})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(I,{className:"pp-import-container",sx:{position:"relative","& > .tooltip":{position:"absolute",top:"10px",right:"10px",zIndex:999}},children:[e.jsx(at,{title:"Close",position:"bottom",children:e.jsx(ce,{onClick:()=>{o.current&&(o.current.value=""),u(""),t(!1)},size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(es,{})})}),e.jsx(ht,{className:"pp-import-container",color:"inherit",position:"relative",elevation:4,sx:{display:"grid",alignItems:"center",margin:"0 0 5px 0"},children:e.jsxs(ft,{sx:{display:"grid",gap:"10px",alignItems:"center",height:"max-content",paddingTop:"50px",paddingBottom:"30px"},children:[e.jsx(e.Fragment,{children:e.jsxs(I,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"start",alignItems:"center",gap:"15px"},children:[e.jsx(I,{children:e.jsxs(q,{sx:{minWidth:"300px"},children:[e.jsx(xt,{variant:"outlined",children:"Select destination database"}),e.jsx(Ce,{MenuProps:{id:"pp-select-menu"},label:"Select destination database",value:l,onChange:P=>{c(P.target.value)},children:Object.keys(r).map(P=>{const v=r[P].dbsType===G.WP?P+" (WordPress database)":P;return e.jsx(K,{value:P,children:v},P)})})]})}),e.jsx(I,{children:e.jsx("form",{children:e.jsxs($,{component:"label",variant:"outlined",startIcon:e.jsx(hr,{}),children:["Select file(s)",e.jsx(re,{type:"file",inputProps:{accept:x,multiple:!0},onChange:P=>{const v=P.target.files;i(v);const S=Object.keys(v).map(C=>v[C].name).toString();u(S)},InputProps:{inputRef:o},sx:{display:"none"}})]})})}),a!==""&&e.jsx(e.Fragment,{children:e.jsx(I,{children:e.jsx($,{component:"label",variant:"contained",startIcon:e.jsx(fr,{}),onClick:()=>{T(e.jsxs(I,{children:[e.jsxs(I,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Selected file(s): ",e.jsx("strong",{children:a})]}),e.jsxs(I,{children:["Selected database: ",e.jsx("strong",{children:l})]}),e.jsxs(I,{sx:{marginTop:"20px",fontSize:"80%"},children:[e.jsx("strong",{children:"NOTE"}),"  You can work on other tasks while your import is performed in the background."]})]})),m(!0)},children:"Import file(s)"})})})]})}),a!==""&&e.jsxs(I,{sx:{marginTop:"20px",marginBottom:"10px",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",fontWeight:"bold"},children:["Selected file(s): ",a]}),e.jsxs("fieldset",{className:"pp-fieldset",style:{marginTop:"5px",padding:"10px 30px",minWidth:0},children:[e.jsx("legend",{children:"IMPORTANT"}),e.jsxs("ul",{style:{paddingLeft:"15px"},children:[e.jsx("li",{children:"Supports multiple file uploads simultaneously."}),e.jsxs("li",{children:["Server supports ",b," file types."]}),e.jsxs("li",{children:["Maximum supported file size on this server is ",f,"."]}),e.jsx("li",{children:"Add a ; and a new line character at the end of every SQL statement."})]})]})]})})]}),e.jsx(xe,{title:"Import selected file(s)?",message:d,open:j,setOpen:m,onConfirm:()=>{mi(l,g,P=>{var v;if(P!=null&&P.message&&((v=P==null?void 0:P.context)!=null&&v.imported)&&Array.isArray(P.context.imported)){const S=P.context.imported;k(!0),N(P.message),z(F(S))}else O(V.contactSupport,{variant:"error"})},P=>{h.error("error",P),O(V.contactSupport,{variant:"error"})})}}),e.jsx(At,{title:_,message:M,open:w,setOpen:k,onConfirm:()=>{u(""),t(!1)}})]})};const Ut=p.lazy(()=>oe(()=>import("./Alert-1.0.7-7efc1ac6.js"),["./Alert-1.0.7-7efc1ac6.js","./main-1.0.7.js","./index.esm-1.0.7-8ea9dc9a.js","./iconBase-1.0.7-dd244ceb.js","./AlertTitle-1.0.7-a2e806c7.js","./Close-1.0.7-d2499b42.js","./useSlot-1.0.7-9849c4eb.js"],import.meta.url)),hi=()=>{var m;const t=U(),{search:s,setSearch:r}=ze("ppExplorerSearch"),n=Dt(),o=A(d=>Fn(d));h.debug(o);const l=A(d=>Rt(d));h.debug(l);const c=A(d=>Ht(d));h.debug(c);const[a,u]=p.useState("");p.useEffect(()=>{window.ppActionEnableImport=(d=!0)=>{f(d)},g()},[]);const g=()=>{let d=[];const T=localStorage.getItem("ppExplorerSearchDbsTypes");T!=null&&T!==""?d=JSON.parse(T):d=[G.WP,G.LOCAL,G.REMOTE],tr(w=>{const k=w==null?void 0:w.data;h.debug("response data",k);const _=[],N={};k.map(F=>{_.push({dbs:F.dbs,dbsType:F.dbs_type,pdsDbs:F.pds}),N[F.dbs]=!1}),x(N),_.sort((F,P)=>F.dbs.toLocaleLowerCase()>P.dbs.toLocaleLowerCase()?1:P.dbs.toLocaleLowerCase()>F.dbs.toLocaleLowerCase()?-1:0),h.debug(_),t(Vn({dbs:_,dbsTypes:d}));const M={};k.map(F=>{M[F.dbs]=F.dbs_type}),t(Nn({dbs:M}));const z=w.context;h.debug("context",z),t(zn({context:z}))},w=>{h.error("error",w),u(w??V.contactSupport)})},[i,x]=p.useState({}),[b,f]=p.useState(!1),j=()=>e.jsx(je,{title:"Import data or execute scripts",children:e.jsx(ce,{sx:{color:"inherit"},onClick:()=>{f(!b)},children:e.jsx(br,{})})});return a!==""?e.jsx(p.Suspense,{children:e.jsx(Ut,{severity:"error",message:a,close:!1})}):e.jsxs(I,{className:"pp-sub-container-explorer",sx:{width:"100%"},children:[e.jsx(ht,{className:"pp-explorer-header",elevation:4,position:"relative",sx:{margin:"0 0 5px 0"},children:e.jsxs(ft,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"12px !important"},children:[((m=Me.appOrig)==null?void 0:m.appTarget)==="backend"?e.jsx(I,{sx:{textAlign:"right"},children:"Search & Filter"}):e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"10px"},children:[e.jsx(I,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Data Explorer"}),e.jsx(I,{children:j()})]}),e.jsx(I,{children:e.jsx(Ne,{search:s,setSearch:r,addFilter:!0})})]})}),e.jsx(xi,{}),b&&e.jsx(gi,{setCanImport:f}),n==null?e.jsx(I,{sx:{padding:"30px"},children:e.jsx(Lt,{title:"Loading..."})}):e.jsxs(e.Fragment,{children:[o!==""&&e.jsx(kt,{sx:{marginBottom:"5px"},elevation:4,children:e.jsx(p.Suspense,{children:e.jsx(Ut,{severity:"error",message:o,close:!0,setClose:()=>{t(Qt({error:""}))}})})}),e.jsx(kt,{className:"pp-data-exporer",elevation:4,children:e.jsx(Ze,{className:"pp-data-exporer-database-tree","aria-label":"Data Explorer",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gridGap:"0",borderBottom:"1px solid rgba(0, 0, 0, 0.34)",borderRadius:"4px","& li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& li.MuiTreeItem-root:first-of-type li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:0,borderTopRightRadius:0}},children:Object.keys(n).map(d=>{if(c.includes(l[d])===!1||s!==""&&!He(d,s))return null;const T=l[d].toLocaleLowerCase()==="wp"?d+" (WordPress database)":d;return e.jsx(Z,{itemId:d,className:"pp-data-exporer-database-tree-item hide-details",onClickCapture:w=>{var k,_,N,M;if((k=w.target.closest("li"))!=null&&k.classList.contains("pp-data-exporer-database-tree-item"))if((_=w.target.closest("li"))!=null&&_.classList.contains("hide-details")?(N=w.target.closest("li"))==null||N.classList.remove("hide-details"):(M=w.target.closest("li"))==null||M.classList.add("hide-details"),i[d])w.stopPropagation();else{const z=i;z[d]=!0,x(z)}},sx:{padding:"0","&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[e.jsx(Sr,{}),T]}),children:e.jsx(ii,{dbs:d})},d)})})})]})]})},fi=()=>{const t=A(s=>_t(s));return h.debug(t),e.jsx(e.Fragment,{children:t!==void 0&&t.action===me.EXPLORE&&e.jsx($r,{appId:jr(),dbs:t.dbs,tbl:t.tbl,exploring:!0})})},bi=({dbs:t,tbl:s})=>{h.debug(t,s);const[r,n]=p.useState(!1),[o,l]=p.useState(void 0),c=()=>{switch(o){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(we,{disableGutters:!0,children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"Reset"}),e.jsx(ke,{children:e.jsxs(q,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx($,{variant:"contained",color:"primary",onClick:()=>{l(vt.TABLE),n(!0)},children:"Reset Table Builder"}),e.jsx($,{variant:"contained",color:"primary",onClick:()=>{l(vt.FORM),n(!0)},children:"Reset Form Builder"}),e.jsx($,{variant:"contained",color:"primary",onClick:()=>{l(vt.THEME),n(!0)},children:"Reset Theme"}),e.jsxs(ge,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(ts,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(xe,{title:c(),message:"Are you sure? This action cannot be undone!",open:r,setOpen:n,onConfirm:()=>{o!==void 0&&Ar(Gr.GLOBAL,o,t,s,null,null,a=>{if(a!=null&&a.code&&(a==null?void 0:a.message)!==void 0)switch(a.code){case"ok":O(a.message,{variant:"success"});break;case"info":O(a.message,{variant:"info"});break;default:O(a.message??V.contactSupport,{variant:"error"})}else h.error(a),O(V.contactSupport,{variant:"error"})},a=>{h.error("error",a),O(a??V.contactSupport,{variant:"error"})})}})]})},ji=({dbs:t,tbl:s,setIsUpdated:r})=>{h.debug(t,s);const n=U(),o=A(c=>Te(c));h.debug(o);const l=c=>{const a={...o,table_settings:{...o.table_settings,hyperlink_definition:c}};n(it({settings:a})),r(!0)};return e.jsxs(we,{disableGutters:!0,children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"Table Settings"}),e.jsx(ke,{children:e.jsxs(q,{children:[e.jsx(Y,{children:"Process hyperlink columns as"}),e.jsxs(xs,{sx:{marginTop:"10px",marginBottom:"10px"},children:[e.jsxs(Y,{className:"align-label-radio",children:[e.jsx(gt,{checked:o.table_settings.hyperlink_definition==="json",onChange:c=>{l("json"),c.stopPropagation()}}),"Preformatted JSON"]}),e.jsxs(Y,{children:[e.jsx(gt,{checked:o.table_settings.hyperlink_definition==="text",onChange:c=>{l("text"),c.stopPropagation()}}),"Plain text"]})]}),e.jsx(ge,{children:"Preformatted JSON supports individual label and target settings. Plain text converts column content to a hyperlink link."})]})})]})},Ii=({dbs:t,tbl:s,setIsUpdated:r})=>{var x;h.debug(t,s);const n=U(),o=A(b=>Bn(b));h.debug(o);const l=A(b=>Te(b));h.debug(l);const[c,a]=p.useState(""),u=(b,f)=>{const j={...l,list_labels:{...l.list_labels,[b]:f}};n(it({settings:j})),r(!0)},g=(b,f)=>{const j={...l,form_labels:{...l.form_labels,[b]:f}};n(it({settings:j})),r(!0)},i=(b,f)=>{const j={...l,column_media:{...l.column_media,[b]:f}};n(it({settings:j})),r(!0)};return e.jsxs(we,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"Column Settings"}),e.jsx(ke,{children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(I,{sx:{display:"grid",gridGap:"10px",marginBottom:"20px"},children:e.jsxs(I,{children:[...(x=o==null?void 0:o.columns)==null?void 0:x.map((b,f)=>{const j=b.column_name;return e.jsxs(we,{expanded:c===j,onChange:()=>{a(c===j?"":j)},sx:{"&.MuiPaper-root.MuiPaper-elevation.Mui-expanded":{margin:0}},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:b.column_name}),e.jsxs(ke,{sx:{display:"grid",gridGap:"10px"},children:[e.jsx(re,{label:"Table label",value:l.list_labels[j],variant:"outlined",onChange:m=>{u(j,m.target.value)}}),e.jsx(re,{label:"Form label",value:l.form_labels[j],variant:"outlined",onChange:m=>{g(j,m.target.value)}}),e.jsxs(q,{children:[e.jsx(xt,{id:"media_type_label"+f,variant:"outlined",children:"Media type"}),e.jsxs(Ce,{MenuProps:{id:"pp-select-menu"},labelId:"media_type_label"+f,id:"media_type"+f,label:"Media type",value:l.column_media[j]??"",variant:"outlined",onChange:m=>{i(j,m.target.value),m.stopPropagation()},children:[e.jsx(K,{value:"",children:" "},""),e.jsx(K,{value:"Attachment",children:"Attachment"},"Attachment"),e.jsx(K,{value:"Audio",children:"Audio"},"Audio"),e.jsx(K,{value:"Hyperlink",children:"Hyperlink"},"Hyperlink"),e.jsx(K,{value:"Image",children:"Image"},"Image"),e.jsx(K,{value:"ImageURL",children:"ImageURL"},"ImageURL"),e.jsx(K,{value:"Video",children:"Video"},"Video")]})]})]})]})})]})}),e.jsx(ge,{children:"Default column labels and column media types"})]})})]})};var J=(t=>(t.SELECT="select",t.INSERT="insert",t.UPDATE="update",t.DELETE="delete",t))(J||{}),Be=(t=>(t.GET="GET",t.POST="POST",t))(Be||{});const ot=({restApi:t,action:s,roles:r,users:n,setRestApi:o,expanded:l,setExpanded:c})=>{h.debug(t,s,r,n,l);const a=(f,j)=>{const m=Ur(t);if(j)m.methods.push(f);else{const d=m.methods.indexOf(f);d>-1&&m.methods.splice(d,1)}h.debug(f,j,m),o(m)},u=f=>{h.debug(f),o({...t,authorization:f})},g=f=>{h.debug(f),o({...t,authorized_roles:f.map(j=>j.key)})},i=f=>{h.debug(f),o({...t,authorized_users:f.map(j=>j.key)})},x=p.useMemo(()=>r.filter(f=>t.authorized_roles.includes(f.key)),[t.authorized_roles,r]),b=p.useMemo(()=>n.filter(f=>t.authorized_users.includes(f.key)),[t.authorized_users,n]);return e.jsxs(we,{disableGutters:!0,expanded:l===s.toString(),onChange:()=>{l===s.toString()?c(""):c(s)},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),sx:{textTransform:"capitalize"},children:s}),e.jsx(ke,{children:e.jsxs(I,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(Y,{children:"Supported HTTP methods"}),e.jsxs(I,{children:[e.jsx($e,{control:e.jsx(We,{checked:t.methods.includes(Be.GET),onChange:(f,j)=>{a(Be.GET,j),f.stopPropagation()}}),label:"GET",labelPlacement:"end"}),e.jsx($e,{control:e.jsx(We,{checked:t.methods.includes(Be.POST),onChange:(f,j)=>{a(Be.POST,j),f.stopPropagation()}}),label:"POST",labelPlacement:"end"})]}),e.jsx(Y,{children:"Authorization"}),e.jsxs(q,{sx:{marginLeft:"-10px"},children:[e.jsxs(xs,{children:[e.jsxs(Y,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(gt,{checked:t.authorization===De.AUTHORIZED,onChange:f=>{u(De.AUTHORIZED),f.stopPropagation()}}),"Authorized access only"]}),e.jsxs(I,{sx:{display:"grid",gridGap:"10px",margin:"20px 10px 20px 42px"},children:[e.jsx(Kt,{multiple:!0,options:r,getOptionLabel:f=>f.value,value:x,onChange:(f,j)=>{g(j)},renderInput:f=>e.jsx(re,{...f,label:"Roles"})}),e.jsx(Kt,{multiple:!0,options:n,getOptionLabel:f=>f.value,value:b,onChange:(f,j)=>{i(j)},renderInput:f=>e.jsx(re,{...f,label:"Users"})})]}),e.jsxs(Y,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(gt,{checked:t.authorization===De.ANONYMOUS,onChange:f=>{u(De.ANONYMOUS),f.stopPropagation()}}),"Anonymous access"]})]}),t.authorization===De.ANONYMOUS&&t.methods.length>0&&e.jsxs(I,{sx:{marginTop:"10px",marginLeft:"10px"},children:[(s===J.INSERT||s===J.UPDATE||s===J.DELETE)&&e.jsx(ge,{children:"This setting allows non-authorized users to modify this table"}),s===J.SELECT&&e.jsx(ge,{children:"This setting allows non-authorized users to query this table"})]})]})]})})]})},yi=({dbs:t,tbl:s,typ:r,metaData:n,setIsUpdated:o})=>{var b,f,j,m;h.debug(t,s,r,n);const l=U(),c=A(d=>Te(d));h.debug(c);const a=A(d=>Rt(d));h.debug(a);const[u,g]=p.useState(""),i=[];if(((f=(b=n==null?void 0:n.settings)==null?void 0:b.wp)==null?void 0:f.roles)!==void 0)for(const d in n.settings.wp.roles)i.push({key:d,value:n.settings.wp.roles[d]});h.debug(i);const x=[];if(((m=(j=n==null?void 0:n.settings)==null?void 0:j.wp)==null?void 0:m.users)!==void 0)for(const d in n.settings.wp.users)x.push({key:d,value:n.settings.wp.users[d]});return h.debug(x),e.jsxs(we,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"REST API"}),e.jsx(ke,{children:e.jsxs(I,{children:[e.jsx($e,{control:e.jsx(We,{checked:c.rest_api!==null,onClick:d=>{c.rest_api!==null?l(Kn({})):l(Wn({})),o(!0),d.stopPropagation()}}),label:"Enable REST API",labelPlacement:"end"}),c.rest_api!==null&&e.jsxs(I,{sx:{marginTop:"20px"},children:[e.jsx(ot,{restApi:c.rest_api.select,action:J.SELECT,roles:i,users:x,setRestApi:d=>{const T={...c.rest_api};T[J.SELECT]=d,l(nt({rest_api:T})),o(!0)},expanded:u,setExpanded:g}),e.jsx(ot,{restApi:c.rest_api.insert,action:J.INSERT,roles:i,users:x,setRestApi:d=>{const T={...c.rest_api};T[J.INSERT]=d,l(nt({rest_api:T})),o(!0)},expanded:u,setExpanded:g}),e.jsx(ot,{restApi:c.rest_api.update,action:J.UPDATE,roles:i,users:x,setRestApi:d=>{const T={...c.rest_api};T[J.UPDATE]=d,l(nt({rest_api:T})),o(!0)},expanded:u,setExpanded:g}),e.jsx(ot,{restApi:c.rest_api.delete,action:J.DELETE,roles:i,users:x,setRestApi:d=>{const T={...c.rest_api};T[J.DELETE]=d,l(nt({rest_api:T})),o(!0)},expanded:u,setExpanded:g})]}),a[t]==="system"||a[t]==="wp"&&n.settings.wp.tables.includes(s)&&e.jsxs(ge,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",marginTop:"20px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(ts,{}),"We discourage enabling REST API services for WordPress and system tables"]})]})})]})},Ti=({dbs:t,tbl:s,typ:r,metaData:n})=>{var H,ue,ie,Le,pe,fe,X,Oe;h.debug(t,s,r,n);const o=U(),[l,c]=p.useState("sql"),[a,u]=p.useState(!0),[g,i]=p.useState(""),[x,b]=p.useState(t),[f,j]=p.useState(""),[m,d]=p.useState(!0),[T,w]=p.useState(!1),[k,_]=p.useState(!1),[N,M]=p.useState(!1),[z,F]=p.useState(!1),P=Dt();h.debug(P);const v=p.useMemo(()=>{const y=[];for(const te in P)y.push(te);return y},[P]);h.debug(v);const S=A(y=>Rt(y));h.debug(S);const[C,E]=p.useState(P[t].pdsDbs===!0?((ie=(ue=(H=n==null?void 0:n.settings)==null?void 0:H.wp)==null?void 0:ue.connect)==null?void 0:ie.interval)??"":""),[L,R]=p.useState(P[t].pdsDbs===!0?((fe=(pe=(Le=n==null?void 0:n.settings)==null?void 0:Le.wp)==null?void 0:pe.connect)==null?void 0:fe.unit)??"":""),he=y=>{Ir.post(n.settings.wp.homea+"?action=wpda_pds_update_interval",y,{headers:{"Content-Type":"multipart/form-data"}}).then(te=>{h.error(y,te)}).catch(te=>{h.error("error",te)})};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{sx:{margin:0,padding:0,"& .pp-action":{display:"grid",gridTemplateColumns:"150px 1fr",alignItems:"center",margin:0,padding:"30px",borderBottom:"1px solid #ddd"},"& .pp-action button":{width:"120px"}},children:[r===W.TABLE&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsxs("form",{action:n.settings.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:t}),e.jsx("input",{type:"hidden",name:"table_names",value:s}),e.jsx("input",{type:"hidden",name:"format_type",value:l}),e.jsx("input",{type:"hidden",name:"include_table_settings",value:l==="sql"&&a?"on":"off"}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.aonce.split("-")[0]}),e.jsx($,{variant:"contained",type:"submit",children:"Export"})]})}),e.jsxs(I,{sx:{display:"grid"},children:[e.jsxs(q,{children:[e.jsx(xt,{variant:"outlined",children:"Export to"}),e.jsxs(Ce,{MenuProps:{id:"pp-select-menu"},label:"Export to",value:l,onChange:y=>{c(y.target.value)},children:[e.jsx(K,{value:"sql",children:"SQL"},"sql"),e.jsx(K,{value:"csv",children:"CSV"},"csv"),e.jsx(K,{value:"json",children:"JSON"},"json"),e.jsx(K,{value:"excel",children:"Excel"},"excel"),e.jsx(K,{value:"xml",children:"XML"},"xml")]})]}),e.jsx($e,{sx:{visibility:l==="sql"?"visible":"hidden",height:l==="sql"?"auto":0,marginTop:l==="sql"?"10px":0,marginLeft:0},control:e.jsx(We,{checked:a,onClick:y=>{u(!a),y.stopPropagation()}}),label:"With table settings",labelPlacement:"end"})]})]}),S[t]!=="system"&&(S[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx($,{variant:"contained",onClick:()=>{s!==g&&g.trim()!==""?w(!0):O("Nothing to rename",{variant:"error"})},children:"Rename"})}),e.jsx(I,{children:e.jsx(re,{label:r===W.TABLE?"New table name":"New view name",value:g,onChange:y=>{i(y.target.value)},fullWidth:!0})})]}),r===W.TABLE&&e.jsxs(I,{className:"pp-action",children:[e.jsxs(I,{children:[e.jsx($,{variant:"contained",onClick:()=>{f.trim()!==""?(F(!0),pi(t,x,s,f,m,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":o(Ke({dbs:t})),O(y.message,{variant:"success"});break;case"info":O(y.message,{variant:"info"});break;default:h.error(y),O(y.message??V.contactSupport,{variant:"error"})}else h.error(y),O(V.contactSupport,{variant:"error"});F(!1)},y=>{h.error("error",y),O(y??V.contactSupport,{variant:"error"}),F(!1)})):O("Nothing to rename",{variant:"error"})},children:"Copy"}),e.jsx($e,{control:e.jsx(We,{checked:m,onClick:y=>{d(!m),y.stopPropagation()}}),label:"Copy data",labelPlacement:"end",sx:{height:"56px"}}),e.jsx(I,{sx:{display:z?"block":"none","& > div":{marginRight:"30px"},"& span.MuiCircularProgress-root, svg":{height:"20px !important",width:"20px !important"}},children:e.jsx(Lt,{title:"Copying..."})})]}),e.jsxs(I,{sx:{display:"grid",gridGap:"10px"},children:[e.jsxs(q,{fullWidth:!0,children:[e.jsx(xt,{variant:"outlined",children:"To database"}),e.jsxs(Ce,{MenuProps:{id:"pp-select-menu"},label:"To database",value:x,onChange:y=>{b(y.target.value)},children:[...v.map(y=>e.jsx(K,{value:y,children:y},y))]})]}),e.jsx(re,{label:"To table name",value:f,onChange:y=>{j(y.target.value)},fullWidth:!0})]})]}),r===W.TABLE&&S[t]!=="system"&&(S[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx($,{variant:"contained",onClick:()=>{_(!0)},children:"Truncate"})}),e.jsxs(I,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx("span",{children:"Deletes all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),S[t]!=="system"&&(S[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx($,{variant:"contained",onClick:()=>{M(!0)},children:"Drop"})}),e.jsxs(I,{sx:{display:"grid",gridGap:"5px"},children:[r==W.VIEW?e.jsx("span",{children:"Deletes view permanently."}):e.jsx("span",{children:"Deletes table and all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),r===W.TABLE&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsxs("form",{method:"POST",action:n.settings.wp.home+"?page=wpda_designer",children:[e.jsx("input",{type:"hidden",name:"action",value:"edit"}),e.jsx("input",{type:"hidden",name:"action2",value:"init"}),e.jsx("input",{type:"hidden",name:"wpda_schema_name",value:t}),e.jsx("input",{type:"hidden",name:"wpda_schema_name_re",value:t}),e.jsx("input",{type:"hidden",name:"wpda_table_name",value:s}),e.jsx("input",{type:"hidden",name:"wpda_table_name_re",value:s}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.alter}),e.jsx("input",{type:"hidden",name:"page_number",value:"1"}),e.jsx("input",{type:"hidden",name:"caller",value:"dataexplorer"}),e.jsx($,{variant:"contained",type:"submit",children:"ALTER"})]})}),e.jsx(I,{sx:{display:"grid",gridGap:"5px"},children:"Loads table into the Data Designer."})]}),P[t].pdsDbs===!0&&((Oe=(X=n==null?void 0:n.settings)==null?void 0:X.wp)==null?void 0:Oe.connect)!==!1&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx($,{variant:"contained",onClick:()=>{if(C!==""&&C>0&&L!==""){const y=new FormData;y.append("wpnonce",n.settings.wp.refresh),y.append("schema_name",t),y.append("table_name",s),y.append("interval",C.toString()),y.append("unit",L),he(y)}else O("Please enter valid scheduled update values",{variant:"error"})},children:"Refresh"})}),e.jsxs(I,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx(I,{children:"Next scheduled update"}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyContent:"start",alignItems:"center",gap:"5px"},children:[e.jsx(re,{type:"number",inputProps:{min:0},value:C,autoComplete:"off",onChange:y=>{const te=y.target.value.replaceAll("-","");E(te===""?"":Number(te))}}),e.jsxs(Ce,{MenuProps:{id:"pp-select-menu"},value:L,onChange:y=>{R(y.target.value)},children:[e.jsx(K,{value:""}),e.jsx(K,{value:"hour",children:"hour"}),e.jsx(K,{value:"day",children:"day"})]})]}),e.jsx(q,{children:e.jsx(ge,{children:"Enter and press REFRESH to apply"})})]})]}),n.create!==""&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx(Kr,{text:n.create,onCopy:()=>{O("SQL was copied to your clipboard",{variant:"info"})},children:e.jsx(je,{title:"Copy SQL to clipboard",children:e.jsx($,{variant:"contained",endIcon:e.jsx(Hr,{}),sx:{display:"flex",alignItems:"flex-start","& svg":{width:"50%"}},children:"SQL"})})})}),e.jsx(I,{sx:{display:"grid",gridGap:"5px"},children:e.jsx(I,{sx:{whiteSpace:"pre-wrap",fontSize:"70%"},children:n.create})})]})]}),e.jsx(xe,{title:`Rename ${r===W.VIEW?"view":"table"}?`,message:"This can affect existing apps using this table!",open:T,setOpen:w,onConfirm:()=>{ui(t,s,g,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":r===W.VIEW?o(dt({dbs:t})):o(Ke({dbs:t})),o(ut({})),O(y.message,{variant:"success"});break;case"info":O(y.message,{variant:"info"});break;default:h.error(y),O(y.message??V.contactSupport,{variant:"error"})}else h.error(y),O(V.contactSupport,{variant:"error"})},y=>{h.error("error",y),O(y??V.contactSupport,{variant:"error"})})}}),e.jsx(xe,{title:"Truncate table?",message:"This action cannot be undone!",open:k,setOpen:_,onConfirm:()=>{Vs(t,s,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":O(y.message,{variant:"success"});break;case"info":O(y.message,{variant:"info"});break;default:h.error(y),O(y.message??V.contactSupport,{variant:"error"})}else h.error(y),O(V.contactSupport,{variant:"error"})},y=>{h.error("error",y),O(y??V.contactSupport,{variant:"error"})})}}),e.jsx(xe,{title:`Drop ${r===W.VIEW?"view":"table"}?`,message:"This action cannot be undone!",open:N,setOpen:M,onConfirm:()=>{Ns(t,s,r,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":r===W.VIEW?o(dt({dbs:t})):o(Ke({dbs:t})),o(ut({})),O(y.message,{variant:"success"});break;case"info":O(y.message,{variant:"info"});break;default:h.error(y),O(y.message??V.contactSupport,{variant:"error"})}else h.error(y),O(V.contactSupport,{variant:"error"})},y=>{h.error("error",y),O(y??V.contactSupport,{variant:"error"})})}})]})},Ci=({dbs:t,tbl:s,typ:r})=>{var S,C;h.debug(t,s,r);const n=U(),[o,l]=p.useState(Te(Et.getState()));h.debug(o);const[c,a]=p.useState(""),[u,g]=p.useState(!1),[i,x]=p.useState({}),[b,f]=p.useState(!1),[j,m]=p.useState(!1);p.useEffect(()=>{u||d()},[t,s]);const d=()=>{qr(t,s,!0,E=>{var R,he;const L=E==null?void 0:E.data;if(h.debug("response data",t,s,L),(R=L==null?void 0:L.access)!=null&&R.select&&Array.isArray(L.access.select)&&L.access.select.includes("POST")){const H={...L.settings};H.list_labels={...L.table_labels},H.form_labels={...L.form_labels},H.column_media={...L.wp_media},delete H.hyperlinks,delete H.ui,delete H.wp;const ue={...L};x(ue),n($n({settings:H,metaData:ue})),g(!0)}else{let H=V.contactSupport;(he=E==null?void 0:E.data)!=null&&he.message&&(H=E.data.message+" - check console for more information"),h.error(H),a(H)}},E=>{h.error("error",E),a(E??V.contactSupport)})};p.useEffect(()=>{c!==""&&(n(Qt({error:c})),n(Ft({})),n(ut({})))},[c]);const T=A(E=>Te(E));h.debug(T);const w=((S=ne)==null?void 0:S.palette.mode)===Gn.LIGHT?(C=ne)==null?void 0:C.palette.primary.main:"",k=E=>{n(Un({anchor:E}))},_=()=>{n(ut({})),n(Ft({}))},N=()=>{b?m(!0):_()},M=()=>{const E={...T};let L=!1;sr(t,s,E,R=>{if(R!=null&&R.code&&(R==null?void 0:R.message)!==void 0)switch(R.code){case"ok":O(R.message,{variant:"success"});break;case"info":O(R.message,{variant:"info"});break;default:h.error(R),O(R.message??V.contactSupport,{variant:"error"}),L=!0}else h.error(R),O(V.contactSupport,{variant:"error"}),L=!0},R=>{h.error(R),O(R??V.contactSupport,{variant:"error"}),L=!0}),L||l(Te(Et.getState())),f(!1)},z=()=>{b?(M(),setTimeout(()=>{_()},1e3)):_()},[F,P]=p.useState("1"),v=(E,L)=>{P(L)};return c!==""?null:e.jsxs(e.Fragment,{children:[e.jsxs(_r,{closeDrawer:N,children:[e.jsx(ht,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(ft,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(I,{sx:{flexGrow:1},children:[e.jsx(ve,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(ve,{sx:{fontSize:"10px",display:{xs:"none",sm:"block"},paddingLeft:"10px"},children:[t," - ",s]})]}),e.jsx(at,{title:"Dock to left",position:"bottom",children:e.jsx(ce,{onClick:()=>{k(Vt.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Rr,{})})}),e.jsx(at,{title:"Dock to right",position:"bottom",children:e.jsx(ce,{onClick:()=>{k(Vt.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Lr,{})})}),e.jsx(at,{title:"Close",position:"bottom",children:e.jsx(ce,{onClick:N,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(es,{})})})]})}),e.jsx(Mt,{className:"pp-settings-container",children:e.jsx(Pt,{sx:{padding:0,margin:0},children:u?e.jsxs(Or,{value:F,children:[e.jsxs(Dr,{variant:"fullWidth",textColor:"primary",onChange:v,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx($t,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx($t,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(I,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(zt,{value:"1",children:e.jsx(Ti,{dbs:t,tbl:s,typ:r,metaData:i})}),e.jsxs(zt,{value:"2",children:[e.jsx(ji,{dbs:t,tbl:s,setIsUpdated:f}),e.jsx(Ii,{dbs:t,tbl:s,setIsUpdated:f}),e.jsx(yi,{dbs:t,tbl:s,typ:r,metaData:i,setIsUpdated:f}),e.jsx(bi,{dbs:t,tbl:s})]})]})]}):e.jsx(I,{sx:{padding:"30px"},children:e.jsx(Lt,{title:"Loading data..."})})})}),e.jsx(Mt,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(Pt,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx($,{variant:"outlined",className:"footer_action_button_apply",onClick:M,children:"Apply"}),e.jsx($,{variant:"outlined",className:"footer_action_button",onClick:z,children:"OK"}),e.jsx($,{variant:"outlined",className:"footer_action_button",onClick:N,children:"Cancel"})]})})]}),e.jsx(xe,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:j,setOpen:m,onConfirm:()=>{_()}})]})},Si=()=>{const t=A(s=>_t(s));return h.debug(t),e.jsx(e.Fragment,{children:t!==void 0&&t.action===me.MANAGE&&e.jsx(Ci,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},la=()=>{const t=zr();return e.jsx(yr,{theme:t,children:e.jsxs(I,{sx:{"& > :nth-of-type(2)":{visibility:"hidden",position:"fixed"}},children:[e.jsx(fi,{}),e.jsx(hi,{}),e.jsx(Si,{})]})})};export{la as default};
